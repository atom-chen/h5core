"use strict";var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jy;!function(t){function e(t,e,i,r){return void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),t.set||t.get||(t.writable=i),t.configurable=r,t.enumerable=e,t}function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0);for(var o in t){var a=t[o],s=void 0==a.enumerable?i:a.enumerable,h=void 0==a.writable?r:a.writable,c=void 0==a.configurable?n:a.configurable;t[o]=e(a,s,h,c)}return t}function r(t){t&&t.parent&&t.parent.removeChild(t)}t.getDescriptor=e,t.makeDefDescriptors=i,t.removeDisplay=r}(jy||(jy={})),Object.defineProperties(Object.prototype,jy.makeDefDescriptors({clone:{value:function(){var t={};for(var e in this)t[e]=this[e];return t}},getPropertyDescriptor:{value:function(t){var e=Object.getOwnPropertyDescriptor(this,t);if(e)return e;var i=Object.getPrototypeOf(this);return i?i.getPropertyDescriptor(t):void 0}},copyto:{value:function(t){for(var e in this){var i=t.getPropertyDescriptor(e);(!i||i.set||i.writable)&&(t[e]=this[e])}}},equals:{value:function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.length||(e=Object.getOwnPropertyNames(t));for(var r=0;r<e.length;r++){var n=e[r];if(this[n]!=t[n])return!1}return!0}},copyWith:{value:function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=0,n=e;r<n.length;r++){var o=n[r];o in this&&(t[o]=this[o])}}},getSpecObject:{value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i={},r=0,n=t;r<n.length;r++){var o=n[r];o in this&&null!=this[o]&&(i[o]=this[o])}return i}}})),Math.DEG_TO_RAD=Math.PI/180,Math.RAD_TO_DEG=180/Math.PI,Math.PI2=2*Math.PI,Math.PI_1_2=.5*Math.PI,Math.clamp=function(t,e,i){return e>t&&(t=e),t>i&&(t=i),t},Math.random2=function(t,e){return t+Math.random()*(e-t)},Math.random3=function(t,e){return t-e+2*Math.random()*e},Number.isSafeInteger||(Number.isSafeInteger=function(t){return 9007199254740991>t&&t>=-9007199254740991}),Object.defineProperties(Number.prototype,jy.makeDefDescriptors({zeroize:jy.getDescriptor({value:function(t){return String.zeroize(this,t)}}),between:jy.getDescriptor({value:function(t,e){return this>=t&&e>=this}})})),Object.defineProperties(String.prototype,jy.makeDefDescriptors({zeroize:{value:function(t){return String.zeroize(this,t)}},substitute:{value:function(){var t=arguments.length;if(t>0){var e;if(1==t?(e=arguments[0],"object"!=typeof e&&(e=arguments)):e=arguments,e instanceof Object&&!(e instanceof RegExp))return this.replace(/\{(?:%([^{}]+)%)?([^{}]+)\}/g,function(t,i,r){var n=e[r];if(i){var o=String.subHandler[i];o&&(n=o(n))}return void 0!==n?""+n:t})}return this.toString()}},hash:{value:function(){for(var t=this.length,e=5381,i=0;t>i;i++)e+=(e<<5)+this.charCodeAt(i);return 4294967295&e}},trueLength:{value:function(){var t=this.match(/[\u2E80-\u9FBF]/gi);return this.length+(t?t.length:0)}}}));var _zeros="000000000000000000000000000000000000000000000000000000000000",zeroLen=_zeros.length;String.zeroize=function(t,e){void 0===e&&(e=2);var i,r=""+t,n=e-r.length;if(zeroLen>e)i=_zeros.slice(0,n);else{i="";for(var o=0;n>o;o++)i+="0"}return i+r},String.subHandler={},String.regSubHandler=function(t,e){this.subHandler[t]=e},Object.defineProperties(Date.prototype,jy.makeDefDescriptors({format:{value:function(t,e){function i(){return e?h.getDate():h.getUTCDate()}function r(){return e?h.getMonth():h.getUTCMonth()}function n(){return e?h.getFullYear():h.getUTCFullYear()}function o(){return e?h.getHours():h.getUTCHours()}function a(){return e?h.getMinutes():h.getUTCMinutes()}function s(){return e?h.getSeconds():h.getUTCSeconds()}var h=this;return t.replace(/"[^"]*"|'[^']*'|(?:d{1,2}|m{1,2}|yy(?:yy)?|([hHMs])\1?)/g,function(t){switch(t){case"d":return i();case"dd":return String.zeroize(i());case"M":return r()+1;case"MM":return String.zeroize(r()+1);case"yy":return(n()+"").substr(2);case"yyyy":return n();case"h":return o()%12||12;case"hh":return String.zeroize(o()%12||12);case"H":return o();case"HH":return String.zeroize(o());case"m":return a();case"mm":return String.zeroize(a());case"s":return s();case"ss":return String.zeroize(s());default:return t.substr(1,t.length-2)}})}}})),Array.binaryInsert=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];for(var o=t.length-1,a=0;o>=a;){var s=a+o>>1,h=t[s];i.apply(void 0,[h].concat(r))?o=s-1:a=s+1}t.splice(a,0,e)},Array.SORT_DEFAULT={number:0,string:"","boolean":!1},Object.freeze(Array.SORT_DEFAULT),Object.defineProperties(Array.prototype,jy.makeDefDescriptors({cloneTo:{value:function(t){t.length=this.length;var e=this.length;t.length=e;for(var i=0;e>i;i++)t[i]=this[i]}},appendTo:{value:function(t){for(var e=this.length,i=0;e>i;i++)t.push(this[i])}},pushOnce:{value:function(t){var e=this.indexOf(t);return~e||(e=this.length,this[e]=t),e}},remove:{value:function(t){var e=this.indexOf(t);return~e?(this.splice(e,1),!0):!1},writable:!0},doSort:{value:function(){for(var t,e,i=arguments.length,r=0;i>r;r++){var n=arguments[r],o=typeof n;"string"===o?t=n:e=!!n}return t?this.sort(function(i,r){return e?r[t]-i[t]:i[t]-r[t]}):this.sort(function(t,i){return e?i-t:t-i})}},multiSort:{value:function(t,e){var i=Array.isArray(e);return this.sort(function(r,n){for(var o=Array.SORT_DEFAULT,a=0,s=t.length;s>a;a++){var h=t[a],c=i?!!e[a]:!!e,u=r[h],l=n[h],p=typeof u,f=typeof l;if("object"==p||"object"==f)return 0;if(p!=f)if("undefined"==p)l=o[f];else{if("undefined"!=f)return 0;u=o[p]}if(l>u)return c?1:-1;if(u>l)return c?-1:1}return 0})}},random:{value:function(){return this[this.length*Math.random()|0]}}}));var Map;"undefined"==typeof Map&&(Map=function(){function t(){this._keys=[],this._values=[],this._size=0}return t.prototype.set=function(t,e){var i=this._keys,r=i.indexOf(t);if(~r)this._values[r]=e;else{var n=this._size;i[n]=t,this._values[n]=e,this._size++}return this},t.prototype.get=function(t){var e=this._keys.indexOf(t);return~e?this._values[e]:void 0},t.prototype.has=function(t){return~this._keys.indexOf(t)},t.prototype["delete"]=function(t){var e=this._keys,i=e.indexOf(t);return~i?(e.splice(i,1),this._values.splice(i,1),this._size--,!0):!1},t.prototype.forEach=function(t,e){for(var i=this._keys,r=this._values,n=0,o=this._size;o>n;n++)t(r[n],i[n],e)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._size=0},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t}());var egret;!function(t){function e(t){return{set:function(e){var i=this.scrollRect;i&&(i[t]=e,this.scrollRect=i)},get:function(){var e=this.scrollRect;return e&&e[t]||0}}}var i=t.Bitmap.prototype;i.refreshBMD=function(){var t=this.texture;null!=t&&(this.texture=null,this.texture=t)};var r=t.Bitmap.prototype.$refreshImageData;i.$refreshImageData=function(){r.call(this);var t=this.$bitmapData;t&&(this.$sourceWidth=t.width,this.$sourceHeight=t.height)};var n=new t.HtmlTextParser;t.TextField.prototype.setHtmlText=function(t){void 0==t?t="":"number"==typeof t&&(t+=""),this.textFlow=t?n.parser(t):jy.Temp.EmptyArray},t.Graphics.prototype.drawRectangle=function(t){this.drawRect(t.x,t.y,t.width,t.height)};var o=t.DisplayObject.prototype;Object.defineProperties(o,jy.makeDefDescriptors({bright:{set:function(e){if(e=Math.clamp(e,-1,1),this._bright!=e){var i=this.filters,r=this._briFilter;0==e?i&&(i.remove(r),i.length||(i=null)):(r||(this._briFilter=r=new t.ColorMatrixFilter),this._bright=e,r.matrix=[1,0,0,0,255*e,0,1,0,0,255*e,0,0,1,0,255*e,0,0,0,1,0],i?i.pushOnce(r):i=[r]),this.filters=i}},get:function(){return this._bright||0}},sRectX:e("x"),sRectY:e("y")}))}(egret||(egret={}));var jy;!function(t){var e=function(){function e(){this._callLaters=[],this._temp=[]}return e.prototype.tick=function(t){for(var e=0,i=0,r=0,n=this._callLaters,o=this._temp,a=n.length;a>e;e++){var s=n[e];t>s.time?o[i++]=s:n[r++]=s}for(n.length=r,e=0;i>e;e++)o[e].execute()},e.prototype.callLater=function(e,i,r,n){for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];var s=t.CallbackInfo.addToList.apply(t.CallbackInfo,[this._callLaters,e,n].concat(o));s.time=i+(r||0)},e.prototype.clearCallLater=function(t,e){for(var i=this._callLaters,r=i.length-1;r>=0;--r){var n=i[r];if(n.checkHandle(t,e))return i.splice(r,1),n.recycle()}},e.prototype.callLater2=function(t,e,i){void 0===i&&(i=0),this._callLaters.pushOnce(t),t.time=e+(i||0)},e.prototype.clearCallLater2=function(t){return this._callLaters.remove(t),t.recycle()},e}();t.CallLater=e,__reflect(e.prototype,"jy.CallLater")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._tweens=[],this._plugins={}}return e.prototype.get=function(e,i,r,n){return n&&this.removeTweens(e),new t.Tween(e,i,r,this)},e.prototype.removeTweens=function(t){if(t.tween_count){for(var e=this._tweens,i=0,r=0,n=e.length;n>r;r++){var o=e[r];o.target==t?(o.paused=!0,o.onRecycle()):e[i++]=o}e.length=i,t.tween_count=0}},e.prototype.removeTween=function(t){if(t)for(var e=this._tweens,i=e.length-1;i>=0;i--){var r=e[i];if(r==t){r.paused=!0,e.splice(i,1),r.onRecycle();break}}},e.prototype.pauseTweens=function(t){if(t.tween_count)for(var e=this._tweens,i=e.length-1;i>=0;i--)e[i].target==t&&(e[i].paused=!0)},e.prototype.resumeTweens=function(t){if(t.tween_count)for(var e=this._tweens,i=e.length-1;i>=0;i--)e[i].target==t&&(e[i].paused=!1)},e.prototype.tick=function(t,e){if(this._tweens.length)for(var i=this._tweens.concat(),r=i.length-1;r>=0;r--){var n=i[r];e&&!n.ignoreGlobalPause||n.paused||n.tick(n._useTicks?1:t)}},e.prototype._register=function(t,e){var i=t.target,r=this._tweens;if(e&&!t._registered)i&&(i.tween_count=i.tween_count>0?i.tween_count+1:1),r.push(t);else{i&&i.tween_count--;for(var n=r.length;n--;)if(r[n]==t)return r.splice(n,1),void t.onRecycle()}},e.prototype.removeAllTweens=function(){for(var t=this._tweens,e=0,i=t.length;i>e;e++){var r=t[e];r.paused=!0,r.onRecycle(),r.target.tweenjs_count=0}t.length=0},e.prototype.hasActiveTweens=function(t){return t?null!=t.tweenjs_count&&!!t.tweenjs_count:this._tweens&&!!this._tweens.length},e.prototype.installPlugin=function(t,e){var i=t.priority;null==i&&(t.priority=i=0);for(var r=0,n=e.length,o=this._plugins;n>r;r++){var a=e[r];if(o[a]){for(var s=o[a],h=0,c=s.length;c>h&&!(i<s[h].priority);h++);o[a].splice(h,0,t)}else o[a]=[t]}},e}();t.TweenManager=e,__reflect(e.prototype,"jy.TweenManager")}(jy||(jy={}));var jy;!function(t){function e(){var e=egret.ticker,i=e.render,r=0|1e3/e.$frameRate,n=[];e.render=function(o,a){function s(){for(var r=f.length,s=0;r>s;s++){var h=f[s];h.execute(!1)}r=p.length;for(var c=n,s=0;r>s;s++)c[s]=p[s];p.length=0;for(var s=0;r>s;s++)c[s].execute();u.tick(d),t.TimerUtil.tick(d),l.tick(y),i.call(e,o,a)}var d=t.DateUtils.serverTime,y=d-h;h=d,y>2e3?(t.dispatch(-190),c=d):c+=r;try{s()}catch(v){t.ThrowError("ticker.render",v)}}}function i(e,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];r(t.CallbackInfo.get.apply(t.CallbackInfo,[e,i].concat(n)))}function r(t){p.push(t)}try{var n=0==window.supportWebp?!1:0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(o){}var a=n?".webp":"",s="Unknown"!=egret.Capabilities.engineVersion,h=0,c=0,u=new t.CallLater,l=new t.TweenManager,p=[],f=[];t.Global={initTick:e,nextTick:i,nextTick2:r,callLater:function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];return u.callLater.apply(u,[t,h,e,i].concat(r))},clearCallLater:function(t,e){return u.clearCallLater(t,e)},callLater2:function(t,e){return u.callLater2(t,h,e)},clearCallLater2:function(t){return u.clearCallLater2(t)},getTween:function(t,e,i,r){return l.get(t,e,i,r)},removeTween:function(t){return l.removeTween(t)},removeTweens:function(t){return l.removeTweens(t)},get isNative(){return s},tweenManager:l,get now(){return h},get frameNow(){return c},get webp(){return a},addInterval:function(t){f.pushOnce(t)},removeInterval:function(t){f.remove(t)}}}(jy||(jy={}));var $gm,jy;!function(t){function e(e,i,r,n){t.RequestLimit.check(e,n)?this._send(e,i,r):t.dispatch(-189,e)}t.NSBytesLen={0:0,1:1,5:8,6:4,7:4,8:8},t.nsHeader={cmd:0,len:0};var i=function(){function i(){var e=this;this.netChange=function(){navigator.onLine?(t.dispatch(-192),e.showReconnect()):t.dispatch(-191)},this.baseConTime=1e4,this.maxConTime=6e4,this._reconCount=0,this._nextAutoTime=0,this._router=new t.NetRouter,this._pcmdList=[],this._tmpList=[],this._readBuffer=new t.ByteArray,this._sendBuffer=new t.ByteArray,this._tempBytes=new t.ByteArray,this._receiveMSG={},window.addEventListener&&(addEventListener("online",this.netChange),addEventListener("offline",this.netChange)),t.on(-190,this.onawake,this)}return i.prototype.setLimitEventEmitable=function(t){t?this.send=e:delete this.send},i.get=function(){return this._ins},i.prototype.setEndian=function(t){this._sendBuffer.$endian=this._readBuffer.$endian=this._tempBytes.$endian=t},i.prototype.showReconnect=function(){this._reconCount+=1;var e=this._reconCount*this.baseConTime,i=this.maxConTime;e>i&&(e=i),this._nextAutoTime=t.Global.now+e,t.dispatch(-194,this._reconCount)},i.prototype.onawake=function(){this._reconCount=0,this._nextAutoTime=t.Global.now+this._autoTimeDelay},i.prototype.regReceiveMSGRef=function(t,e){this._receiveMSG[t]=e},i.prototype.register=function(t,e,i){return void 0===i&&(i=0),this._register(t,e,i,!1)},i.prototype.regOnce=function(t,e,i){return void 0===i&&(i=0),this._register(t,e,i,!0)},i.prototype.remove=function(t,e){this._router.remove(t,e)},i.prototype._register=function(t,e,i,r){return t>32767||-32768>t?!1:(this._router.register(t,e,i,r),!0)},i.prototype.send=function(e,i,r,n){t.RequestLimit.check(e,n)&&this._send(e,i,r)},i.prototype.disconnect=function(){},i.prototype.sendPassive=function(e,i,r){for(var n=this._pcmdList,o=n.length,a=0,s=n;a<s.length;a++){var h=s[a];if(h.cmd==e)return void(h.data=i)}var c=t.recyclable(t.NetSendData);c.cmd=e,c.data=i,c.msgType=r,this._pcmdList[o]=c},i.prototype.writeToBuffer=function(e,i){var r=i.cmd,n=i.data,o=i.msgType;if(e.writeShort(r),void 0==n){this.writeBytesLength(e,0)}else switch(o in t.NSBytesLen&&this.writeBytesLength(e,t.NSBytesLen[o]),o){case 0:break;case 1:e.writeBoolean(n);break;case 5:e.writeDouble(n);break;case 6:e.writeInt(n);break;case 7:e.writeUnsignedInt(n);break;case 8:e.writeInt64(n);break;case 2:e.writeUTF(n);break;case 4:var a=n;e.writeUnsignedShort(a.length),e.writeBytes(a);break;default:var s=this._tempBytes;s.clear(),t.PBUtils.writeTo(n,i.msgType,s),this.writeBytesLength(e,s.length),e.writeBytes(s)}},i.prototype.decodeBytes=function(e){for(var i=this._receiveMSG,r=this._tmpList,n=0,o=t.nsHeader,a=this.decodeHeader;;){if(!a(e,o))break;var s=o.cmd,h=o.len,c=e.position+h,u=i[s];if(void 0!==u){var l=!0,p=void 0;if(h>0&&u in t.NSBytesLen){var f=t.NSBytesLen[u];f>h&&(l=!1)}if(l)switch(u){case 0:break;case 1:p=e.readBoolean();break;case 5:p=e.readDouble();break;case 6:p=e.readInt();break;case 7:p=e.readUnsignedInt();break;case 8:p=e.readInt64();break;case 2:p=e.readUTFBytes(h);break;case 4:p=e.readByteArray(h);break;default:p=t.PBUtils.readFrom(u,e,h)}if(l){var d=t.recyclable(t.NetData);d.cmd=s,d.data=p,r[n++]=d}}e.position=c}for(var y,v=this._router,y=0;n>y;y++){var d=r[y];v.dispatch(d)}},i.prototype.decodeHeader=function(t,e){if(t.readAvailable<4)return!1;e.cmd=t.readShort();var i=t.readUnsignedShort();return t.readAvailable<i?(t.position-=4,!1):(e.len=i,!0)},i.prototype.writeBytesLength=function(t,e){t.writeUnsignedShort(e)},i.prototype.route=function(e,i){var r=t.recyclable(t.NetData);r.cmd=e,r.data=i,this._router.dispatch(r)},i}();t.NetService=i,__reflect(i.prototype,"jy.NetService")}(jy||(jy={}));var jy;!function(t){function e(t){var e=t.webGLTexture;if(e){var i=e.glContext;i&&(i.bindTexture(i.TEXTURE_2D,e),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.source))}}function i(t,i){void 0===t&&(t=256),i=i||document.createElement("canvas");var r=new egret.BitmapData(i);r.width=r.height=i.height=i.width=t,r.$deleteSource=!1;var n=i.getContext("2d"),o=0,a={};return{get:function(t){return a[t]},reg:function(t,i,n){var s=i.x,h=i.y,c=i.width,u=i.height,l=a[t];return l?void 0:(l=n||new egret.Texture,l.disposeBitmapData=!1,l.bitmapData=r,a[t]=l,o++,e(r),l.$initData(s,h,c,u,0,0,c,u,c,u),l)},remove:function(t){var e=a[t];return e?(n.clearRect(e.$bitmapX,e.$bitmapY,e.textureWidth,e.textureHeight),delete a[t],o--,e):void 0},get ctx(){return n},extSize:function(o){if(o>2048)return!1;if(o>t){var a=n.getImageData(0,0,t,t);t=o,r.width=r.height=i.height=i.width=t,n.putImageData(a,0,0),e(r)}return!0},dispose:function(){i.width=i.height=0,r.$dispose()},get texCount(){return o}}}t.getTextureSheet=i}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.id=+e,i}return __extends(e,t),e}(egret.Sprite);t.BaseLayer=e,__reflect(e.prototype,"jy.BaseLayer");var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return egret.sys.$TempStage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return egret.sys.$TempStage.stageHeight},enumerable:!0,configurable:!0}),e}(e);t.UILayer=i,__reflect(i.prototype,"jy.UILayer");var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.$doAddChild=function(i,r,n){if(void 0===n&&(n=!0),"depth"in i)return t.GameEngine.invalidateSort(),e.prototype.$doAddChild.call(this,i,r,n);throw new Error("Only IDepth can be added to this LayerID("+this.id+")")},i.prototype.sort=function(){this.$children.doSort("depth")},i}(e);t.SortedLayer=r,__reflect(r.prototype,"jy.SortedLayer")}(jy||(jy={}));var jy;!function(t){function e(t,e){var i="_injectProxys";return function(r,n){var o;if(r.hasOwnProperty(i))o=r[i];else{var a=r[i];if(r[i]=o={},a)for(var s in a){var h=a[s];h.isPri||(o[s]=h)}}o[n]={ref:t,isPri:e}}}var i=function(){function e(t){this._name=t,this.checkInject()}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.checkInject=function(){var e=this._injectProxys;if(e){var i=void 0;for(var r in e){var n=e[r].ref;i="function"==typeof n?t.Facade.getNameOfInline(n):n;var o=t.proxyCall(i);this[r]=o,o._$isDep=!0,this.addDepend(o)}}},e.prototype.addReadyExecute=function(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this._asyncHelper;o||(this._asyncHelper=o=new t.AsyncHelper,o.isReady=this.isReady),o.addReadyExecute.apply(o,[e,i].concat(r))},Object.defineProperty(e.prototype,"isReady",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.startSync=function(){},e.prototype.addDepend=function(e){this._dependerHelper||(this._dependerHelper=new t.DependerHelper(this,this.dependerReadyCheck)),this._dependerHelper.addDepend(e)},e.prototype.dependerReadyCheck=function(){},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.prototype.afterAllReady=function(){},e}();t.FHost=i,__reflect(i.prototype,"jy.FHost",["jy.IDepender","jy.IAsync"]),t.d_dependProxy=e}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"suiData",{get:function(){return this._suiData},enumerable:!0,configurable:!0}),e.prototype.bindSuiData=function(t){this._suiData=t},e.prototype.parseData=function(t,e){this._parsed||(this._parsed=!0,this.bindSuiData(e),t&&(this.setBaseData(t[1]),this.parseSelfData(t[2])))},e.prototype.parseSize=function(t){t&&(this.size=new egret.Rectangle(t[0],t[1],t[2],t[3]))},e.prototype.createElement=function(e){return t.singleton(t.SuiResManager).getElement(this._suiData,e)},e.prototype.setBaseData=function(t){this._baseData=t},e.prototype.parseSelfData=function(t){},e.prototype.get=function(){var e=this._createT();return e.suiRawRect=this.size,e instanceof t.Component&&e.init(this),this._baseData&&t.SuiResManager.initBaseData(e,this._baseData),e},e}();t.BaseCreator=e,__reflect(e.prototype,"jy.BaseCreator")}(jy||(jy={}));var jy;!function(t){function e(e){var r=e.prototype;r.$setEnabled=i,r.useDisFilter=!0,Object.defineProperty(r,"enabled",t.getDescriptor({set:function(t){this._enabled!=t&&this.$setEnabled(t)},get:function(){return this._enabled}}))}function i(e){this._enabled=e,this.touchEnabled=e,this.touchChildren=e,this.useDisFilter&&(this.filters=e?null:t.FilterUtils.gray)}t.addEnable=e;var r=function(t){function e(){var e=t.call(this)||this;return e.useDisFilter=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"guid",{get:function(){return this._guid},enumerable:!0,configurable:!0}),e.prototype.init=function(t){this._creator=t,this.enabled=!0,this.stageEvent(),this.bindChildren()},e.prototype.stageEvent=function(t){var e=t?this.off:this.on;e.call(this,"addedToStage",this.onAwake,this),e.call(this,"removedFromStage",this.onSleep,this)},e.prototype.onAwake=function(){},e.prototype.onSleep=function(){},e.prototype.dispose=function(){this.removeAllListeners()},e.prototype.bindChildren=function(){},e.prototype.drawDele=function(){if(this._creator){var t=this.graphics;t.lineStyle(2,65280),t.beginFill(255,.3),t.drawRectangle(this._creator.size)}},e.prototype.setLayoutBoundsSize=function(t,e){},e.prototype.getPreferredBounds=function(t){},e.prototype.setLayoutBoundsPosition=function(t,e){},e.prototype.getLayoutBounds=function(t){},Object.defineProperty(e.prototype,"view",{get:function(){return this},enumerable:!0,configurable:!0}),e}(egret.Sprite);t.Component=r,__reflect(r.prototype,"jy.Component"),e(r)}(jy||(jy={}));var jy;!function(t){function e(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];for(var n=e.prototype,o=0,a=Object.getOwnPropertyNames(n);o<a.length;o++){var s=a[o];if(!i||~i.indexOf(s)){var h=n.getPropertyDescriptor(s);h?Object.defineProperty(t,s,h):t[s]=n[s]}}return t}function i(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return r(t.prototype,e.prototype,i),t}function r(t,e,i){for(var n=0,o=Object.getOwnPropertyNames(e);n<o.length;n++){var a=o[n];(!i||~i.indexOf(a))&&(a in t||(t[a]=e[a]))}var s=Object.getPrototypeOf(e);return s?r(t,s,i):void 0}function n(t,e){var r=function(){};return Object.assign?Object.assign(r.prototype,t.prototype,e.prototype):(r=i(r,t),r=i(r,e)),r}function o(t,e,i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}function a(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];for(var n=0;n<i.length;n++){var a=i[n];o(t,e,a)}}t.expandInstance=e,t.expand=i,t.getMixin=n,t.copyProperty=o,t.copyProperties=a}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.swis={},this.liss=[],this._stas=[]}return Object.defineProperty(e.prototype,"states",{get:function(){return this._stas},enumerable:!0,configurable:!0}),e.prototype.add=function(t){this.liss.pushOnce(t)},e.prototype.remove=function(t){this.liss.remove(t)},e.prototype.addToStates=function(){for(var t=arguments,e=t[0],i=1;i<t.length;i++)this.addToState(t[i],e)},e.prototype.removeAllState=function(t){if(t)for(var e=this._stas,i=0;i<e.length;i++)this.removeFromState(e[i],t)},e.prototype.removeFromState=function(t,e){var i=this.swis[t];return i&&i.remove(e)},e.prototype.addToState=function(e,i){i||t.ThrowError("addToState没有设置正确!");var r=this.swis[e];if(r){if(~r.indexOf(i))return}else this.swis[e]=r=[],this._stas.push(e);r.push(i),this.current==e&&i.awakeBy(this.current)},e.prototype.clear=function(){this.swis={},this.liss.length=0,this.current=void 0},e.prototype.setState=function(t){var e=this.current;if(e!=t){this.current=t;var i=this.swis,r=i[e],n=i[t],o=n&&n.length||0;if(this.checkBeforeSleep)for(var a=0;o>a;a++){var s=n[a];s.beforeLastSleep&&s.beforeLastSleep(t)}if(r)for(var a=0;a<r.length;a++){var s=r[a];n&&~n.indexOf(s)||s.sleepBy&&s.sleepBy(t)}for(var a=0;o>a;a++){var s=n[a];s.awakeBy&&s.awakeBy(t)}var h=this.liss;if(h)for(var a=0;a<h.length;a++)h[a].setState(t)}},e.prototype.isInState=function(t,e){void 0==e&&(e=this.current);var i=this.swis[e];return i?i.indexOf(t)>-1:void 0},e}();t.StateMachine=e,__reflect(e.prototype,"jy.StateMachine",["jy.IStateListener"])}(jy||(jy={}));var jy;!function(t){function e(){function e(t,e){var i;if("object"!=typeof t){if(i=v[t],!i)return void(g[t]=e)}else i=t;Object.defineProperty(i,"def",{value:e})}function r(t,i){var r=g[t];r&&e(i,r),n(i),v[t]=i}function n(t,e){for(var i in t){var r=t[i];if(4 in r){var n=t.def;n||(n=e&&e.prototype||{},Object.defineProperty(t,"def",{value:n})),n[r[0]]=r[4]}}e&&(t.ref=e)}function o(e,i,r){void 0===r&&(r=-1);var n=0;r>-1&&(n=i.bytesAvailable-r);var o="object"==typeof e?e:v[e];if(!o)return void t.ThrowError("非法的通信类型["+e+"]");for(var u=o.ref,l=o.def,p=u?new u:l?Object.create(o.def):{};i.bytesAvailable>n;){var f=i.readVarint();if(0!=f){var d=f>>>3,g=o[d];if(g){var _=g[0],m=g[1],b=g[2],w=g[3],j=void 0,x=3==m;if(!x||7!=(7&f))switch(b){case 1:j=i.readPBDouble();break;case 2:j=i.readPBFloat();break;case 3:case 4:case 18:j=i.readVarint64();break;case 17:j=y(i.readVarint());break;case 5:case 13:case 14:j=i.readVarint();break;case 6:case 16:j=i.readFix64();break;case 7:j=i.readFix32();break;case 8:j=i.readBoolean();break;case 9:j=s(i);break;case 10:j=void 0;break;case 11:j=h(i,w);break;case 12:j=c(i);break;case 15:j=i.readSFix32();break;default:j=a(f,i)}if(x){var S=p[_];S||(p[_]=S=[]),S.push(j)}else p[_]=j}else t.ThrowError("读取消息类型为："+e+"，索引"+d+"时数据出现错误，找不到对应的数据结构配置"),a(f,i)}}return p}function a(e,i){var r,n=7&e;switch(n){case 0:r=i.readVarint();break;case 2:r=s(i);break;case 5:r=i.readInt();break;case 1:r=i.readDouble();break;default:t.ThrowError("protobuf的wireType未知")}return r}function s(t){var e=t.readVarint();return e>0?t.readUTFBytes(e):""}function h(t,e){var i=t.readVarint();return o(e,t,i)}function c(t){var e=t.readVarint();return t.readByteArray(e)}function u(e,r,n,o){if(void 0!=e){var a="object"==typeof r?r:v[r];if(!a)return void t.ThrowError("非法的通信类型["+r+"]，堆栈信息:"+new Error);n||(n=new t.ByteArray);for(var s in a){var h=+s,c=a[h],u=c[0],p=c[1];if(1!=p||u in e){var f=e[u];if(void 0!=f&&f!==c[4]){var d=c[2],y=c[3],g=i[d],_=h<<3|g;if(3==p){for(var m in f){var b=f[m];l(b,d,void 0==b?h<<3|7:_,n,y)}}else l(f,d,_,n,y)}}}return n}}function l(e,i,r,n,o){switch(n.writeVarint(r),i){case 7:n.writeFix32(p(e,i));break;case 15:n.writeSFix32(f(e,i));break;case 2:n.writePBFloat(e);break;case 1:n.writePBDouble(e);break;case 6:case 16:n.writeFix64(e);break;case 5:e=f(e,i),0>e?n.writeVarint64(e):n.writeVarint(e);break;case 17:n.writeVarint(d(f(e,i)));break;case 14:case 13:n.writeVarint(p(e,i));break;case 3:case 18:case 4:n.writeVarint64(e);break;case 8:n.writeVarint(e?1:0);break;case 9:case 12:case 11:if(11==i)var a=u(e,o);else 12==i?a=e:(a=new t.ByteArray,a.writeUTFBytes(e));var s=a?a.length:0;n.writeVarint(s),s>0&&n.writeBytes(a,0,s)}}function p(e,i){return e=+e||0,(e>4294967295||0>e)&&t.ThrowError("PBMessageUtils写入数据时候，使用的类型："+i+"，值为："+e+"，但超出整型范围。"),e}function f(e,i){return e=+e||0,(e>2147483647||-2147483648>e)&&t.ThrowError("PBMessageUtils写入数据时候，使用的类型："+i+"，值为："+e+"，但超出整型范围。"),e}function d(t){return t<<1^t>>31}function y(t){return t>>1^(1&t)<<31>>31}var v={},g={};return{regDef:e,regStruct:r,initDefault:n,add:function(t){if(t&&!t.$$inted){for(var e in t){var i=t[e];if("object"!=typeof i)for(var n=[e,i];;){if(i=t[i],null==i)return!1;if("object"==typeof i)break;if(~n.indexOf(i))return!1;n.push(i)}r(e,i)}t.$$inted=1}},readFrom:o,writeTo:u,readMessage:h,readString:s,readBytes:c}}var i=[,1,5,0,0,0,1,5,0,2,,2,2,0,0,5,1,0,0];t.getPBUtils=e,t.PBUtils=e()}(jy||(jy={}));var jy;!function(t){function e(t){return"#"+t.toString(16).zeroize(6)}function i(){r>=o*o&&(o<<=1,a.extSize(o<<2),n++)}var r=0,n=5,o=Math.pow(2,n),a=t.getTextureSheet(o<<2),s=[[0,0],[1,0],[0,1],[1,1]];t.ColorUtil={getColorString:e,getColorValue:function(t){return/#[0-9a-f]{6}/i.test(t)?+("0x"+t.substring(1)):0},getTexture:function(t,o){void 0===t&&(t=0),void 0===o&&(o=.8);var h=t+"_"+o,c=a.get(h);if(!c){i();for(var u=n,l=0,p=0,f=r;;){var d=2*u,y=f>>d;f-=y<<d;var v=s[y],g=2<<d/2-1;if(l+=v[0]*g,p+=v[1]*g,!--u){var _=s[f];l+=_[0],p+=_[1];break}}var m=a.ctx;m.globalAlpha=o,m.fillStyle=e(t),l<<=2,p<<=2,m.fillRect(l,p,4,4);var b=2;c=a.reg(h,{x:l+1,y:p+1,width:b,height:b}),c&&r++}return c}}}(jy||(jy={}));var jy;!function(t){function e(){t.dispatch(-1996),i=!1}var i,r=function(){function r(){this.d=0,this.f=0,this.idx=0,this.nextRenderTime=0,this.renderedTime=0,this._playSpeed=1}return Object.defineProperty(r.prototype,"playSpeed",{get:function(){return this._playSpeed},set:function(t){0>t&&(t=0),t!=this._playSpeed&&(this._playSpeed=t)},enumerable:!0,configurable:!0}),r.prototype.onData=function(n,o){var a=this.nextRenderTime;if(o>a){var s=this.renderedTime,h=o-a,c=n.frames,u=this.idx,l=c.length-1,p=this.playSpeed*r.globalPlaySpeed,f=void 0;if(p>0)for(h>500&&(0!=a&&r.dispatchSlowRender&&(i||(i=!0,t.Global.nextTick(e))),a=o,s=o),p=1/p,.01>p&&(p=.01);;){if(f=c[u],!f){if(this.idx=0,this.isComplete(n))return void this.doComplete(o);u=0,f=c[0];break}var d=f.t*p;if(0>=d){d=o-s;break}if(a=s+d,!(o>a))break;f.e&&this.dispatchEvent(f.e,o),s=a,u++}else f=c[u];if(this.idx=u,this.renderedTime=s,this.nextRenderTime=a,this.willRenderFrame=f,u>l&&(this.idx=0,this.isComplete(n)))return void this.doComplete(o)}},r.prototype.isComplete=function(t){return!t.isCircle},r.prototype.doRender=function(t){this.willRenderFrame&&(this.clearRes(),this.renderFrame(this.willRenderFrame,t))},r.prototype.renderFrame=function(t,e){this.f=t.f},r.prototype.clearRes=function(){},r.prototype.dispatchEvent=function(t,e){},r.prototype.doComplete=function(t){},r.globalPlaySpeed=1,r}();t.BaseRender=r,__reflect(r.prototype,"jy.BaseRender",["jy.IDrawInfo"])}(jy||(jy={}));var jy;!function(t){function e(t){return n||(n={},n[0]=u,n[2]=c,n[4]=h),n[t]}function i(t,e){var i="",r=e&&e.length||0;if(r){do i=e[t%r]+i,t=t/r>>0;while(t)}else i=t+"";return i}function r(e,i,r){var n=t.ADKey.getAction(e),o=r[n];if(o){var a=t.ADKey.getDirection(e),s=o[a];if(s)for(var h=0;h<s.length;h++)i.bindTexture(s[h])}}var n,o=function(){function i(){this.urCreator=t.UnitResource}return i.prototype.getCastPoint=function(e,i){if(this.castPoints){var r=this.castPoints[t.ADKey.get(e,i)];if(r)return r}},i.prototype.getResKey=function(t,e){return this.splitInfo.getResKey(t,e)},i.prototype.bindResource=function(t,e,i){return this.splitInfo.bindResource(t,e,i)},i.prototype.init=function(i,r){this.key=i,this._resources={};var n=+r[0];this.type=n;var o=e(n);if(o){var a=new o(i);this.splitInfo=a,a.parseSplitInfo(r[1]),this.frames=a.parseFrameData(r[2]);var s=r[3];if(s){this.headY=+s[0],this.hurtY=+s[1];var h=s[2];if(h){var c={};this.castPoints=c;for(var u in h)for(var l=h[u],p=0;8>p;p++){var f=l[p>4?8-p:p];f&&(c[t.ADKey.get(+u,p)]={x:+f[0],y:+f[1]})}}}}},i.prototype.decodeImageDatas=function(t){for(var e in t){var i=this.getResource(e);i.decodeData(t[e])}},i.prototype.getResource=function(t){var e=this._resources[t];return e||(e=new this.urCreator(t,this),this._resources[t]=e),e},i.prototype.getUnitResource=function(t){var e=this.getResource(t);return e.loadData(),e},i}();t.PstInfo=o,__reflect(o.prototype,"jy.PstInfo");var a=function(){function e(t){this.key=t}return e.prototype.parseFrameData=function(e){this._resDict={};var i={},r=[];for(var n in e){var o=+n,a=t.getActionInfo(e[o],o);i[o]=a;for(var s=a.frames,h=0;h<s.length;h++){var c=s[h];r.pushOnce(c.a)}}return this.parseADDict(r),i},e.prototype.parseADDict=function(t){},e.prototype.parseSplitInfo=function(t){},e.prototype.forEach=function(t){},e}();t.SplitInfo=a,__reflect(a.prototype,"jy.SplitInfo"),t.ADKey={get:function(t,e){return t<<8|e
},getAction:function(t){return t>>8},getDirection:function(t){return 255&t}};var s=function(){function t(t,i){for(var r=t;i>=r;r++)e.push(String.fromCharCode(r))}var e=[];return t(97,122),t(65,90),e}(),h=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.parseADDict=function(e){for(var i=this.adDict={},r=0;r<e.length;r++)for(var n=e[r],o=0;5>o;o++){var a=this.getResKey(o,n);i[a]=t.ADKey.get(n,o)}},n.prototype.parseSplitInfo=function(t){this._n=t.n||"{a}{d}",this._a=t.a||s,this._d=t.d},n.prototype.getResKey=function(e,r){var n=t.ADKey.get(r,e),o=this._resDict[n];return o||(this._resDict[n]=o=this._n.substitute({f:this.key,a:i(r,this._a),d:i(e,this._d)})),o},n.prototype.forEach=function(t){var e=this.adDict;for(var i in e)if(t(i,e[i]))return},n.prototype.bindResource=function(t,e,i){var n=this.adDict[t];r(n,e,i)},n}(a);__reflect(h.prototype,"OneADSInfo");var c=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.getADKey=function(t){return this.adDict[t]},i.prototype.parseSplitInfo=function(e){var i=!0;if(e){this._resDict={},this._subReses=[];for(var r=this.adDict={},n=this._resDict,o=this._subReses,a=e.length,s=0;a>s;s++){var h=e[s][0],c=h.a;if(c){var u=c.length;if(u){i=!1;var l=this.getFileName(h),p=r[l];p||(p=[],r[l]=p),l&&o.pushOnce(l);for(var f=0;u>f;f++){var d=c[f];n[d]=l,p.push(t.ADKey.get(d,0),t.ADKey.get(d,1),t.ADKey.get(d,2),t.ADKey.get(d,3),t.ADKey.get(d,4))}}}}}if(i)throw new Error("no pak split info")},i.prototype.getFileName=function(t){var e=t.a;return"2-"+e.join("_")},i.prototype.getResKey=function(t,e){return this._resDict[e]},i.prototype.bindResource=function(t,e,i){var n=this.adDict[t];n.forEach(function(t){r(t,e,i)})},i}(a);__reflect(c.prototype,"ActionSInfo");var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getResKey=function(t,e){return"d"},e.prototype.bindResource=function(t,e,i){for(var r in i){var n=i[r];if(n)for(var o in n){var a=n[o];if(a)for(var s=0;s<a.length;s++)e.bindTexture(a[s])}}},e}(a);__reflect(u.prototype,"AllSInfo")}(jy||(jy={}));var jy;!function(t){var e=t.Global.webp?".webp":"",i=function(){function t(){this.ext=".jpg",this.pWidth=256,this.pHeight=256}return t.prototype.getMapUri=function(i,r){return""+t.prefix+this.path+"/"+r+"_"+i+this.ext+e},t.prototype.getImgUri=function(e){return""+t.prefix+this.path+"/"+e},t.prefix="m/",t}();t.MapInfo=i,__reflect(i.prototype,"jy.MapInfo")}(jy||(jy={}));var $gm,jy;!function(t){function e(t,e,i,r,n,o,a,s){void 0===a&&(a=0),void 0===s&&(s=0);var h=e.x+a,c=e.y+s,u=e.width,l=e.height,p=t.pWidth,f=t.pHeight,d=h/p|0,y=c/f|0,v=(h+u)/p|0,g=(c+l)/f|0;if(d=Math.max(d-i,0),y=Math.max(y-i,0),v=Math.min(v+i,t.maxPicX),g=Math.min(g+i,t.maxPicY),!n||n.call(o,d,y,v,g)){for(var _=y;g>=_;_++)for(var m=d;v>=m;m++){var b=t.getMapUri(m,_);r.call(o,b,m,_,t)}return!0}}function i(t,e,i,r){var n=e*i+t,o=n>>3,a=n-(o<<3);return r[o]>>7-a&1}var r=function(r){function o(){var t=null!==r&&r.apply(this,arguments)||this;return t.preload=0,t._showing=[],t}return __extends(o,r),Object.defineProperty(o.prototype,"currentMap",{get:function(){return this._currentMap},set:function(t){t!=this._currentMap&&(this._currentMap=t)},enumerable:!0,configurable:!0}),o.prototype.addMap=function(e,r,n,o){var a=o.pWidth,s=o.pHeight,h=o.noPic,c=o.maxPicX;if(!h||0==i(r,n,c+1,h)){var u=t.ResManager.get(e,this.noRes,this,e,r,n,a,s);u.isStatic=!0;var l=this._idx;this.$doAddChild(u,l,!1),this._showing[l++]=u,this._idx=l}},o.prototype.reset=function(){this.lsc=this.lsr=this.lec=this.ler=void 0},o.prototype.check=function(e,i,r,n){if(e!=this.lsc||i!=this.lsr||r!=this.lec||n!=this.ler){this.lsc=e,this.lsr=i,this.lec=r,this.ler=n;for(var o=t.Global.now,a=this._showing,s=a.length;s>0;){var h=a[--s];h.isStatic=!1,h.lastUseTime=o,this.$doRemoveChild(s,!1)}return!0}},o.prototype.setRect=function(t,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=this._currentMap;n&&(this._idx=0,e(n,t,this.preload,this.addMap,this.check,this,i,r)&&(this._showing.length=this._idx))},o.prototype.noRes=function(e,i,r,o,a){var s=new n,h=this,c=h.mini,u=h.miniTexDict,l=i*o,p=r*a;if(c){var f=t.getPosHash2(i,r),d=u[f];if(!d){var y=c.textureWidth,v=c.textureHeight,g=this._currentMap,_=g.width,m=g.height;u[f]=d=new egret.Texture;var b=y/_,w=v/m,j=o*b,x=a*w;d.$initData(l*b,p*w,j,x,0,0,j,x,j,x),d.$bitmapData=c.bitmapData}s.texture=d,s.width=o,s.height=a}return s.reset(i,r,e),s.x=l,s.y=p,s.load(),s},o.prototype.setMini=function(e){var i=this._currentMap.getImgUri(e),r=this.miniUri;r!=i&&(r&&t.Res.cancel(r),this.miniUri=i,this.mini=void 0,this.miniTexDict={},t.Res.load(i,t.ConfigUtils.getResUrl(i),t.CallbackInfo.get(this.miniLoad,this),2))},o.prototype.miniLoad=function(t){var e=t.data,i=t.uri;i==this.miniUri&&(this.mini=e)},o.prototype.removeChildren=function(){this._showing.length=0,r.prototype.removeChildren.call(this)},o}(t.BaseLayer);t.TileMapLayer=r,__reflect(r.prototype,"jy.TileMapLayer"),t.getMapBit=i,r.checkRect=e;var n=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.reset=function(e,i,r){this.col=e,this.row=i,this.uri=r,this.url=t.ConfigUtils.getResUrl(r)},i.prototype.load=function(){t.Res.load(this.uri,this.url,t.CallbackInfo.get(this.loadComplete,this))},i.prototype.loadComplete=function(t){var e=t,i=e.data,r=e.uri;i&&r==this.uri&&(this.texture=i)},i.prototype.dispose=function(){var t=this.texture;t&&(this.texture=void 0,t.dispose())},i}(egret.Bitmap);t.TileMap=n,__reflect(n.prototype,"jy.TileMap",["jy.IResource"])}(jy||(jy={}));var jy;!function(t){function e(t,e){var i=e.subtract(t),n=new r(i.x,i.y);return n.normalize(1),n}function i(t,e){return t.x*e.x+t.y*e.y}var r=egret.Point,n=new r,o=function(){function t(){this.pA=new r,this.pB=new r}return t.prototype.setPA=function(t){var e=this.pA;return e.setTo(t.x,t.y),this.calcedNormal=!1,this},t.prototype.setPB=function(t){return this.pB.copyFrom(t),this.calcedNormal=!1,this},t.prototype.setPoints=function(t,e){return this.pA.copyFrom(t),this.pB.copyFrom(e),this.calcedNormal=!1,this},t.prototype.computeNormal=function(){if(!this.calcedNormal){var t=e(this.pA,this.pB),i=t.y;t.y=t.x,t.x=-i,this.m_Normal=t,this.calcedNormal=!0}},t.prototype.signedDistance=function(t){this.computeNormal(),n.copyFrom(t);var e=n.subtract(this.pA);return i(this.m_Normal,e)},t.prototype.classifyPoint=function(t,e){void 0===e&&(e=1e-6);var i=0,r=this.signedDistance(t);return r>e?i=2:-e>r&&(i=1),i},t.prototype.intersection=function(t,e){var i=t.pA,r=i.x,n=i.y,o=t.pB,a=o.x,s=o.y,h=this,c=h.pA,u=c.x,l=c.y,p=h.pB,f=p.x,d=p.y,y=s-n,v=a-r,g=d-l,_=f-u,m=r-u,b=n-l,w=y*_-v*g,j=m*y-b*v,x=m*g-b*_;if(0==w)return 0==j&&0==x?0:5;j/=w,x/=w;var S=u+j*_,T=l+j*g;return e&&(e.x=S,e.y=T),j>=0&&1>=j&&x>=0&&1>=x?2:x>=0&&1>=x?3:j>=0&&1>=j?4:1},t.prototype.equals=function(t){var e=this,i=e.pA,r=e.pB,n=t.pA,o=t.pB;return i.equals(n)&&r.equals(o)||i.equals(o)&&r.equals(n)},t}();t.Line=o,__reflect(o.prototype,"jy.Line")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){}return t.prototype.contain=function(t){for(var e=t.x,i=t.y,r=!1,n=this.points,o=0,a=n.length-1;o<n.length;a=o++){var s=n[o],h=s.x,c=s.y,u=n[a],l=u.x,p=u.y,f=c>i!=p>i&&(l-h)*(i-c)/(p-c)+h>e;f&&(r=!r)}return r},t}();t.Polygon=e,__reflect(e.prototype,"jy.Polygon")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._total},enumerable:!0,configurable:!0}),t.prototype.setShakeTarget=function(t){return this._target=t,this},t.prototype.setTargetPos=function(t,e){var i=this._target;return void 0===t&&(t=i?i.x:0),void 0===e&&(e=i?i.y:0),this._cx=t,this._cy=e,this},t.prototype.start=function(){this._target&&(this._shaking=!0)},t.prototype.end=function(){if(this._shaking){var t=this,e=t._cx,i=t._cy,r=t._target;r.dispatch?r.dispatch(-1989,{x:e,y:i}):(r.x=e,r.y=i),this._shaking=!1}},t.prototype.dispose=function(){this._target=void 0},t}();t.BaseShake=e,__reflect(e.prototype,"jy.BaseShake",["jy.Shake"])}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return e.prototype.getAction=function(t){return e.defaultAction},e.prototype.playAction=function(e,i,r){var n=this.getAction(i);n?(e.setMountType(n.mountType),e.doAction(r,n.action)):t.ThrowError("未实现动作{mountType:"+i+"}")},e.prototype.start=function(t,e){return this._isEnd=!1,!0},e.prototype.doData=function(t,e){},Object.defineProperty(e.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.terminate=function(){},e.prototype.playComplete=function(t,e){this._isEnd=!0},Object.defineProperty(e.prototype,"isEnd",{get:function(){return this._isEnd},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(t,e,i){},e.prototype.doRender=function(t,e){},e.prototype.recycle=function(){this._isEnd=!0},e.defaultAction={mountType:0,action:0},e}();t.UnitAction=e,__reflect(e.prototype,"jy.UnitAction")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._readyState=0,i}return __extends(e,t),Object.defineProperty(e.prototype,"isReady",{get:function(){return 2==this._readyState&&this._selfReady},enumerable:!0,configurable:!0}),e.prototype.startSync=function(){return 2==this._readyState?this.selfReady():0==this._readyState&&(this._readyState=1,this._startSync()),!1},e.prototype._startSync=function(){},e.prototype.selfReady=function(){this.parseSelfData(),this._selfReady=!0,this._dependerHelper?this._dependerHelper.check():this.allReadyHandler()},e.prototype.parseSelfData=function(){},e.prototype.dependerReadyCheck=function(){this._selfReady&&this.allReadyHandler()},e.prototype.allReadyHandler=function(){2!=this._readyState&&(this.afterAllReady(),this._readyState=2,this._asyncHelper&&this._asyncHelper.readyNow())},e}(t.FHost);t.Proxy=e,__reflect(e.prototype,"jy.Proxy")}(jy||(jy={}));var jy;!function(t){function e(t,e,i,r){var n="_interests";return function(o,a,s){var h;if(o.hasOwnProperty(n))h=o[n];else{var c=o[n];if(o[n]=h={},c)for(var u in c){var l=c[u];l.isPri||(h[u]=l)}}h[t]={handler:s.value,priority:r,trigger:e,isPri:i}}}var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.interest=function(t,e,i,r){var n={};n.handler=e,n.priority=r||0,n.trigger=i;var o=this._interests;if(o||(this._interests=o={}),o[t]=n,i){var a=this._awakeCallers;a||(this._awakeCallers=a=[]),a.pushOnce(e)}},i.prototype.removeSkinListener=function(t){t&&(t.off("removedFromStage",this.onStage,this),t.off("addedToStage",this.onStage,this))},i.prototype.addSkinListener=function(t){t&&(t.on("removedFromStage",this.onStage,this),t.on("addedToStage",this.onStage,this))},i.prototype.bindTimer=function(e,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=1e3),void 0===n&&(n=this);for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];var s=this._tList;s||(this._tList=s=[]);var h=t.CallbackInfo.addToList.apply(t.CallbackInfo,[s,e,n].concat(o));h.time=r,t.TimerUtil.add(r,h),i&&h.execute(!1)},i.prototype.looseTimer=function(e,i,r){void 0===i&&(i=1e3),void 0===r&&(r=this);var n=this._tList;if(n){var o=t.CallbackInfo.removeFromList(n,e,r);o&&(t.TimerUtil.remove(i,o),o.recycle())}},i.prototype.awakeTimer=function(){var e=this._tList;if(e)for(var i=0;i<e.length;i++){var r=e[i];t.TimerUtil.add(r.time,r)}},i.prototype.sleepTimer=function(){var e=this._tList;if(e)for(var i=0;i<e.length;i++){var r=e[i];t.TimerUtil.remove(r.time,r)}},Object.defineProperty(i.prototype,"isReady",{get:function(){return this._ready},enumerable:!0,configurable:!0}),i.prototype.onStage=function(t){this.checkInterest(),this._ready&&this.stageChange("addedToStage"==t.type)},i.prototype.stageChange=function(e){var i,r,n=this._interests;if(e){for(i in n)r=n[i],t.on(i,r.handler,this,r.priority);var o=this._awakeCallers;if(o)for(var a=0;a<o.length;a++)o[a].call(this);this.awakeTimer(),this.onAwake&&this.onAwake()}else{for(i in n)r=n[i],t.off(i,r.handler,this);this.sleepTimer(),this.onSleep&&this.onSleep()}},i.prototype.checkInterest=function(){if(!this.interestChecked){var t=this._awakeCallers;t||(this._awakeCallers=t=[]);var e=this._interests;for(var i in e){var r=e[i];r.trigger&&t.pushOnce(r.handler)}this.interestChecked=!0}},i}(t.FHost);t.ViewController=i,__reflect(i.prototype,"jy.ViewController"),t.d_interest=e}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._scrollType=0,t.globalspeed=1,t.minEndSpeed=.08,t.blockSpeed=.98,t._moveSpeed=0,t._deriction=0,t._key="y",t._sizeKey="height",t._measureKey="measuredHeight",t}return __extends(i,e),Object.defineProperty(i.prototype,"scrollType",{get:function(){return this._scrollType},set:function(t){if(this._scrollType!=t){this._scrollType=t;var e=void 0,i=void 0,r=void 0;0==t?(e="y",i="height",r="measuredHeight"):(e="x",i="width",r="measuredWidth"),this._sizeKey=i,this._key=e,this._measureKey=r,this.checkScrollBarView()}},enumerable:!0,configurable:!0}),i.prototype.checkScrollBarView=function(){var t=this._content;if(t){var e=this._scrollbar;if(e){var i=this,r=i._key,n=i._sizeKey,o=i._scrollType;e.scrollType=o;var a=t.scrollRect;e.bgSize=a[n],e[r]=t[r]}}},i.prototype.onScrollBarAdded=function(){this._scrollbar.alpha=~~this.alwaysShowBar},i.prototype.bindObj=function(e,i,r){e.scrollRect=i;var n=this._content;n!=e&&(n&&(n.off("enterFrame",this.onRender,this),n.off(-1999,this.onResize,this),t.looseDrag(n),this.drag=void 0,n.off(-1090,this.onDragStart,this),n.off(-1089,this.onDragMove,this),n.off(-1088,this.onDragEnd,this)),this._content=e,e&&(this.drag=t.bindDrag(e),e.on(-1090,this.onDragStart,this),e.on(-1999,this.onResize,this)),"scroller"in e&&(e.scroller=this)),r?(this._scrollbar=r,this._useScrollBar=!0,this.checkScrollBarView(),this.scaleBar(),r.stage?this.onScrollBarAdded():r.on("addedToStage",this.onScrollBarAdded,this)):this._useScrollBar=!1,this.scrollToHead()},i.prototype.drawTouchArea=function(e){if(e=e||this._content){var i=e.graphics;if(i){i.clear(),i.beginFill(0,0);var r=t.Temp.EgretRectangle;e.getBounds(r),i.drawRectangle(r),i.endFill()}}},i.prototype.bindObj2=function(t,e,i){t.x=e.x,t.y=e.y,e.x=0,e.y=0,this.bindObj(t,e,i)},i.prototype.onResize=function(){this._useScrollBar&&this.scaleBar()},i.prototype.onDragStart=function(e){var i=this._content;i&&(i[this._measureKey]<i.scrollRect[this._sizeKey]||(this._lastTargetPos=this._startPos=this.getDragPos(e),this._lastMoveTime=t.Global.now,this.showBar(),i.on(-1089,this.onDragMove,this),i.on(-1088,this.onDragEnd,this),this.dispatch(-1051)))},i.prototype.stopDrag=function(){var e=this._content;e&&(t.stopDrag(e),e.off(-1089,this.onDragMove,this),e.off(-1088,this.onDragEnd,this))},i.prototype.getDragPos=function(t){return 0==this._scrollType?t.stageY:t.stageX},i.prototype.onDragMove=function(e){var i=this.getDragPos(e),r=i-this._lastTargetPos;this._deriction=r>0?1:-1,r=Math.abs(r);var n=t.Global.now,o=n-this._lastMoveTime;this._lastMoveTime=n,this._lastTargetPos=i,this._moveSpeed=o>0?r/o:0,r=r*this.globalspeed*this._deriction,this.doScrollContent(r)},i.prototype.stopTouchTween=function(){this._moveSpeed=0,this._content.off("enterFrame",this.onRender,this)},i.prototype.onRender=function(){var e=this._content;if(e){if(0==this._moveSpeed)return e.off("enterFrame",this.onRender,this),void this.hideBar();var i=t.Global.now,r=i-this._lastFrameTime,n=this._moveSpeed,o=n*this._deriction*r*this.globalspeed;this.doScrollContent(o),this._lastFrameTime=i,n*=this.blockSpeed,n<this.minEndSpeed&&(n=0),this._moveSpeed=n}},i.prototype.onDragEnd=function(e){var i=this._content;if(i){var r=this.getDragPos(e),n=t.Global.now;n-this._lastMoveTime<150?(i.on("enterFrame",this.onRender,this),this._lastFrameTime=this._lastMoveTime):this.hideBar(),this.stopDrag(),this.dispatch(-1050,r-this._startPos)}},i.prototype.showBar=function(){this._useScrollBar&&!this.alwaysShowBar&&t.Global.getTween(this._scrollbar,null,null,!0).to({alpha:1},500)},i.prototype.hideBar=function(){this._useScrollBar&&!this.alwaysShowBar&&t.Global.getTween(this._scrollbar,null,null,!0).to({alpha:0},1e3)},i.prototype.doScrollContent=function(t){var e=this._content;if(e){var i=e.scrollRect,r=this._key,n=i[r],o=n,a=this.scrollEndPos;o-=t;var s=this._moveSpeed;0>o?(o=0,s=0):o>a&&(o=a,s=0),this._moveSpeed=s,n!=o&&(i[r]=o,e.scrollRect=i,e.dispatch(-1051)),this.doMoveScrollBar(t)}},i.prototype.doMoveScrollBar=function(t){var e=this._scrollbar;if(e){var i=e.bar,r=t/this._piexlDistance,n=this._key,o=i[n]-r;if(0>=o)o=0;else{var a=e.bgSize-e.barSize;o>=a&&(o=a)}i[n]=o}},i.prototype.scrollTo=function(t){if(0>=t)this.scrollToHead();else if(t>=this.scrollEndPos)this.scrollToEnd();else{var e=this._content.scrollRect[this._key];this.doScrollContent(t-e)}},i.prototype.scrollToHead=function(){var t=this._content;if(t){this._moveSpeed>0&&(this._moveSpeed=0,t.off("enterFrame",this.onRender,this));var e,i=t.scrollRect,r=this._scrollbar;r&&(e=r.bar);var n=this._key;i[n]=0,e&&(e[n]=0),t.scrollRect=i}},i.prototype.scrollToEnd=function(){var t=this._content;if(t){var e,i,r=t.scrollRect,n=this.scrollEndPos,o=this._scrollbar;o&&(i=o.bgSize-o.barSize,e=o.bar);var a=this._key;r[a]=n,e&&(e[a]=i),t.scrollRect=r}},i.prototype.scaleBar=function(){var t=this._content;if(t){var e=t[this._measureKey],i=this._scrollbar,r=i.bgSize,n=r/e;n>=1&&(n=1),i.barSize=r*n,this._piexlDistance=e/r,this.checkAndResetBarPos()}},Object.defineProperty(i.prototype,"scrollEndPos",{get:function(){var t=this._content;if(!t)return 0;var e=t.scrollRect,i=t[this._measureKey],r=e[this._sizeKey];return i-r},enumerable:!0,configurable:!0}),i.prototype.checkAndResetBarPos=function(){var t=this._content.scrollRect,e=this._scrollbar,i=e.bar,r=this.scrollEndPos,n=this._key,o=t[n]/r;o=0>=o?0:e.bgSize*o-e.barSize,i[n]=o},i}(egret.EventDispatcher);t.Scroller=e,__reflect(e.prototype,"jy.Scroller")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._list=[],e._selectedIndex=-1,e._dataLen=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"dataLen",{get:function(){return this._dataLen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.doRender=function(t,e){var i,r=this._data;void 0==e&&(e=t);for(var n=t;e>=n;n++)if(i=this._get(n)){i.inited===!1&&(i.bindComponent&&i.bindComponent(),i.inited=!0);var o=i.data;(!o||o!=r[n]||i.dataChange)&&(i.data=r[n],i.handleView&&i.handleView(),i.dataChange&&(i.dataChange=!1))}},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(!(this._selectedIndex==t&&t>=0)){if(0>t){var e=this._selectedItem;return e&&(e.selected=!1,this._selectedItem=void 0),void(this._selectedIndex=t)}this.$setSelectedIndex(t)}},enumerable:!0,configurable:!0}),e.prototype.$setSelectedIndex=function(t){var e,i=this._list,r=i.length-1;t>r&&(t=r),e=this._list[t],this.changeRender(e,t)},Object.defineProperty(e.prototype,"selectedData",{get:function(){var t=this.selectedItem;return t&&t.data},enumerable:!0,configurable:!0}),e.prototype.getItemAt=function(t){return t>>>=0,this._list[t]},e.prototype.selectItemByData=function(t,e,i){var r=this;return void 0===i&&(i=!1),this.find(function(i,n,o){return i&&t in i&&i[t]==e?(r.selectedIndex=o,!0):void 0}),this},e.prototype.forEach=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=this._data,n=this._list,o=this._dataLen,a=0;o>a;a++){var s=r[a],h=n[a];t.apply(void 0,[s,h,a].concat(e))}return this},e.prototype.find=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=this._data,n=this._list,o=this._dataLen,a=0;o>a;a++){var s=r[a],h=n[a];if(t.apply(void 0,[s,h,a].concat(e)))return h}},Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._selectedItem},enumerable:!0,configurable:!0}),e.prototype.updateByKey=function(t,e,i){var r=this;this.find(function(n,o,a){return n&&t in n&&n[t]==e?(r.updateByIdx(a,void 0===i?n:i),!0):void 0})},e.prototype.onTouchItem=function(t){var e=t.target;this.changeRender(e)},e.prototype.changeRender=function(t,e){var i=this._selectedItem;i!=t&&(void 0==e&&(e=this._list.indexOf(t)),i&&(i.selected=!1),this._selectedItem=t,this._selectedIndex=e,t.selected=!0,this.onChange(),this.dispatch(-1052)),this.dispatch(-1001,t)},e.prototype.getAllItems=function(){return this._list},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._data;if(t)for(var e=t.length,i=0;e>i;i++)this.refreshAt(i);return this},e.prototype.refreshAt=function(t,e){var i=this._get(t);return(e||i.view.stage)&&(i.data=this._data[t],"function"==typeof i.handleView&&i.handleView(),i.dataChange&&(i.dataChange=!1)),this},e.prototype.onChange=function(){},e}(egret.EventDispatcher);t.AbsPageList=e,__reflect(e.prototype,"jy.AbsPageList")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._suiData=t,i}return __extends(i,e),i.prototype.parseSelfData=function(t){var e=this;"number"==typeof t&&(0>t&&(this.isjpg=!0),this._createT=function(){var i=new egret.Bitmap;return i.texture=e._suiData.getTexture(t),e.bindEvent(i),i})},i.prototype.bindEvent=function(t){t.on("addedToStage",this.awake,this),t.on("removedFromStage",this.sleep,this)},i.prototype.awake=function(t){var e=this._suiData;if(e){var i=t.currentTarget;e.checkRefreshBmp(i,this.isjpg)}},i.prototype.sleep=function(){var e=this._suiData;if(e){var i=this.isjpg?e.jpgbmd:e.pngbmd;i.using--,i.lastUseTime=t.Global.now}},i}(t.BaseCreator);t.BitmapCreator=e,__reflect(e.prototype,"jy.BitmapCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._label="",t.TouchDown.bind(i),i}return __extends(i,e),i.prototype.bindChildren=function(){this.txtLabel&&this.addChild(this.txtLabel),this.refresh(!0)},Object.defineProperty(i.prototype,"label",{get:function(){return this._label},set:function(t){this._label!=t&&this.$setLabel(t)},enumerable:!0,configurable:!0}),i.prototype.$setLabel=function(t){var e=this.txtLabel;e&&(e.setHtmlText(t),this._label=t)},i.prototype.$setEnabled=function(t){e.prototype.$setEnabled.call(this,t),this.refresh()},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&this.$setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelected=function(t){this._selected=t,this.refresh()},i.prototype.refresh=function(i){var r=this.$getBtnFrame(),n=this.bitmaps[r],o=this._currentBmp;n||(n=this.bitmaps[0]),o!=n&&(i=!0,t.removeDisplay(o),this._currentBmp=n),i&&(this.floor&&e.prototype.addChild.call(this,this.floor),n&&e.prototype.addChild.call(this,n),this.txtLabel&&e.prototype.addChild.call(this,this.txtLabel),this.ceil&&e.prototype.addChild.call(this,this.ceil),this._children&&e.prototype.addChild.call(this,this._children))},i.prototype.$getBtnFrame=function(){return+!this._enabled<<1|+this._selected},i.prototype.bindTouch=function(t,e,i,r){this.on("touchTap",t,e,r,i)},i.prototype.looseTouch=function(t,e,i){this.off("touchTap",t,e,i)},i.prototype.addChild=function(t){var e=this._children;return e||(this._children=e=new egret.DisplayObjectContainer,this.refresh(!0)),e.addChild(t),t},i.prototype.dispose=function(){e.prototype.dispose.call(this),t.TouchDown.loose(this)},i}(t.Component);t.Button=e,__reflect(e.prototype,"jy.Button",["jy.IButton","jy.Component","jy.ComponentWithEnable"]);var i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.parseSelfData=function(i){var r,n=this;i[0]&&(r=new t.TextFieldCreator,r.setBaseData(i[0][1]),r.parseSelfData(i[0][2]));for(var o=[],a=1;5>a;a++){var s=i[a];s&&(o[a-1]=s)}this._createT=function(){var t=new e;r&&(t.txtLabel=r.get());for(var a=[],s=0;4>s;s++)o[s]&&(a[s]=n.createElement(o[s]));a[1]||(a[1]=a[0]);var h=!1;return a[2]||(a[2]=a[0],h=!0),a[3]||(a[3]=a[2]),t.bitmaps=a,i[5]&&(t.floor=n.createElement(i[5]),h=!0),i[6]&&(t.ceil=n.createElement(i[6]),h=!0),t.useDisFilter=h,t}},r}(t.BaseCreator);t.ButtonCreator=i,__reflect(i.prototype,"jy.ButtonCreator")}(jy||(jy={}));var jy;!function(t){function e(t,e,i,r,n){var o,a=t,s=e,h=t/i,c=e/r,u=i,l=r;return c>h==!n?(o=h,s=h*r,l=r*e/s):(o=c,a=c*i,u=i*t/a),{dw:a,dh:s,scale:o,lw:u,lh:l}}var i=function(){function e(e,i){this.$layoutBins=new t.ArraySet,i=i||new egret.Sprite,this._host=i,this._basis=e,t.on(-1998,this.onResize,this),i.on("removedFromStage",this.offStage,this),i.on("addedToStage",this.onStage,this),i.stage&&this.onStage()}return e.prototype.resetBasis=function(t){this._basis=t},e.prototype.onStage=function(){this._host.stage.on("resize",this.onResize,this),this.onResize()},e.prototype.offStage=function(){egret.sys.$TempStage.off("resize",this.onResize,this)},Object.defineProperty(e.prototype,"view",{get:function(){return this._host},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){return t.$layoutHost=void 0,this.$layoutBins["delete"](t.hashCode)},e.prototype.addLayout=function(e,i,r,n,o,a,s,h){void 0===i&&(i=5);var c=this.$layoutBins;r=r||e;var u=e.hashCode;if(!c.get(u)){e.$layoutHost=this;var l={dis:e,type:i,hoffset:n,voffset:o,outerV:a,outerH:s,size:r};c.set(u,l),h?t.removeDisplay(e):this._host.addChild(e);var p=e.stage;p&&this.binLayout(l),e.on("addedToStage",this.onAdded,this)}},e.prototype.onAdded=function(t){var e=t.currentTarget,i=e.$layoutHost;if(i){var r=i.$layoutBins;if(r){var n=r.get(e.hashCode);n&&this.binLayout(n)}}},e.prototype.binLayout=function(e){var i=e.dis,r=e.type,n=e.hoffset,o=e.voffset,a=e.outerV,s=e.outerH,h=e.size,c=t.Temp.SharedPoint1;t.Layout.getLayoutPos(h.width,h.height,this._lw,this._lh,r,c,n,o,a,s),i.x=c.x,i.y=c.y},e.prototype.$doLayout=function(){t.Global.callLater(this.layoutAll,0,this)},e.prototype.layoutAll=function(){var t=this.$layoutBins;if(t)for(var e=t.rawList,i=0,r=e.length;r>i;)this.binLayout(e[i++])},e.MIN=Object.freeze({width:0,height:0}),e}();t.LayoutContainer=i,__reflect(i.prototype,"jy.LayoutContainer"),t.getFixedLayout=e}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return e.prototype.itemClick=function(){var e=this._data;if(e){var i=e.callBack;i&&i.call(t.Menu.currentShow,e)}},e.prototype.getSize=function(){return this._size},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this.$setData(t)},enumerable:!0,configurable:!0}),e.prototype.$setData=function(t){this._data=t},Object.defineProperty(e.prototype,"skin",{get:function(){return this._skin},set:function(t){t!=this._skin&&this.$setSkin(t)},enumerable:!0,configurable:!0}),e.prototype.$setSkin=function(t){this._skin=t,this._size=t.getBounds(),t.on("touchTap",this.itemClick,this),this.bindComponent()},e.prototype.bindComponent=function(){},Object.defineProperty(e.prototype,"view",{get:function(){return this._skin},enumerable:!0,configurable:!0}),e}();t.MenuBaseRender=e,__reflect(e.prototype,"jy.MenuBaseRender")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._list=[],t._selectedIndex=-1,t}return __extends(i,e),i.prototype.addItem=function(t){t&&(this._list.pushOnce(t),t.on("touchTap",this.touchHandler,this))},i.prototype.getAllItems=function(){return this._list},Object.defineProperty(i.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(t){return t>>>=0,this._list[t]},i.prototype.removeAt=function(t){t>>>=0;var e=this._list;if(t<e.length){var i=e[t];return this.removeItem(i),i}},i.prototype.touchHandler=function(t){this.$setSelectedItem(t.target)},i.prototype.removeItem=function(t){return t?(this._selectedItem==t&&this.$setSelectedItem(),this._list.remove(t),t.off("touchTap",this.touchHandler,this),t):void 0},i.prototype.addItems=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];this.addItem(e)}},Object.defineProperty(i.prototype,"selectedItem",{get:function(){return this._selectedItem},set:function(t){this.$setSelectedItem(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelectedItem=function(e){var i=this._selectedItem;if(i!=e){i&&(i.selected=!1);var r=-1;return e&&(r=this._list.indexOf(e),~r?e.selected=!0:(e=void 0,t.ThrowError("Group 设置的组件未添加到该组"))),this._selectedItem=e,this._selectedIndex=r,this.dispatch(-1020)}},Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this.$setSelectedIndex(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelectedIndex=function(t){if(this._selectedIndex!=t){var e=t>=0?this._list[t]:void 0;this.$setSelectedItem(e)}},i.prototype.clear=function(){for(var t=this._list,e=0;e<t.length;e++){var i=t[e];i.off("touchTap",this.touchHandler,this)}t.length=0,this._selectedIndex=-1},i.prototype.onRecycle=function(){this.clear()},i}(egret.EventDispatcher);t.Group=e,__reflect(e.prototype,"jy.Group")}(jy||(jy={}));var jy;!function(t){function e(t,e){var i=[],r=0;if(e)for(;r<e.length;r++)i[r]=e[r];var n=t.args;if(n)for(var o=0;o<n.length;o++)i[r++]=n[o];var a=t.callback;if(void 0!=a)try{return a.apply(t.thisObj,i)}catch(s){}else;}var i=function(){function i(){this.doRecycle=!0}return i.prototype.init=function(t,e,i){this.callback=t,this.args=i,this.thisObj=e},i.prototype.checkHandle=function(t,e){return this.callback===t&&this.thisObj==e},i.prototype.execute=function(t){var i=e(this);return void 0==t&&(t=this.doRecycle),t&&this.recycle(),i},i.prototype.call=function(){return e(this,arguments)},i.prototype.callAndRecycle=function(){var t=e(this,arguments);return this.recycle(),t},i.prototype.onRecycle=function(){this.callback=void 0,this.args=void 0,this.thisObj=void 0,this.doRecycle=!0},i.get=function(e,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=t.recyclable(i);return a.init(e,r,n),a},i.addToList=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];for(var o,a=0,s=t.length;s>a;a++)if(o=t[a],o.checkHandle(e,i))return o.args=r,o;return o=this.get.apply(this,[e,i].concat(r)),t.push(o),o},i.removeFromList=function(t,e,i){for(var r,n=-1,o=0,a=t.length;a>o;o++){var s=t[o];if(s.checkHandle(e,i)){n=o,r=s;break}}return r&&t.splice(n,1),r},i}();t.CallbackInfo=i,__reflect(i.prototype,"jy.CallbackInfo",["jy.IRecyclable"])}(jy||(jy={}));var jy;!function(t){function e(t,e){function i(){r.recycle(this)}var r;if(t.hasOwnProperty("_pool")&&(r=t._pool),!r){if(e)r=new n(function(){var e=new t;return e.recycle=i,e});else{r=new n(t);var o=t.prototype;o.hasOwnProperty("recycle")||(o.recycle=i)}Object.defineProperty(t,"_pool",{value:r})}return r.get()}function i(t){var e;return t.hasOwnProperty("_instance")&&(e=t._instance),e||(e=new t,Object.defineProperty(t,"_instance",{value:e})),e}var r=function(){function t(t,e){this._creator=t,this._props=e}return t.prototype.get=function(){var t=new this._creator,e=this._props;for(var i in e)t[i]=e[i];return t},t}();t.ClassFactory=r,__reflect(r.prototype,"jy.ClassFactory");var n=function(){function t(t,e){void 0===e&&(e=100),this._pool=[],this._max=e,this._creator=t}return t.prototype.get=function(){var t,e=this._pool;return t=e.length?e.pop():new this._creator,"function"==typeof t.onSpawn&&t.onSpawn(),t},t.prototype.recycle=function(t){var e=this._pool,i=e.indexOf(t);~i||("function"==typeof t.onRecycle&&t.onRecycle(),e.length<this._max&&e.push(t))},t}();t.RecyclablePool=n,__reflect(n.prototype,"jy.RecyclablePool");t.recyclable=e,e.recycleList=function(t,e){var i=e,r=t.length;if(r>e){for(;i<t.length;){var n=t[i++];n&&n.recycle()}t.length=e}},t.singleton=i}(jy||(jy={}));var jy;!function(t){function e(e,i){function r(e,i){for(var r=0;r<i.length;r+=2){var n=i[r];
i[r+1]?"function"==typeof e.dispatch&&e.dispatch(n):t.dispatch(n,e)}}return function(t,n){var o=t.getPropertyDescriptor(n);if(o&&!o.configurable)return!1;var a,s="$d_fire_e$"+n,h=t[s];if(h||(t[s]=h=[],a=!0),h.push(e,i),a){if(o&&o.set&&o.get){var c=o.set;o.set=function(t){this[n]!=t&&(c.call(this,t),r(this,h))}}else{if(o&&(o.get||o.set))return!1;var u="$d_fire_p$"+n;t[u]=o&&o.value,o={enumerable:!0,configurable:!0},o.get=function(){return this[u]},o.set=function(t){this[u]!=t&&(this[u]=t,r(this,h))}}Object.defineProperty(t,n,o)}}}function i(t,e,i){var r=null,n=null;if("function"==typeof i.value?(r="value",n=i.value):"function"==typeof i.get&&(r="get",n=i.get),!n)throw new Error("not supported");var o="$memoize$"+e;i[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,t)}),this[o]}}t.d_fire=e,t.d_memoize=i}(jy||(jy={}));var jy;!function(t){function e(t){return 0!==t&&0===(t&t-1)}function i(t){var i=t(33902),r=i[0],n=i[1],o=("Win32"===navigator.platform||"Win64"===navigator.platform)&&"Internet Explorer"!==t(7937)&&"Microsoft Edge"!==t(7937)&&0===r&&1===n;return o?e(t(36347))&&e(t(36349))?2:1:0}function r(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var i=t.getParameter(34047);return 0===i&&(i=2),i}}function n(t){var e=1,i=t.getExtension("WEBGL_draw_buffers");return null!=i&&(e=t.getParameter(34852)),e}function o(t){if(!t){var e=document.createElement("canvas"),o={stencil:!0,failIfMajorPerformanceCaveat:!0};t=e.getContext("webgl",o)||e.getContext("experimental-webgl",o)}if(t){var a,s,h=t.getParameter.bind(t),c=t.getExtension("WEBGL_debug_renderer_info");return c&&(s=h(37445),a=h(37446)),{unmaskedRenderer:a,unmaskedVendor:s,version:h(7938),shaderVersion:h(35724),vendor:h(7936),renderer:h(7937),antialias:t.getContextAttributes().antialias,angle:i(h),maxVertAttr:h(34921),maxVertTextureCount:h(35660),maxVertUniforms:h(36347),maxVaryings:h(36348),aliasedLineWidth:h(33902),aliasedPointSize:h(33901),maxFragUniform:h(36349),maxTextureCount:h(34930),maxTextureSize:h(3379),maxCubeMapTextureSize:h(34076),maxCombinedTextureCount:h(35661),maxAnisotropy:r(t),maxDrawBuffers:n(t),redBits:h(3410),greenBits:h(3411),blueBits:h(3412),alphaBits:h(3413),depthBits:h(3414),stencilBits:h(3415),maxRenderBufferSize:h(34024),maxViewportSize:h(3386)}}}t.getWebGLCaps=o}(jy||(jy={}));var jy;!function(t){function e(t,e){return t+"/"+e}function i(t,e){if(!e||/^((http|https):)?\/\//.test(t))return t;t=e.tPath+t;var i=e.iPrefix?"":s(t);return i+t}function r(t){return~~(t&&c&&c[t.hash()])}function n(t,e){if(e){if("string"==typeof t)return o(t,e);if("object"==typeof t)for(var i in t)t[i]=n(t[i],e)}return t}function o(t,e){return t.replace(/[$][{]([^{}]+)[}]/g,function(t,i){var r=e[i];return void 0!==r?""+r:t})}var a,s,h,c={},u={},l={};t.ConfigUtils={replace:function(t){var e=t.replacer;return e&&Object.keys(t).forEach(function(i){if("replacer"!=i){var r=t[i];t[i]=n(r,e)}}),t},setData:function(t){function e(t,i){var r=t.parent;if(r){var n=i[r];if(n)return e(n,i)+t.path}return t.path}a=t,!a.params&&(a.params={});var i=a.paths;for(var r in i){var n=i[r];n.tPath=e(n,i)}h=a.paths.res,s=function(t){var e=0;switch(t&&(e=t.length),e){case 0:return function(t){return""};case 1:var i=t[0];return function(t){return i};default:return function(i){var r=i.hash()%e;return t[r]||""}}}(a.prefixes)},parseHash:function(e){var i=new DataView(e),r=0,n=i.byteLength;for(c={};n>r;){var o=i.getUint32(r);r+=4;var a=i.getUint16(r);r+=2,c[o]=a}t.dispatch(-188)},setHash:function(t){c=t},getResVer:r,getResUrl:function(t){if(t){var e=l[t];if(!e){var n=r(t);n&&(t=-1==t.indexOf("?")?t+"?"+n:t+"&jyver="+n),e=i(t,h),l[t]=e}return e}},getParam:function(t){return a.params[t]},getSkinPath:e,getSkinFile:function(t,r){return i(e(t,r),u[t]||a.paths.skin)},regSkinPath:function(t,e,i){u[t]={tPath:e,path:e,iPrefix:i}},getUrl:function(t,e){var r=a.paths[e];return r?i(t,r):void 0}}}(jy||(jy={}));var $DD={},$DE={},jy;!function(t){function e(e,n,o,a){void 0===o&&(o="id"),i(e,function(i){var h;if(i){for(var c,u,l,p=i[0],f=0;f<p.length;f++){var d=p[f];2==(2&d[2])&&(l=1)}h=s(o,a),a=h[0],c=h[1],u=h[2];try{for(var y=n||Object,v=1;v<i.length;v++){for(var g=i[v],_=new y,m=l&&{},f=0;f<p.length;f++){var d=p[f],b=d[0],w=d[1],j=d[2],x=d[3],S=r(g[f],w,x);2==(2&j)?m[b]=S:_[b]=S}u(_,v-1,e,c,o),"function"==typeof _.decode&&_.decode(m)}1==a&&(c=(new t.ArraySet).setRawList(c,o))}catch(T){}return c}})}function i(t,e){c[t]=e,u.push(t)}function r(e,i,r){switch(i){case 0:null==e&&(e=r);break;case 1:(0===e||null==e)&&(e=r||"");break;case 2:case 9:(""===e||null==e)&&(e=+r||0);break;case 3:null==e&&(e=r),e=!!e;break;case 4:case 5:0===e&&(e=void 0),!e&&r&&(e=r);break;case 6:case 8:e=new Date(1e4*(e||r||0));break;case 7:e=(new t.TimeVO).decodeBit(e||r||0)}return e}function n(t,e,i,r){r.push(t)}function o(t,e,i,r,n){if(n in t){var o=t[n];r[o]=t}}function a(t){for(var e={};t.readAvailable;){var i=t.readUnsignedByte(),r=t.readUTFBytes(i),n=t.readUnsignedByte(),o=void 0;switch(i=t.readVarint(),n){case 0:var a=t.readUTFBytes(i);o=JSON.parse(a);break;case 1:o=t.readByteArray(i)}e[r]=o}return e}function s(t,e){void 0===t&&(t="id");var i,r;switch(""==t||0==t?e=2:e||(e=3),e){case 2:case 1:i=[],r=n;break;case 3:i={},r=o}return[e,i,r]}function h(e,n,o,a){void 0===o&&(o="id"),i(e,function(i){var h;if(i){var c,u;h=s(o,a),a=h[0],c=h[1],u=h[2];try{for(var f={},d=[],y=0,v=i.readVarint(),g=void 0;i.readAvailable&&v--;){var _=i.readVarint(),m=p.readFrom(l,i,_),b=m[0],w=m[1],j=m[2],x=m[3],S=m[4],T=m[5],C=void 0,D=0,k=void 0;switch(w){case 0:case 1:C=T,k=9;break;case 2:C=S,k=1;break;case 3:case 9:case 6:case 7:case 8:C=x,k=17;break;case 4:case 5:T&&(C=JSON.parse(T)),k=9,D=1}f[y+1]=[b,1,k,C],m.length=5,m[3]=C,m[4]=D,d[y++]=m,2==(2&j)&&(g=1)}p.initDefault(f,n);var R=y;for(y=0,v=i.readVarint();i.readAvailable&&v--;){var _=i.readVarint(),B=p.readFrom(f,i,_);if(B){for(var P=g&&{},M=0;R>M;M++){var m=d[M],O=m[0],I=m[1],A=m[2],C=m[3],D=m[4],L=B[O];L&&D&&(L=JSON.parse(L));var E=r(L,I,C);2==(2&A)?P[O]=E:B[O]=E}u(B,y++,e,c,o),"function"==typeof B.decode&&B.decode(P)}}1==a&&(c=(new t.ArraySet).setRawList(c,o))}catch(F){}return c}})}var c={},u=[];t.DataLocator={regParser:i,parsePakedDatas:function(e){var i=t.Res.get("cfgs");t.Res.remove("cfgs"),1==e&&(i=a(new t.ByteArray(i)));for(var n=0,o=u;n<o.length;n++){var s=o[n],h=c[s],l=h(i[s]);l&&($DD[s]=l,t.dispatch(-185,s))}var p=$DE;for(var s in i)if("$"==s.charAt(0)){var f=i[s];if(s=s.substr(1),f){for(var d=0,y=f.length,l={};y>d;){var v=f[d++],g=f[d++],_=f[d];"number"==typeof _&&(d++,g=r(g,_)),l[v]=g}p[s]=l}}c=null,u=null,delete t.DataLocator},regCommonParser:e,regBytesParser:h};var l={1:[0,2,9],2:[1,2,14],3:[2,1,14],4:[3,1,17],5:[4,1,1],6:[5,1,9]},p=t.getPBUtils();p.initDefault(l)}(jy||(jy={}));var jy;!function(t){function e(t){return"boolean"==typeof t?t?1:0:t==+t&&t.length==(+t+"").length?+t:t}function i(t,e,i){i=i||{};for(var r=0,n=e.length;n>r;r++){var o=e[r],a=t[r];void 0!=a&&(i[o]=t[r])}return i}function r(t,e,i){for(var r=0,n=i.length;n>r;r++){var o=i[r];t[o]=e[r]}}function n(t){return{x:t[0],y:t[1]}}t.DataUtils={parseDatas:function(t,e,i,r,n,o){for(var a=[],s=i,h=0;r>=s;s++){var c=n+s;c in e&&(a[h++]=e[c])}t[o]=a},parseDatas2:function(t,e,i,r,n,o,a){for(var s=[],h=r,c=0;n>=h;h++){var u=o+h,l=i.indexOf(u);~l&&(s[c++]=e[l])}t[a]=s},getData:i,getDataList:function(t,e){var r=[];if(t)for(var n=0,o=t.length;o>n;n++){var a=t[n];r.push(i(a,e))}return r},parseDataList:function(t,e,r,n){for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];if(t)for(var s=0,h=t.length;h>s;s++){var c=t[s],u=i(c,e);r.call(n,u,o,s)}},copyData:r,copyDataList:function(t,e,i,n,o){for(var a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];if(e)for(var h=0,c=e.length;c>h;h++){var u=e[h],l=new t;r(l,u,i),n.call(o,l,a,h)}},parseXAttr2:function(t,e,i,r,n){void 0===i&&(i="pro"),void 0===r&&(r="provalue"),void 0===n&&(n=!0);var o=new RegExp("^"+i+"(\\d+)$"),a=0;for(var s in t){var h=o.exec(s);if(h){var c=+h[1]||0,u=r+c,l=+t[u];l>0&&(a++,e[t[s]]=l),n&&(delete t[s],delete t[u])}}return a},parseXAttr:function(t,e,i,r){void 0===i&&(i=!0),void 0===r&&(r=/^x\d+$/);var n=0;for(var o in t)if(r.test(o)){var a=+t[o];a>0&&(n++,e[o]=a),i&&delete t[o]}return n},getZuobiaos:function(t,e){e=e||[];for(var i=0;i<t.length;i++)e.push(n(t[i]))},getArray2D:function(t){if(Array.isArray(t))return t;if(""!=t.trim()){var i=t.split("|");return i.forEach(function(t,r){var n=t.split(":");i[r]=n,n.forEach(function(t,i){n[i]=e(t)})}),i}},getArray:function(t){if(Array.isArray(t))return t;if(t+="",""!=t.trim()){var i=t.split(/[:|]/g);return i.forEach(function(t,r){i[r]=e(t)}),i}}}}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._state=0,i._success=0,i._cerror=0,i._error=0,t.NetService._ins=i,i._unsendRequest=[],i._sendingList=[],i._loader=new XMLHttpRequest,i}return __extends(i,e),i.prototype.setUrl=function(e,i){void 0===i&&(i=5e3),this._actionUrl=e,i!=this._autoTimeDelay&&(this._autoTimeDelay=i),t.TimerUtil.addCallback(200,this.checkUnsend,this);var r=this._loader;r.onreadystatechange=this.onReadyStateChange.bind(this),r.ontimeout=this.errorHandler.bind(this)},i.prototype.onReadyStateChange=function(){var t=this._loader;if(4==t.readyState){var e=t.status>=400||0==t.status,i=this;setTimeout(function(){e?i.errorHandler():i.complete()},0)}},i.prototype.errorHandler=function(){if(this._error++,this._cerror++,this._state=-1,this._cerror>1)return void this.showReconnect();for(var t=this._sendingList,e=t.length,i=this._unsendRequest,r=0,n=i;r<n.length;r++){var o=n[r];t[e++]=o}i.length=0,this._unsendRequest=t,this._sendingList=i,this.checkUnsend()},i.prototype.complete=function(){this._state=2,this._reconCount=0;var t=this._readBuffer;t.replaceBuffer(this._loader.response),t.position=0,this._cerror=0,this._success++;for(var e=0,i=this._sendingList;e<i.length;e++){var r=i[e];r.recycle()}this._sendingList.length=0,this.onBeforeSolveData(),this.decodeBytes(t),this.checkUnsend()},i.prototype.checkUnsend=function(){(this._unsendRequest.length||t.Global.now>this._nextAutoTime)&&this.trySend()},i.prototype._send=function(e,i,r){var n=t.recyclable(t.NetData);n.cmd=e,n.data=i,n.msgType=r,this._unsendRequest.push(n),this.trySend()},i.prototype.onBeforeSend=function(){},i.prototype.onBeforeSolveData=function(){},i.prototype.trySend=function(){if(1!=this._state){this._state=1;var e=this._loader;e.open("POST",this._actionUrl,!0),e.responseType="arraybuffer",this.onBeforeSend();var i=this._sendBuffer;i.reset();for(var r=this._unsendRequest,n=this._sendingList,o=0,a=r.length;a>o;o++){var s=r[o];this.writeToBuffer(i,s),n[o]=s}for(var h=this._pcmdList,c=0,u=h;c<u.length;c++){var s=u[c];this.writeToBuffer(i,s),n[o++]=s}h.length=0,r.length=0,e.send(i.outBytes),this._nextAutoTime=t.Global.now+this._autoTimeDelay}},i}(t.NetService);t.HttpNetService=e,__reflect(e.prototype,"jy.HttpNetService")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){}return t.prototype.onRecycle=function(){this.data=void 0,this.msgType=void 0},t}();t.NetSendData=e,__reflect(e.prototype,"jy.NetSendData",["jy.IRecyclable"]);var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(e);t.NetData=i,__reflect(i.prototype,"jy.NetData")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.dispatchList=[],this._listenerMaps={}}return e.prototype.register=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var n=this._listenerMaps,o={handler:e,priority:i,once:r},a=n[t];if(a){var s=void 0,h=a.length;for(s=0;h>s;s++){var c=a[s];if(c.handler==e){if(c.priority==i)return!1;a.splice(s,1),h--;break}}for(s=0;h>s;s++)if(i>a[s].priority)return a.splice(s,0,o),!0;a[h]=o}else a=[],n[t]=a,a.push(o);return!0},e.prototype.remove=function(t,e){var i=this._listenerMaps,r=i[t];if(!r)return!1;for(var n=r.length,o=0;n>o;o++)if(r[o].handler==e)return r.splice(o,1),1==n&&delete i[t],!0;return!1},e.prototype.dispatch=function(t){egret.callLater(this._dispatch,this,t)},e.prototype._dispatch=function(e){var i=e.cmd,r=this._listenerMaps[i];if(r){for(var n=this.dispatchList,o=0,a=r.length;a>o;o++)n[o]=r[o];for(var s,h,s=0;o>s;s++){var h=n[s];try{h.handler(e)}catch(c){t.ThrowError("NetHander Error:"+JSON.stringify(e),c)}if(h.once&&this.remove(i,h.handler),e.stopPropagation)break}e.recycle()}},e}();t.NetRouter=e,__reflect(e.prototype,"jy.NetRouter")}(jy||(jy={}));var jy;!function(t){function e(e,i,r){var n=this._ws;if(n&&n.readyState==WebSocket.OPEN){var o=this,a=o._pcmdList,s=o._sendBuffer,h=t.recyclable(t.NetSendData);h.cmd=e,h.data=i,h.msgType=r,s.reset(),this.writeToBuffer(s,h),h.recycle();for(var c=0,u=a;c<u.length;c++){var l=u[c];this.writeToBuffer(s,l),l.recycle()}a.length=0,n.send(s.outBytes)}}function i(e,i,r){var n=this._ws;if(n&&n.readyState==WebSocket.OPEN){var o=this,a=o._pcmdList,s=o._sendBuffer,h=t.recyclable(t.NetSendData);h.cmd=e,h.data=i,h.msgType=r,s.reset(),this.writeToBuffer(s,h),h.recycle(),n.send(s.outBytes);for(var c=0,u=a;c<u.length;c++){var l=u[c];s.reset(),this.writeToBuffer(s,l),l.recycle(),n.send(s.outBytes)}a.length=0}}function r(t){var e=this._readBuffer;e.replaceBuffer(t.data),e.position=0,this.decodeBytes(e)}function n(t){var e,i=this._readBuffer,r=new Uint8Array(t.data),n=i.position,o=i.buffer,a=o.byteLength;if(a>n){var s=new Uint8Array(o),h=a-n,c=r.length;e=new Uint8Array(h+c);var u=0,l=void 0;for(l=0;h>l;l++)e[u++]=s[n+l];for(l=0;c>l;l++)e[u++]=r[l]}else e=r;i.replaceBuffer(e.buffer),i.position=0,this.decodeBytes(i)}function o(t){t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null}var a=function(a){function s(){var e=a.call(this)||this;return e.onOpen=function(){var i=e._ws;i&&(i.onopen=null),t.dispatch(-197)},e.onError=function(e){t.dispatch(-196)},e.onClose=function(e){t.Global.nextTick(t.dispatch,t,-195)},t.NetService._ins=e,e}return __extends(s,a),s.prototype.setDataMode=function(t){this.dataMode!=t&&(this.dataMode=t,this.checkDataMode())},s.prototype.checkDataMode=function(){var t=this._ws;if(t){var o=~~this.dataMode;t.onmessage=1==(1&o)?n.bind(this):r.bind(this),this.$send=2==(2&o)?i:e}},Object.defineProperty(s.prototype,"connected",{get:function(){var t=this._ws;return t&&t.readyState==WebSocket.OPEN},enumerable:!0,configurable:!0}),s.prototype.setUrl=function(t){if(this._actionUrl!=t){this._actionUrl=t;var e=this._ws;e&&e.readyState<=WebSocket.OPEN&&this.connect()}},s.prototype.connect=function(){var t=this._ws;t&&o(t),this._ws=t=new WebSocket(this._actionUrl),t.binaryType="arraybuffer",t.onclose=this.onClose,t.onerror=this.onError,t.onopen=this.onOpen,this.checkDataMode()},s.prototype._send=function(t,e,i){this.$send(t,e,i)},s.prototype.disconnect=function(){var t=this._ws;t&&t.readyState==WebSocket.OPEN&&(o(t),this._ws=null,t.close())},s}(t.NetService);t.WSNetService=a,__reflect(a.prototype,"jy.WSNetService")}(jy||(jy={}));var jy;!function(t){var e;!function(e){function i(t){var e=1e3*~~t;0>=e&&(e=1e4),P=e}function r(t){M=t}function n(t){O=t}function o(t,e){var i=t.state;return t.removed||(i="complete"==e.type?2:-1),t.state=i,i}function a(t,e,i,r){e.on("complete",t.onLoadFinish,t),e.on("ioError",t.onLoadFinish,t),e.item=i,e.resCB=r}function s(t,e){e.off("complete",t.onLoadFinish,t),e.off("ioError",t.onLoadFinish,t),e.item=void 0,e.resCB=void 0,e.recycle&&e.recycle()}function h(t){if(t){var e=t.lastIndexOf("?");-1==e&&(e=void 0);var i=t.substring(t.lastIndexOf("."),e);return i.toLocaleLowerCase()}}function c(t,e){I[t]=e}function u(t,e){z[t]=e}function l(t){var e=h(t);return~~I[e]}function p(t,e,i,r){void 0===e&&(e=1);var n=$[t];if(n)return r&&r.appendTo(n.list),n;r=r||[],i=~~i;var o={id:t,list:r,priority:i,type:e};return $[t]=o,o}function f(t,e){void 0===e&&(e=0);var i=t.uri,r=U[i];if(G[1]=!1,r){if(r!=t&&r.url!=t.url);else{var n=r.state;if(n>=1)return G[0]=r,G}t=r}else U[i]=t;G[0]=t;var o=t.qid;if(o!=e){var a=$[o];a&&a.list.remove(t),t.qid=e;var s=p(e);s.list.pushOnce(t),G[1]=!0}return G}function d(e,i,r,n){void 0===n&&(n=0);var o=U[e];o||(i||(i=t.ConfigUtils.getResUrl(e)),o={uri:e,url:i,type:l(i)}),j(o,r,n)}function y(e,i,r){void 0===r&&(r=0);var n=e.length,o=i.group;i.current=0,i.total=n,i.list=e;for(var a=0;n>a;a++){var s=e[a];s.group=o,j(s,t.CallbackInfo.get(v,null,i),r)}}function v(t,e){var i=e.callback;if(i){var r=e.group;if(t.group==r){var n=e.onProgress,o=void 0,a=void 0;if(-1==t.state?(o=!0,a=!1):(e.current++,n&&n.call(t),e.current>=e.total&&(o=!0,a=!0)),o){e.callback=void 0,e.onProgress=void 0,i.callAndRecycle(a),n&&n.recycle();var s=e.list;!a&&s&&s.forEach(b)}}}}function g(t){var e=U[t];return e&&2==e.state?e.data:void 0}function _(t,e){return U[t]?void 0:(U[t]=e,!0)}function m(t){var e=U[t];b(e)}function b(t){if(t){delete U[t.uri];var e=t.qid,i=$[e];i&&i.list.remove(t),t.removed=!0}}function w(t){var e=U[t];if(e&&0==e.state){var i=e.qid,r=$[i];r&&r.list.remove(e),T(e)}}function j(e,i,r){void 0===r&&(r=0),e=f(e,r)[0];var n=e.state;if(2==n||-1==n&&e.retry>M&&t.Global.now<~~e.ft)return i&&t.Global.nextTick(i.callAndRecycle,i,e);if(e.removed=!1,i){var o=e.callbacks;o||(e.callbacks=o=[]),o.push(i)}return S()}function x(){var t,e,i=-(1/0);for(var r in $){var n=$[r];if(n.list.length){var o=n.priority;o>i&&(i=o,e=n)}}if(e){var a=e.list;switch(e.type){case 1:t=a.shift();break;case 0:t=a.pop()}}return t||H.length>0&&(t=H.shift()),t}function S(){for(;V.length<O;){var e=x();if(!e)break;V.pushOnce(e);var i=~~e.state;switch(-1==i&&e.ft<t.Global.now&&(i=0),i){case-1:case 2:C(e);break;case 0:var r=e.type;void 0==r&&(r=l(e.url));var n=z[r];n||(n=F),e.state=1,n.loadFile(e,t.CallbackInfo.get(C))}}}function T(t){var e=t.callbacks;if(e){t.callbacks=void 0;for(var i=0;i<e.length;i++){var r=e[i];r.callAndRecycle(t)}}}function C(e){V.remove(e),e.qid=void 0;var i=~~e.state;if(-1==i){var r=e.retry||1;if(r>M){var n=t.Global.now,o=~~e.ft;return n>o&&(e.ft=P*(r-M)+n),T(e),t.dispatch(-187,e)}e.retry=r+1,e.state=0,H.push(e)}else 2==i&&(e.retry=0,T(e),t.dispatch(-186,e));return S()}function D(e,i,r){function n(t,n){try{var o=indexedDB.open(r,e)}catch(s){return n&&n(s)}o.onerror=function(t){n&&n(t.error),a(t)},o.onupgradeneeded=function(t){var e=t.target.result,n=e.objectStoreNames;n.contains(r)||e.createObjectStore(r,{keyPath:i})},o.onsuccess=function(e){var i=o.result;i.onerror=a,t(i)}}function o(t,e){return t.transaction([r],e).objectStore(r)}function a(e){t.ThrowError("indexedDB error",e.error)}var s=window;if(s.indexedDB=s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,s.indexedDB){s.IDBTransaction=s.IDBTransaction||s.webkitIDBTransaction||s.msIDBTransaction,s.IDBKeyRange=s.IDBKeyRange||s.webkitIDBKeyRange||s.msIDBKeyRange;try{indexedDB.open(r,e)}catch(h){return}var c="readwrite",u="readonly";return{save:function(t,e){n(function(i){try{var r=o(i,c),n=t.uri?r.put(t):r.add(t);e&&(n.onsuccess=e,n.onerror=e)}catch(a){return e&&e(a)}},function(t){e&&e(t)})},get:function(t,e){n(function(i){try{var r=o(i,u),n=r.get(t);n.onsuccess=function(i){e(i.target.result,t)},n.onerror=function(){e(null,t)}}catch(a){e(null,t)}},function(i){e(null,t)})},"delete":function(t,e){n(function(i){try{var r=o(i,c),n=r["delete"](t);e&&(n.onerror=n.onsuccess=function(i){e(t,i)})}catch(a){return e&&e(t,a)}},function(i){e&&e(t,i)})},clear:function(t){n(function(e){try{var i=o(e,c),r=i.clear();t&&(r.onsuccess=t,r.onerror=t)}catch(n){return t(n)}},t)}}}}function k(e,i,r){function n(e,i){e.local=!0;var r=e.uri,n={data:i,version:t.ConfigUtils.getResVer(r),uri:r,url:e.url};a.save(n)}if(void 0===e&&(e=1),void 0===i&&(i="uri"),void 0===r&&(r="res"),"web"==egret.Capabilities.runtimeType){var a=D(e,i,r);if(a){var h=window;h.URL=window.URL||h.webkitURL;var c="iOS"==egret.Capabilities.os?!1:!(!window.Blob||!window.URL),u=document.createElement("canvas"),l=u.getContext("2d"),p=A.prototype,f=p.loadFile;p.loadFile=function(e,i){var r=this;return e.noLocal?void f.call(this,e,i):a.get(e.uri,function(n){if(n){var o=n.data;if(o){var a=t.ConfigUtils.getResVer(n.uri);if(a==n.version)return e.data=o,e.state=2,e.local=!0,i.call(e)}}f.call(r,e,i)})},p.onLoadFinish=function(t){var e=t.target,i=e.item,r=e.resCB,a=e.response;s(this,e);var h,c=o(i,t);2==c&&(h=a);var u=i.uri;h&&!i.local&&u&&n(i,h),i.data=h,r.callAndRecycle(i)};var d=egret.web;if(d){var y=d.WebImageLoader.prototype,v=y.onBlobLoaded;y.onBlobLoaded=function(t){this.blob=this.request.response,v.call(this,t)}}var g=L.prototype,_=g.loadFile;return g.loadFile=function(e,i){var r=this,n=e.uri,o=e.url,s=e.noLocal;s?_.call(this,e,i):a.get(n,function(a){if(a){var s=t.ConfigUtils.getResVer(n);if(s==a.version){var h=a.data;h instanceof Blob?o=URL.createObjectURL(h):"string"==typeof h&&(o=h),e.local=!0}}e.url=o,_.call(r,e,i)})},g.onLoadFinish=function(t){var e=t.target,i=e.item,r=e.resCB,a=e.blob,h=e.data;e.blob=void 0,s(this,e);i.uri;if(!i.local){i.local=!0;var p=i.url,f=a;if(!f&&h instanceof egret.BitmapData){var d=h.source;if(!d)return;var y=d.width,v=d.height,g="image/"+p.substring(p.lastIndexOf(".")+1);u.width=y,u.height=v,l.clearRect(0,0,y,v),l.drawImage(d,0,0);try{c&&0!=p.indexOf("wxLocalResource:")?u.toBlob(function(t){n(i,t)},g):f=u.toDataURL(g)}catch(_){}}if(f)if(c||"string"==typeof f)n(i,f);else{var m=new FileReader;m.onload=function(t){n(i,this.result)},m.readAsDataURL(f)}}var b=o(i,t);if(2==b){var w=new egret.Texture;w._setBitmapData(h),i.data=w}r.callAndRecycle(i)},a}}}var R,B,P=1e4;e.setFailedExpired=i;var M=3;e.setMaxRetry=r;var O=6;e.setMaxThread=n;var I=(R={},R[".jpg"]=2,R[".png"]=2,R[".webp"]=2,R[".json"]=3,R[".bin"]=0,R[".mp3"]=4,R),A=function(){function e(t){void 0===t&&(t="arraybuffer"),this.type=t}return e.prototype.loadFile=function(e,i){var r=t.recyclable(egret.HttpRequest);a(this,r,e,i),r.responseType=this.type,r.open(e.url),r.send()},e.prototype.onLoadFinish=function(t){var e=t.target,i=e.item,r=e.resCB,n=e.response;s(this,e);var a=o(i,t);2==a&&(i.data=n),r.callAndRecycle(i)},e}();e.BinLoader=A,__reflect(A.prototype,"jy.Res.BinLoader",["jy.Res.ResLoader"]);var L=function(){function e(){}return e.prototype.loadFile=function(e,i){var r=t.recyclable(egret.ImageLoader);a(this,r,e,i),r.load(e.url)},e.prototype.onLoadFinish=function(t){var e=t.target,i=e.item,r=e.resCB,n=e.data;s(this,e);var a=o(i,t);if(2==a){var h=new egret.Texture;h._setBitmapData(n),i.data=h}r.callAndRecycle(i)},e}();e.ImageLoader=L,__reflect(L.prototype,"jy.Res.ImageLoader",["jy.Res.ResLoader"]);var E=function(){function t(){}return t.prototype.loadFile=function(t,e){var i=new egret.Sound;a(this,i,t,e),i.load(t.url)},t.prototype.onLoadFinish=function(t){var e=t.target,i=e.item,r=e.resCB;s(this,e);var n=o(i,t);2==n&&(i.data=e),r.callAndRecycle(i)},t}();__reflect(E.prototype,"EgretSoundLoader",["jy.Res.ResLoader"]);var F=new A,U={},z=(B={},B[0]=F,B[1]=new A("text"),B[3]=new A("json"),B[2]=new L,B[4]=new E,B),$={},H=[];e.getExt=h,e.bindExtType=c,e.regAnalyzer=u,p(2,1,9999),p(0),p(1,0,-9999);var G=[];e.addRes=f,e.load=d,e.loadList=y,e.get=g,e.set=_,e.remove=m,e.cancel=w,e.loadRes=j;var V=[];e.getLocalDB=D,e.tryLocal=k}(e=t.Res||(t.Res={}))}(jy||(jy={}));var jy;!function(t){function e(t,e,i){var r=n(t);if(!r){for(var a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];r=e.apply(i,a),o(t,r)}return r}function i(e){var i=a,r=0;for(var n in i){var o=i[n];e(o)&&(h[r++]=n)}for(var s=0;r>s;s++){var n=h[s],o=i[n];o&&(o.dispose(),t.Res.remove(o.uri),delete i[n])}}function r(){var e=t.Global.now-s;i(function(t){return!t.isStatic&&t.lastUseTime<e})}function n(t){return a[t]}function o(t,e){var i=a;return t in i?i[t]===e:(i[t]=e,!0)}var a={},s=3e5;t.ResManager={get:e,getResource:n,regResource:o,init:function(e){void 0===e&&(e=3e5),3e4>e&&(e=3e4),s=e,t.TimerUtil.addCallback(3e4,r)},gc:function(){i(function(t){return!t.isStatic})},disposeRes:i};var h=[]}(jy||(jy={}));var ErrorTexture,jy;!function(t){function e(){var e=512,i=t.getTextureSheet(e),r=new t.ShortSideBinPacker(e,e);return{set:function(t,n){if(!i.get(t)){var o=n.bitmapData,a=o.source,s=a.width,h=a.height,c=s+1,u=h+1,l=r.insert(c,u);if(!l){if(!(2048>e))return;if(e=2*e,r.extSize(e,e),i.extSize(e),l=r.insert(c,u),!l)return}n.$bin=l;var p=i.ctx;p.globalAlpha=1;var f=l.x,d=l.y;p.drawImage(a,f,d),o.$dispose(),i.reg(t,{x:f,y:d,width:s,height:h},n)}},remove:function(t){var e=i.remove(t);if(e){var n=e.$bin;n&&(e.$bin=void 0,r.usedRects.remove(n),r.freeRects.pushOnce(n))}}}}var i=function(){function i(e,i){this._list=[],this.uri=e,this.url=t.ConfigUtils.getResUrl(e+(i?"":t.Global.webp))}return Object.defineProperty(i.prototype,"isStatic",{get:function(){return this._list.length>0},enumerable:!0,configurable:!0}),i.prototype.bind=function(e){this._tex&&(e.texture=this._tex,e.dispatch(-193)),this._list.pushOnce(e),this.lastUseTime=t.Global.now},i.prototype.loose=function(e){this._list.remove(e),this.lastUseTime=t.Global.now},i.prototype.load=function(){t.Res.loadRes({uri:this.uri,url:this.url,type:2},t.CallbackInfo.get(this.loadComplete,this),this.qid)},i.prototype.loadComplete=function(t){var i=t.data,n=t.uri;if(n==this.uri){var o=this.sheetKey;if(o){var a=r[o];a||(r[o]=a=e()),a.set(n,i)}this._tex=i;for(var s=0,h=this._list;s<h.length;s++){var c=h[s];c.texture=i;c.dispatch(-193)}}},i.prototype.dispose=function(){var t=this._tex;if(t){this._tex=void 0;var e=this.sheetKey;if(e){var i=r[e];i&&i.remove(this.uri)}t.dispose()}this._list.length=0},i.get=function(e,r){var n=r.noWebp,o=r.sheetKey,a=t.ResManager.getResource(e);return a&&(a instanceof i||(t.ThrowError("["+e+"]资源有误，不是TextureResource"),a=void 0)),a||(a=new i(e,n),a.sheetKey=o,t.ResManager.regResource(e,a)),a},i}();t.TextureResource=i,__reflect(i.prototype,"jy.TextureResource",["jy.IResource"]);var r={}}(jy||(jy={}));var jy;!function(t){function e(e){for(var i,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(i=t.UILimiter.listener).addToStates.apply(i,[e].concat(r))}function i(e,i){t.UILimiter.listener.addToState(e,i)}var r=function(){function e(){this._queue=[],this.listener=new t.StateMachine}return e.prototype.addLimiter=function(t){var e=this._queue;return e.indexOf(t)>-1?(t.setState(this._current),e.push(t),!0):void 0},e.prototype.setState=function(t){this._current=t;var e=this._queue;if(e)for(var i=0;i<e.length;i++){var r=e[i];r.setState(t)}var n=this.listener;n&&n.setState(t)},e.prototype.removeLimiter=function(t){return this._queue.remove(t)},e.prototype.clear=function(){this._queue.length=0},e.prototype.check=function(t){var e=this._queue;if(e)for(var i=0;i<e.length;i++){var r=e[i];if(r&&r.check(t))return!0}},e}();t.LimitQueue=r,__reflect(r.prototype,"jy.LimitQueue",["jy.ILimit"]);var n,o=[];t.UILimiter={impl:new r,MaxHistory:5,get current(){return n},get listener(){return this.impl.listener},enter:function(t){n!=t&&(n=t,this.impl.setState(t),o.push(t),o.length>this.MaxHistory&&o.shift())},exit:function(t){if(t=t||n,n==t){var e=o.length;o.pop();var i=e>1?o.pop():0;this.enter(i)}},check:function(t){return this.impl.check(t)}},t.addToStates=e,t.addToState=i}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){this._list=[],this._dict={}}return Object.defineProperty(t.prototype,"rawList",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawDict",{get:function(){return this._dict},enumerable:!0,configurable:!0}),t.prototype.setRawDict=function(t){this._dict=t;var e=this._list,i=0;for(var r in t)e[i++]=t[r];return e.length=i,this},t.prototype.setRawList=function(t,e){var i=this._list,r=this._dict={},n=0;if(t)for(var o=t.length;o>n;n++){var a=t[n];r[a[e]]=a,i[n]=a}return i.length=n,this},t.prototype.set=function(t,e){var i,r,n=this,o=n._dict,a=n._list;if(t in o){var s=o[t];i=a.indexOf(s),s!=e&&(r=!0)}else i=a.length,r=!0;return r&&(a[i]=e,o[t]=e),i},t.prototype.get=function(t){return this._dict[t]},t.prototype["delete"]=function(t){var e=this,i=e._dict,r=e._list,n=i[t];if(delete i[t],n){var o=r.indexOf(n);o>-1&&r.splice(o,1)}return n},t.prototype.clear=function(){this._list.length=0,this._dict={}},Object.defineProperty(t.prototype,"size",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),t}();t.ArraySet=e,__reflect(e.prototype,"jy.ArraySet")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.replaceBuffer=function(t){this.write_position=t.byteLength,this._bytes=new Uint8Array(t),this.data=new DataView(t)},i.prototype.readBuffer=function(t){if(this.validate(t)){var e=this.position;return this.position+=t,this.buffer.slice(e,this.position)}},i.prototype.readInt64=function(){if(this.validate(8)){var e=void 0,i=void 0,r=0==this.$endian,n=this.data,o=this._position;return r?(e=n.getUint32(o,r),i=n.getUint32(o+4,r)):(i=n.getUint32(o,r),e=n.getUint32(o+4,r)),this.position=o+8,t.Int64.toNumber(e,i)}},i.prototype.writeInt64=function(e){this.validateBuffer(8);var i=t.Int64.fromNumber(e),r=i.high,n=i.low,o=0==this.$endian,a=this.data,s=this._position;o?(a.setUint32(s,n,o),a.setUint32(s+4,r,o)):(a.setUint32(s,r,o),a.setUint32(s+4,n,o)),this.position=s+8},i.prototype.readPBDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,!0);return this.position+=8,t}},i.prototype.writePBDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,!0),this.position+=8},i.prototype.readPBFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,!0);return this.position+=4,t}},i.prototype.writePBFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,!0),this.position+=4},i.prototype.readFix32=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,!0);return this.position+=4,t}},i.prototype.writeFix32=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,!0),this.position+=4},i.prototype.readSFix32=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,!0);return this.position+=4,t}},i.prototype.writeSFix32=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,!0),this.position+=4},i.prototype.readFix64=function(){if(this.validate(8)){var e=this._position,i=this.data,r=i.getUint32(e,!0),n=i.getUint32(e+4,!0);return this.position=e+8,t.Int64.toNumber(r,n)}},i.prototype.writeFix64=function(e){var i=t.Int64.fromNumber(e);this.validateBuffer(8);var r=this._position,n=this.data;n.setUint32(r,i.low,!0),n.setUint32(r+4,i.high,!0),this.position=r+8},i.prototype.readByteArray=function(e,i){void 0===i&&(i=0);var r=new t.ByteArray(this.readBuffer(e),i);return r.$endian=this.$endian,r},i.prototype.writeVarint64=function(e){var i=t.Int64.fromNumber(e),r=i.high,n=i.low;if(0==r)this.writeVarint(n);else{for(var o=0;4>o;++o)this.writeByte(127&n|128),n>>>=7;0==(2147483640&r)?this.writeByte(r<<4|n):(this.writeByte(127&(r<<4|n)|128),this.writeVarint(r>>>3))}},i.prototype.writeVarint=function(t){for(;;){if(128>t)return void this.writeByte(t);this.writeByte(127&t|128),t>>>=7}},i.prototype.readVarint=function(){for(var t=0,e=0;;e+=7){if(!(32>e)){for(;this.readUnsignedByte()>=128;);break}var i=this.readUnsignedByte();if(!(i>=128)){t|=i<<e;break}t|=(127&i)<<e}return t},i.prototype.readVarint64=function(){for(var e,i,r,n=0;e=this.readUnsignedByte(),28!=n;n+=7){if(!(e>=128))return i|=e<<n,t.Int64.toNumber(i,r);i|=(127&e)<<n}if(!(e>=128))return i|=e<<n,r=e>>>4,t.Int64.toNumber(i,r);for(e&=127,i|=e<<n,r=e>>>4,n=3;;n+=7)if(e=this.readUnsignedByte(),32>n){if(!(e>=128)){r|=e<<n;break}r|=(127&e)<<n}return t.Int64.toNumber(i,r)},Object.defineProperty(i.prototype,"outBytes",{get:function(){return new Uint8Array(this._bytes.buffer,0,this.write_position)},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.write_position=this.position=0},i}(egret.ByteArray);t.ByteArray=e,__reflect(e.prototype,"jy.ByteArray")}(jy||(jy={}));var jy;!function(t){}(jy||(jy={}));
var jy;!function(t){function e(t,e){return t-e}var i=function(){function t(t,i){void 0===i&&(i=e);var r=t+1;this.heap=new Array(r),this.maxSize=r,this.compare=i,this._count=0}return t.prototype.peek=function(){return this.heap[1]},t.prototype.put=function(t){var e=this,i=e._count,r=e.maxSize,n=e.heap,o=e.compare;if(i++,r>i){n[i]=t;for(var a=i,s=a>>1,h=n[a];s>0;){var c=n[s];if(!(o(h,c)>0))break;n[a]=c,a=s,s>>=1}return n[a]=h,this._count=i,!0}},t.prototype.pop=function(){var t=this,e=t._count,i=t.heap,r=t.compare;if(e>=1){var n=i[1];i[1]=i[e],i[e]=void 0;for(var o=1,a=2,s=i[o],h=e-1;e>a;){h>a&&r(i[a],i[a+1])<0&&a++;var c=i[a];if(!(r(s,c)<0))break;i[o]=c,o=a,a<<=1}return this._count=e-1,n}},t.prototype.clear=function(t){var e=this.heap;e.length=0;var i=this.maxSize;t>0&&(i=t+1,this.maxSize=i),e.length=i,this._count=0},Object.defineProperty(t.prototype,"size",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.toArray=function(){return this.heap.slice(1,this._count+1)},t.prototype.forEach=function(t,e){var i=this,r=i.heap,n=i._count;n++;for(var o=1;n>o;o++){var a=r[o];if(void 0!=a&&t.call(e,a,o,this))break}},t}();t.Heap=i,__reflect(i.prototype,"jy.Heap")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(t,e){this.low=0|t,this.high=0|e}return t.prototype.toNumber=function(){return this.high*r+(this.low>>>0)},t.toNumber=function(t,e){return(0|e)*r+(t>>>0)},t.fromNumber=function(e){if(isNaN(e)||!isFinite(e))return a;if(-o>=e)return h;if(e+1>=o)return s;if(0>e){var i=t.fromNumber(-e);return i.high===h.high&&i.low===h.low?h:(i.low=~i.low,i.high=~i.high,i.add(c))}return new t(e%r|0,e/r|0)},t.prototype.add=function(e){var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,h=e.low>>>16,c=65535&e.low,u=0,l=0,p=0,f=0;return f+=o+c,p+=f>>>16,f&=65535,p+=n+h,l+=p>>>16,p&=65535,l+=r+s,u+=l>>>16,l&=65535,u+=i+a,u&=65535,new t(p<<16|f,u<<16|l)},t}();t.Int64=e,__reflect(e.prototype,"jy.Int64");var i=65536,r=i*i,n=r*r,o=n/2,a=new e,s=new e(-1,2147483647),h=new e(0,-2147483648),c=new e(1)}(jy||(jy={}));var jy;!function(t){t.Location={getDist:function(t,e){var i=Math.DEG_TO_RAD,r=t.latitude*i,n=e.latitude*i,o=r-n,a=(t.longitude-e.longitude)*i;return 12756274*Math.asin(Math.sqrt(Math.pow(Math.sin(.5*o),2)+Math.cos(r)*Math.cos(n)*Math.pow(Math.sin(.5*a),2)))}}}(jy||(jy={}));var jy;!function(t){function e(e){function n(t){return r[t]}return i()&&(t.DateUtils.getDefaultCDFOption=n),n(e)}function i(){var e;if(!r){var i=t.LangUtil;return e={},e[0]={d:i.getMsg("$_ndays"),h:i.getMsg("$_nhours"),m:i.getMsg("$_nminutes"),s:i.getMsg("$_nsecends")},e[1]={h:i.getMsg("$_nhours"),m:i.getMsg("$_nminutes"),s:i.getMsg("$_nsecends")},e[2]={h:i.getMsg("$_nhours"),m:i.getMsg("$_nminutes")},e[3]={m:i.getMsg("$_nminutes"),s:i.getMsg("$_nsecends")},e[4]={s:i.getMsg("$_nsecends")},r=e,!0}}var r,n=new Date,o=Date.now,a=6e4*-n.getTimezoneOffset(),s=a;t.DateUtils={get sharedDate(){return n},getDefaultCDFOption:e,regCDFormat:function(t,e){i(),r[t]=e},initServerTime:function(t,e){a=6e4*-e,this.setServerTime(t)},setServerTime:function(t){s=t-o()+a},get utcServerTime(){return s+o()},get serverTime(){return this.utcServerTime-a},get utcServerDate(){return n.setTime(this.utcServerTime),n},get serverDate(){return n.setTime(this.serverTime),n},getFormatTime:function(t,e,i){return void 0===i&&(i=!0),i&&(t=this.getUTCTime(t)),n.setTime(t),n.format(e)},getDayEnd:function(t){return void 0===t&&(t=this.serverTime),n.setTime(t),n.setHours(23,59,59,999)},getUTCDayEnd:function(t){return void 0===t&&(t=this.utcServerTime),n.setTime(t),n.setUTCHours(23,59,59,999)},getDayStart:function(e){return void 0===e&&(e=t.DateUtils.serverTime),n.setTime(e),n.setHours(0,0,0,0)},getUTCDayStart:function(e){return void 0===e&&(e=t.DateUtils.utcServerTime),n.setTime(e),n.setUTCHours(0,0,0,0)},getUTCTime:function(t){return t+a},getDayCount:function(e,i){return i=t.DateUtils.getDayStart(i),Math.ceil((i-e)/864e5)+1},getUTCDayCount:function(e,i){return i=t.DateUtils.getUTCDayStart(i),Math.ceil((i-e)/864e5)+1},getCountdown:function(t,i){"number"==typeof i&&(i=e(i));var r="",n=i.d;if(n){var o=t/864e5>>0;t-=864e5*o,r+=n.substitute(o)}if(n=i.h){var a=t/36e5>>0;t-=36e5*a,i.hh&&(a=a.zeroize(2)),r+=n.substitute(a)}if(n=i.m){var s=t/6e4>>0;t-=6e4*s,i.mm&&(s=s.zeroize(2)),r+=n.substitute(s)}if(n=i.s){var h=t/1e3>>0;i.ss&&(h=h.zeroize(2)),r+=n.substitute(h)}return r}}}(jy||(jy={}));var jy;!function(t){function e(t,e,i){return t.hour=e,t.minute=i,t.time=36e5*e+6e4*i,t.strTime=e.zeroize(2)+":"+i.zeroize(2),t}var i=function(){function i(t){t&&this.decode(t)}return i.prototype.decodeMinutes=function(t){return e(this,t/60|0,t%60)},i.prototype.decodeBit=function(t){return e(this,t>>6,63&t)},i.prototype.decode=function(i){var r=i.split(":");return r.length>=2?e(this,+r[0],+r[1]):void t.ThrowError("时间格式不正确，不为HH:mm格式，当前配置："+i)},Object.defineProperty(i.prototype,"todayTime",{get:function(){return this.getDayTime()},enumerable:!0,configurable:!0}),i.prototype.getDayTime=function(e,i){var r=i?t.DateUtils.getDayStart:t.DateUtils.getDayStart;return r(e)+this.time},i}();t.TimeVO=i,__reflect(i.prototype,"jy.TimeVO")}(jy||(jy={}));var jy;!function(t){function e(t,e){for(var n=e.freeRects,o=e.usedRects,a=n.length,s=0;a>s;s++)i(n[s],t,e)&&(n.splice(s,1),s--,a--);r(e),o.push(t)}function i(t,e,i){var r=i.freeRects,n=e.x,o=e.y,a=e.right,s=e.bottom,h=t.x,c=t.y,u=t.right,l=t.bottom;if(n>=u||h>=a||o>=l||c>=s)return!1;var p;return u>n&&a>h&&(o>c&&l>o&&(p=t.clone(),p.height=o-c,r.push(p)),l>s&&(p=t.clone(),p.y=s,p.height=l-s,r.push(p))),l>o&&s>c&&(n>h&&u>n&&(p=t.clone(),p.width=n-h,r.push(p)),u>a&&(p=t.clone(),p.x=a,p.width=u-a,r.push(p))),!0}function r(t){for(var e=t.freeRects,i=0;i<e.length;i++)for(var r=e[i],n=i+1;n<e.length;n++){var o=e[n];if(o.containsRect(r)){e.splice(i,1),i--;break}r.containsRect(o)&&(e.splice(n,1),n--)}}var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rot=!1,e}return __extends(e,t),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e}(egret.Rectangle);t.Bin=n,__reflect(n.prototype,"jy.Bin");var o=function(){function t(t,e,i){this.width=t,this.height=e,this.rot=!!i,this.usedRects=[],this.freeRects=[new n(0,0,t,e)]}return t.prototype.extSize=function(t,e){var i=this,r=i.width,o=i.height;return t>r&&e>o?(this.width=t,this.height=e,this.freeRects.push(new n(r,0,t-r,o),new n(0,o,t,e-o)),!0):void 0},t.prototype.insert=function(t,i){for(var r=1/0,o=0,a=this,s=a.freeRects,h=a.rot,c=Math.min,u=Math.max,l=new n,p=0,f=s.length;f>p;p++){var d=s[p],y=d.width,v=d.height,g=d.x,_=d.y;if(y>=t&&v>=i){var m=y-t,b=v-i,w=c(m,b),j=u(m,b);(r>w||w==r&&o>j)&&(l.x=g,l.y=_,l.width=t,l.height=i,r=w,o=j)}if(h&&y>=i&&v>=t){var x=y-i,S=v-t,T=c(x,S),C=u(x,S);(r>T||T==r&&o>C)&&(l.x=g,l.y=_,l.width=i,l.height=t,l.rot=!0,r=T,o=C)}}return l.height?(e(l,this),l):void 0},t}();t.ShortSideBinPacker=o,__reflect(o.prototype,"jy.ShortSideBinPacker")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._sw=2,this._total=0,this._cfgs=[]}return e.prototype.setGraphis=function(t){return this._g=t,this},e.prototype.setCenter=function(t,e){return this._cX=t,this._cY=e,this},e.prototype.setRadius=function(t){return this._radius=t,this},e.prototype.setRad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=Math.PI),this._sRad=t,this._eRad=e,this._dRad=e-t,this},e.prototype.setStrokeWidth=function(t){return void 0===t&&(t=2),this._sw=t,this},e.prototype.setCfgs=function(t){for(var i=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return t||(t=e.defaultColor),"number"==typeof t&&(t={color:t,weight:1}),this.reset(),this.addCfg(t),r&&r.length&&r.forEach(function(t){i.addCfg(t)}),this},e.prototype.addCfg=function(t){t=t.clone();var e=this._cfgs,i=e[e.length-1];i&&!i.noGradient&&(i.endColor=t.color);var r=this._total;return t.start=r,r+=t.weight,t.end=r,this._total=r,e.push(t),this},e.prototype.reset=function(){return this._cfgs.length=0,this._total=0,this._cfg=void 0,this},e.prototype.progress=function(e,i){0>e&&(e=0),0>i&&(i=1e-5),e>i&&(e=i),this._p=e/i,t.Global.callLater(this.render,0,this)},e.prototype.reuse=function(){this.isEnd=!1},e.prototype.clear=function(){this.isEnd=!0,this._g.clear()},e.prototype.render=function(){function t(t,e,i,r){var n=t>>r&255,o=e>>r&255;return Math.round(n+(o-n)*i)}if(!this.isEnd){for(var e,i=this._cfgs,r=i.length,n=this._p,o=n*this._total,a=0;r>a&&(e=i[a],!(e.end>o));a++);if(e){var s=(o-e.start)/e.weight,h=e.color,c=e.endColor,u=t(h,c,s,16),l=t(h,c,s,8),p=t(h,c,s,0),f=e.shine&&100*n&1;f&&(u^=p,p^=u,u^=p,l=~l);var d=u<<16|l<<8|p,y=this._g;y.clear(),y.lineStyle(this._sw,d);var v=this._sRad;y.drawArc(this._cX,this._cY,this._radius,v,v+this._dRad*n)}}},e.defaultColor=16711680,e}();t.CircleCountdown=e,__reflect(e.prototype,"jy.CircleCountdown")}(jy||(jy={}));var jy;!function(t){function e(t){n.appendChild(i),i.innerText=t;var e=getSelection(),o=r.createRange();o.selectNodeContents(i),e.removeAllRanges(),e.addRange(o);var a=r.execCommand("copy");return n.removeChild(i),a}var i=document.createElement("div"),r=document,n=r.documentElement;t.doCopy=e}(jy||(jy={}));var jy;!function(t){function e(t,e,i,r,o){return n||(n=new egret.RenderTexture),i=i||t.getBounds(),n.drawToTexture(t,i,o),n.toDataURL(e,null,r)}function i(t){return t.substr(t.indexOf(",")+1)}function r(t){for(var e=this.getBase64(t),i=window.atob(e),r=i.length,n=new Uint8Array(r),o=0;r>o;o++)n[o]=i.charCodeAt(o);return n}var n;t.DataUrlUtils={getBase64:i,getBytes:r,getDisplayDataURL:e,getDisplayBase64:function(t,r,n,o,a){return i(e(t,r,n,o,a))},getDisplayBytes:function(t,i,n,o,a){return r(e(t,i,n,o,a))}}}(jy||(jy={}));var jy;!function(t){function e(t,e,s,h){var c=Math.clamp;h=0|h,s=0|s,t=0|t,e=0|e,h&&(h=c(h,-180,180)),s&&(s=c(s,-100,100)),t&&(t=c(t,-100,100)),e&&(e=c(e,-100,100));var l=t+1e3*e+1e6*s+1e9*h,p=u[l];if(!p){var f=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];h&&a(f,i(h)),s&&a(f,r(s)),t&&a(f,o(t)),e&&a(f,n(e)),u[l]=p=new egret.ColorMatrixFilter(f)}return p}function i(t){var e=t*Math.DEG_TO_RAD,i=Math.cos(e),r=Math.sin(e);return[s+i*(1-s)+r*-s,h+i*-h+r*-h,c+i*-c+r*(1-c),0,0,s+i*-s+.143*r,h+i*(1-h)+.14*r,c+i*-c+r*-.283,0,0,s+i*-s+r*-(1-s),h+i*-h+r*h,c+i*(1-c)+r*c,0,0,0,0,0,1,0]}function r(t){t*=.01;var e=t+1,i=1-e,r=i*s,n=i*h,o=i*c;return[r+e,n,o,0,0,r,n+e,o,0,0,r,n,o+e,0,0,0,0,0,1,0]}function n(t){t*=.01;var e=t+1,i=128*(1-e);return[e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,e,0]}function o(t){var e=2.55*t;return[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}function a(t,e){for(var i=[],r=0;4>r;r++){for(var n=0;5>n;n++)i[n]=t[n+5*r];for(var n=0;5>n;n++){for(var o=0,a=0;4>a;a++)o+=e[n+5*a]*i[a];t[n+5*r]=o}}}var s=.213,h=.715,c=.072,u={};t.FilterUtils={gray:[new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])],dark:[new egret.ColorMatrixFilter([.5,0,0,0,6.75,0,.5,0,0,6.75,0,0,.5,0,6.75,0,0,0,1,0])],blur:[new egret.BlurFilter(5,5)],adjustColorFilter:e}}(jy||(jy={}));var jy;!function(t){function e(t,e){e=e||{};for(var i=t.length,r=0,n=0,o=0;i>o;o++){var a=t[o];r+=a.x,n+=a.y}return e.x=r/i,e.y=n/i,e}function i(t,e){var i=t.x+t.width,r=t.y+t.height,n=e.x+e.width,o=e.y+e.height;return Math.max(t.x,e.x)<=Math.min(i,n)&&Math.max(t.y,e.y)<=Math.min(r,o)}function r(t){for(var e=t[0],i=0,r=e,n=1,o=t.length;o>n;n++){var a=t[n];i+=(a.x-r.x)*(a.y+r.y),r=a}return i+=(e.x-r.x)*(e.y+r.y),.5*i}t.getCenter=e,t.intersects=i,t.getArea=r}(jy||(jy={}));var jy;!function(t){function e(t){return n[t]}function i(t){return r[t]}var r={"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&","&nbsp;":" ","&#x000A;":"\n"},n={"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;","&":"&amp;"};t.HTMLUtil={createColorHtml:function(e,i){var r;return r="number"==typeof i?t.ColorUtil.getColorString(i):"#"!=i.charAt(0)?"#"+i:i,"<font color='"+r+"'>"+e+"</font>"},clearHtml:function(t){return t.replace(/<[^><]*?>/g,"")},escHTML:function(t){return t.replace(/<|>|"|'|&/g,e)},unescHTML:function(t){return t.replace(/&lt;|&gt;|&quot;|&apos;|&amp;|&nbsp;|&#x000A;/g,i)}}}(jy||(jy={}));var jy;!function(t){var e;"object"==typeof $lang?(e=$lang,$lang=void 0):e={},t.LangUtil={getMsg:function(){var t,i=arguments,r=i[0],n=i.length;if(2==n)t=i[1];else if(n>2){t=[];for(var o=0,a=1;n>a;a++)t[o++]=i[a]}return r in e?e[r].substitute(t):"string"==typeof r?r.substitute(t):r+""},has:function(t){return t in e},regMsgDict:function(t){e=t}}}(jy||(jy={}));var jy;!function(t){function e(t){var e=t.a,a=t.b,s=t.c1,h=t.c2,c=";";e&&(r=e.split(c)),a&&(n=a.split(c)),s&&(o[1]=s.split(c)),h&&(o[2]=h.split(c)),i=!0}var i,r=[],n=[],o=[,[],[]],a=function(){function a(t){this.setRandom(t)}return a.loadNameLib=function(r,n){return i?n&&n.execute():void t.Res.loadRes({uri:"$nameLib",url:r,type:3},t.CallbackInfo.get(function(t){var r=t.data;return r?(e(r),i=!0,n&&n.execute()):void 0}))},a.prototype.setRandom=function(t){null!=t?this._random=t:this._random=Math.random},a.prototype.getName=function(t){void 0===t&&(t=1);var e="",i=o[t];if(i){var a=r.length,s=n.length,h=i.length,c=this._random;return a&&(e+=r[a*c()>>0]),s&&(e+=1&Date.now()?"":n[s*c()>>0]),h&&(e+=i[h*c()>>0]),e}},a.prototype.dispose=function(){this._random=null},a.setLib=e,a}();t.NameUtils=a,__reflect(a.prototype,"jy.NameUtils")}(jy||(jy={}));var jy;!function(t){function e(t,e){return function(i){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.call.apply(t,[e,void 0].concat(r))}}function i(e,i,r){void 0===r&&(r=2e3);var n=s++;return h[n]={id:n,expired:t.Global.now+r,success:e,error:i},u++,a||(t.TimerUtil.addCallback(1e3,o),a=!0),n}function r(e){e in h&&(delete h[e],u--,0==u&&(t.TimerUtil.removeCallback(1e3,o),a=!1))}function n(t,e,i){var n=h[t];if(n){r(t);var o,a=n.success,s=n.error;return i?("string"==typeof i&&(i=new Error(i)),s&&(o=s.call(i),s.recycle()),a&&a.recycle()):(s&&s.recycle(),a&&(o=a.call(e),a.recycle())),o}}function o(){var e=l,i=0,r=t.Global.now;for(var o in h){var a=h[o];r>a.expired&&(e[i++]=o)}for(var s=0;i>s;s++){var o=e[s];n(o,null,c)}}var a,s=1,h={},c="RPCTimeout",u=0,l=[];t.RPC={Timeout:c,callback:n,registerCallback:i,registerCallbackFunc:function(r,n,o,a){void 0===o&&(o=2e3);for(var s=[],h=4;h<arguments.length;h++)s[h-4]=arguments[h];var c=t.CallbackInfo.get.apply(t.CallbackInfo,[r,a].concat(s)),u=t.CallbackInfo.get.apply(t.CallbackInfo,[n?r:e(r,a),a].concat(s));return i(c,u,o)},removeCallback:function(t){var e=h[t];if(r(t),e){var i=e.success,n=e.error;i&&i.recycle(),n&&n.recycle()}}}}(jy||(jy={}));var jy;!function(t){var e={};t.RequestLimit={check:function(i,r){if(void 0===r&&(r=500),r=0|r,0>=r)return!0;var n=e[i],o=t.Global.now;if(!n)return e[i]=r+o,!0;var a=n-o;return a>0?!1:(e[i]=r+o,!0)},remove:function(t){delete e[t]}}}(jy||(jy={}));var jy;!function(t){t.Temp={SharedArray1:[],SharedArray2:[],SharedArray3:[],SharedRect1:{x:0,y:0,width:0,height:0},SharedRect2:{x:0,y:0,width:0,height:0},EgretPoint:new egret.Point,EgretRectangle:new egret.Rectangle,SharedPoint1:{x:0,y:0,z:0},SharedPoint2:{x:0,y:0,z:0},voidFunction:function(){},willReplacedFunction:function(){},retTrueFunc:function(){return!0},retFalseFunc:function(){return!1},EmptyObject:Object.freeze({}),EmptyArray:Object.freeze([]),pipeFunction:function(t){return t}}}(jy||(jy={}));var jy;!function(t){function e(t){var e=0;for(var i in s){var r=s[i];if(r.nt<t){r.nt=t+r.tid;var n=r.list,o=n.length;if(o>0){for(var a=0;o>a;a++)h[a]=n[a];for(var a=0;o>a;a++)h[a].execute(!1)}o=n.length,0==o&&(c[e++]=i)}}for(var a=0;e>a;a++)delete s[c[a]]}function i(t){return 10*Math.ceil(t/10)}function r(e,r,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];e=i(e);var h=s[e];if(h)t.CallbackInfo.addToList.apply(t.CallbackInfo,[h.list,r,n].concat(o));else{var c=[];h={tid:e,nt:t.Global.now+e,list:c},s[e]=h,c.push(t.CallbackInfo.get.apply(t.CallbackInfo,[r,n].concat(o)))}}function n(e,r){e=i(e);var n=s[e];n||(n={tid:e,nt:t.Global.now+e,list:[]},s[e]=n),n.list.pushOnce(r)}function o(t,e){t=i(t);var r=s[t];r&&r.list.remove(e)}function a(e,r,n){e=i(e);var o=s[e];if(o){var a=o.list,h=t.CallbackInfo.removeFromList(a,r,n);h&&h.recycle()}}var s={},h=[],c=[];t.TimerUtil={addCallback:r,removeCallback:a,tick:e,add:n,remove:o}}(jy||(jy={}));var jy;!function(t){function e(t,e){return/^((http|https):)?\/\//.test(t)||(t=i(t,e)),t}var i=window.URL?function(t,e){return e=e||location.href,new URL(t,e).href}:function(t,e){return e||(e=location.href,location.href!=location.origin&&(e=e.substr(0,e.lastIndexOf("/")))),e+"/"+t};t.solveLink=e}(jy||(jy={}));var jy;!function(t){function e(e,h){var u=e.split(h);s=u.length;var l,p,f=e.length+7*s,d=/([\/*().?|+\-$\^=:!@])/g,y=/([\\\[\]])/g;if(32768>f){var v=s-1,g="(?:";for(p=0;v>p;p++)l=u[p],l&&(l=l.replace(y,"[\\$1]"),l=l.replace(d,"[$1]"),g+=l+")|(?:");if(l=u[v],l=l.replace(y,"[\\$1]"),l=l.replace(d,"[$1]"),g+=l+")|[|]",g.length<32768)return c=new RegExp(g,"g"),t.WordFilter.wordCensor=i,void(t.WordFilter.checkWord=r)}for(a=new Array(s+1),p=0;s>p;p++)l=u[p],l=l.replace(y,"[\\$1]"),l=l.replace(d,"[$1]"),a[p]=new RegExp(l,"g");a[p]=new RegExp("[|]","g"),s+=1,t.WordFilter.wordCensor=n,t.WordFilter.checkWord=o}function i(t){return t.replace(c,h)}function r(t){return c.lastIndex=0,c.test(t)}function n(t){for(var e=0;s>e;e++)t=t.replace(a[e],h);return t}function o(t){for(var e=0;s>e;e++)if(a[e].lastIndex=0,a[e].test(t))return!0}var a,s,h=function(t){for(var e=t.length,i="";e--;)i+="*";return i},c=/卐|妓|婊|尻|屄|屌|睾|肏|[|]/g;t.WordFilter={loadDirtyWord:function(i,r){void 0===r&&(r="\n"),t.Res.loadRes({uri:"$dirty",url:i,type:1},t.CallbackInfo.get(function(t){var i=t.data;i&&e(i,r)}))},initFilterstring:e,wordCensor:i,setDirtyHandler:function(t){h=t},checkWord:r}}(jy||(jy={}));var $gm,jy;!function(t){function e(t){return(new Date).format("[yyyy-MM-dd HH:mm:ss]",!0)+"[info:]"+t}t.errorPrefix="";var i=[],r=function(r){i.length>t.ThrowError.MaxCount&&i.shift();var r=e(r);return i.push(r),r};t.ThrowError=function(e,i,n){e=t.errorPrefix+e,e+="%c",i?e+="\nError:\n[name]:"+i.name+",[message]:"+i.message:i=new Error,e+="\n[stack]:\n"+i.stack,e=r(e),console.log(e,"color:red")},t.ThrowError.MaxCount=50,t.ThrowError.errorMsg=i}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._layers=[],i._sortedLayers=[],i._stage=t,i.init(),i}return __extends(i,e),i.init=function(t,e){e=e||i,i.instance=new e(t)},i.addLayerConfig=function(e,r,n){void 0===r&&(r=0);var o={};o.id=e,o.parentid=r,o.ref=n||t.BaseLayer,i.layerConfigs[e]=o},i.invalidateSort=function(){i.instance.invalidateSort()},i.prototype.invalidateSort=function(){this._sortDirty=!0},Object.defineProperty(i.prototype,"viewRect",{get:function(){return this._viewRect},enumerable:!0,configurable:!0}),i.prototype.getLayer=function(e){var r=this._layers,n=r[e];if(!n){var o=i.layerConfigs[e];if(!o)return;var a=o.ref;n=new a(e),this.addLayer(n,o),r[e]=n,n instanceof t.SortedLayer&&this._sortedLayers.push(n)}return n},i.prototype.changeId=function(t,e,i){void 0===i&&(i=!0);var r=t.id;if(r!=e){var n=this._layers;n[r]==t&&(n[r]=void 0),n[e]=t,t.id=e}i&&this.awakeLayer(e)},i.prototype.sleepLayer=function(e){var i=this._layers[e];t.removeDisplay(i)},i.prototype.awakeLayer=function(t){var e=this._layers[t],r=i.layerConfigs[t];e&&this.addLayer(e,r)},i.prototype.addLayer=function(t,e){if(e&&e.parentid){var i=this.getLayer(e.parentid);i instanceof egret.DisplayObjectContainer&&this.addLayerToContainer(t,i)}else this.addLayerToContainer(t,this._stage)},i.prototype.addLayerToContainer=function(t,e){for(var i=e.$children,r=t.id,n=0,o=0,a=i.length;a>o;o++){var s=i[o];if(t!=s){var h=s;if(h.id>r)break;n++}}e.addChildAt(t,n)},i.prototype.init=function(){},i.layerConfigs={},i}(egret.EventDispatcher);t.GameEngine=e,__reflect(e.prototype,"jy.GameEngine")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.depth=0,e}return __extends(e,t),e}(egret.Sprite);t.DSprite=e,__reflect(e.prototype,"jy.DSprite",["jy.IDepth"])}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.state=0,t}return __extends(i,e),i.prototype.bind=function(e){var i=this.state;if(2!=i&&(this._refList||(this._refList=[]),this._refList.push(e),0==i)){var r=this.uri="a/"+this.key+"/d.json",n=this.url=t.ConfigUtils.getResUrl(r);t.Res.load(r,n,t.CallbackInfo.get(this.dataLoadComplete,this),this.qid),this.state=1}},i.prototype.dataLoadComplete=function(t){var e=t.uri,i=t.data;if(e==this.uri){if(i){if(this.init(this.key,i),this._refList)for(var r=0,n=this._refList;r<n.length;r++){var o=n[r];o.callback()}}else this.state=2;this._refList=void 0}},i.prototype.loose=function(t){var e=this._refList;e&&e.remove(t)},i.prototype.init=function(i,r){e.prototype.init.call(this,i,r[0]);var n=new t.UnitResource("a/"+i,this);n.qid=this.qid,n.decodeData(r[1]),this._resources=n,this.state=2},i.prototype.getResource=function(t){return this._resources},Object.defineProperty(i.prototype,"actionInfo",{get:function(){var t=this.frames;return t&&t[0]},enumerable:!0,configurable:!0}),i}(t.PstInfo);t.AniInfo=e,__reflect(e.prototype,"jy.AniInfo")}(jy||(jy={}));var $gm,jy;!function(t){function e(t,e,i){var r=t.actionInfo;if(e||void 0==e&&r&&r.isCircle){var n=t.actionInfo.frames.length;i>n&&(i%=n)}return i}var i=function(i){function r(){var t=i.call(this)||this;return t.state=0,t.recyclePolicy=3,t.waitTexture=!1,t.a=0,t}return __extends(r,i),Object.defineProperty(r.prototype,"guid",{get:function(){return this._guid},enumerable:!0,configurable:!0}),r.prototype.render=function(){var e=this._aniInfo;if(e){var i=e.actionInfo;if(i){var r=t.Global.now;this.onData(i,r),this.doRender(r)}}},r.prototype.doData=function(t){if(this._aniInfo){var e=this._aniInfo.actionInfo;e&&this.onData(e,t)}},r.prototype.renderFrame=function(t,e){if(t){this.f=t.f;var i=this.display;i&&i.draw(this,e)&&(this.willRenderFrame=void 0)}},r.prototype.dispatchEvent=function(t,e){var i=this.handler;i&&i.call(t,this,e)},r.prototype.doComplete=function(t){var e=this.handler;e&&e.call(-1993,this,t),this.state=2;var i=this.recyclePolicy;if(2==(2&i))r.recycle(this.guid);else{var n=this.display;n&&(n.off("enterFrame",this.render,this),1==(1&i)&&(this.display=void 0,n.recycle()))}},r.prototype.isComplete=function(t){var e=this.loop;return void 0!=e?(e--,this.loop=e,1>e):!t.isCircle},r.prototype.callback=function(){var t=this._aniInfo;if(t){var i=this,r=i.f,n=i.loop,o=i.display,a=i.state;this.idx=e(t,n,r),o.res=t.getResource(),1==a&&this.checkPlay()}},r.prototype.play=function(e){var i=t.Global.now;e=void 0===e?i:e,this.plTime=i,this.renderedTime=e,this.nextRenderTime=e,this.state=1,this.resOK=!1,this._render=void 0,this.display.stage&&this.checkPlay()},r.prototype.checkPlay=function(){var e=this.display,i=e.res;if(i){var r=this._render,n=void 0;if(this.waitTexture){var o=this,a=o.a,s=o.d;if(i.isResOK(a,s)){if(!this.resOK){this.resOK=!0;var h=t.Global.now-this.plTime;this.renderedTime=this.nextRenderTime=this.renderedTime+h}n=this.render}else n=this.checkPlay,i.loadRes(a,s)}else n=this.render;r!=n&&(r&&e.off("enterFrame",r,this),n&&e.on("enterFrame",n,this)),this._render=n}},r.prototype.onRecycle=function(){var t=this.handler;t&&(t.call(-1992,this),t.recycle(),this.handler=void 0),delete r._renderByGuid[this._guid],this.state=3;var e=this.display;if(e){this.display=void 0,e.off("addedToStage",this.onStage,this),e.off("removedFromStage",this.onStage,this);var i=this._render;i&&e.off("enterFrame",i,this),1==(1&this.recyclePolicy)&&e.recycle()}var n=this._aniInfo;n&&(n.loose(this),this._aniInfo=void 0),this.idx=0,this._guid=0/0,this.waitTexture=!1,this.loop=void 0,this._render=void 0},r.prototype.onSpawn=function(){this.f=0,this.state=0,this.recyclePolicy=3,this._playSpeed=1},r.prototype.onStage=function(t){if("addedToStage"==t.type)this.checkPlay();else{var e=t.currentTarget,i=this._render;i&&(e.off("enterFrame",i,this),this._render=void 0)}},r.prototype.init=function(t,e,i){this._aniInfo=t,this.display=e,e.on("addedToStage",this.onStage,this),e.on("removedFromStage",this.onStage,this),2==t.state?e.res=t.getResource():t.bind(this),this._guid=i},r.getAni=function(i,n,o){var a=$DD.ani,s=a[i];s||(s=new t.AniInfo,s.key=i,a[i]=s),s.qid=o;var h=s.getResource();h&&(h.qid=o);var c,u,l=t.recyclable(t.ResourceBitmap),p=t.recyclable(r);if(n){c=n.guid;var f=n.pos,d=n.x,y=n.y;f&&(d=f.x,y=f.y),void 0!=d&&(l.x=d),void 0!=y&&(l.y=y);var v=n.scale;void 0!=v&&(l.scaleX=l.scaleY=v),u=n.stop;var g=n.parent;if(g){var _=n.childIdx;void 0==_?g.addChild(l):g.addChildAt(l,_)}var m=n.loop;p.loop=m,p.handler=n.handler;var b=n.recyclePolicy;void 0==b&&(b=3),p.recyclePolicy=b,p.waitTexture=!!n.waitTexture,p.idx=e(s,m,n.start>>>0)}return!c&&(c=this.guid++),this._renderByGuid[c]=p,p.init(s,l,c),u||p.play(),p},r.getRunningAni=function(t){return this._renderByGuid[t]},r.recycle=function(t){var e=this._renderByGuid[t];e&&e.recycle()},r._renderByGuid={},r.guid=1,r}(t.BaseRender);t.AniRender=i,__reflect(i.prototype,"jy.AniRender",["jy.IRecyclable"])}(jy||(jy={}));var jy;!function(t){function e(e){var i={a:0,d:-1,f:0,t:100},r=["a","f","t","e","d"];if(!Array.isArray(e)){if("object"==typeof e){for(var n=0;5>n;n++){var o=r[n];void 0==e[o]&&(e[o]=i[o])}return e}return i}var a=t.DataUtils.getData(e,r,i);return 0==+a.e&&(a.e=void 0),-1==a.t&&(a.t=1/0),a}function i(t,i){var r={};r.key=i;var n=t[0],o=0,a=0;return n.forEach(function(t){var i=e(t);o+=i.t,n[a++]=i}),r.frames=n,r.totalTime=o,r.isCircle=!!t[1],r}function r(t,i){i=i||n--;for(var r=[],o=0,a=0;a<t.length;a++){var s=e(t[a]);r[a++]=s,o+=s.t}return{key:i,frames:r,totalTime:o}}t.getFrameInfo=e,t.getActionInfo=i;var n=-.5;t.getCustomAction=r}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.z=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"depth",{get:function(){return this.y+this.z},enumerable:!0,configurable:!0}),i.prototype.draw=function(t,e){var i=this.res;return i?i.draw(this,t,e):void 0},i.prototype.onRecycle=function(){t.removeDisplay(this),this.removeAllListeners(),this.res=void 0,this.rotation=0,this.x=0,this.y=0,this.z=0,this.scaleX=1,this.scaleY=1,this.anchorOffsetX=0,this.anchorOffsetY=0,this.texture=void 0},i}(egret.Bitmap);t.ResourceBitmap=e,__reflect(e.prototype,"jy.ResourceBitmap",["jy.IRecyclable","jy.IDepth"])}(jy||(jy={}));var jy;!function(t){var e=function(){function e(t,e){this.state=0,this.uri=t,this.url=e,this.textures=[]}return Object.defineProperty(e.prototype,"isStatic",{get:function(){return 1==this.state},enumerable:!0,configurable:!0}),e.prototype.bindTextures=function(e,i){var r=t.ADKey.getAction(i),n=e[r];if(n){var o=t.ADKey.getDirection(i),a=n[o];if(a)for(var s=0;s<a.length;s++)this.bindTexture(a[s])}},e.prototype.bindTexture=function(t){var e=this.textures;~e.indexOf(t)||(e.push(t),this.bmd&&(t.$bitmapData=this.bmd))},e.prototype.load=function(){0==this.state&&(this.state=1,t.Res.load(this.uri,this.url,t.CallbackInfo.get(this.loadComplete,this),this.qid))},e.prototype.loadComplete=function(t){var e=t.uri,i=t.data;if(e==this.uri)if(i){var r=i.bitmapData;this.bmd=r,this.state=2;for(var n=this.textures,o=0;o<n.length;o++){var a=n[o];a&&(a.$bitmapData=r)}}else this.state=-1},e.prototype.dispose=function(){for(var t=this.textures,e=0;e<t.length;e++){var i=t[e];i&&i.dispose()}t.length=0,this.bmd&&(this.bmd=void 0),this.state=0},e}();t.SplitUnitResource=e,__reflect(e.prototype,"jy.SplitUnitResource",["jy.IResource"])}(jy||(jy={}));var jy;!function(t){function e(t,e){t.texture=e;var i,r;e&&(i=e.tx,r=e.ty),t.anchorOffsetX=i||0,t.anchorOffsetY=r||0}var i=function(){function i(e,i){this.state=0,this.key=e;var r=this.uri=e+"/d.json";this.url=t.ConfigUtils.getResUrl(r),this.pst=i}return i.prototype.decodeData=function(t){function e(t){var e=new egret.Texture,i=t[0],r=t[1];e.tx=t[2]||0,e.ty=t[3]||0;var n=t[4],o=t[5];return e.$initData(i,r,n,o,0,0,n,o,n,o),e}var i={},r=0,n=0;for(var o in t){var a=[];i[o]=a;var s=t[o];if(s)for(var h=0,c=s.length;c>h;h++){var u=[];a[h]=u;var l=s[h];if(l)for(var p=0,f=l.length;f>p;p++)if(0!==l[p]){var d=e(l[p]),y=d.textureWidth,v=d.textureHeight;y>r&&(r=y),v>n&&(n=v),u[p]=d}}}this.width=r,this.height=n,this._datas=i,this.state=2},i.prototype.loadData=function(){0==this.state&&(this.state=1,t.Res.load(this.uri,this.url,t.CallbackInfo.get(this.dataLoadComplete,this),this.qid))},i.prototype.dataLoadComplete=function(t){var e=t.uri,i=t.data;e==this.uri&&this.decodeData(i)},i.prototype.draw=function(i,r,n){var o=this.getTexture(r);if(o){var a=r.a,s=r.d,h=this.loadRes(s,a);if(h.lastUseTime=t.Global.now,o.bitmapData)return e(i,o),!0;2==h.state&&h.bindTexture(o)}e(i,this.placehoder)},i.prototype.getTexture=function(t){var e=this._datas;if(e){var i=t.a,r=t.f,n=t.d,o=e[i];if(o){var a=o[n];if(a){var s=a[r];if(s)return s}}}},i.prototype.loadRes=function(e,i){var r=this.pst.getResKey(e,i),n=this.getUri2(r);return t.ResManager.get(n,this.noRes,this,n,r)},i.prototype.noRes=function(e,i){var r=new t.SplitUnitResource(e,this.getUrl(e));return r.qid=this.qid,this.pst.bindResource(i,r,this._datas),r.load(),r},i.prototype.getUri=function(t,e){return this.getUri2(this.pst.getResKey(t,e))},i.prototype.getUri2=function(t){return this.key+"/"+t+".png"},i.prototype.getUrl=function(e){return t.ConfigUtils.getResUrl(e+t.Global.webp)},i.prototype.isResOK=function(e,i){var r=this.getUri(e,i),n=t.ResManager.getResource(r);return!(!n||!n.bmd)},i.prototype.checkRes=function(t){var e=this;e.pst.splitInfo.forEach(function(i,r){t(e.getUri2(i),r)})},i}();t.UnitResource=i,__reflect(i.prototype,"jy.UnitResource")}(jy||(jy={}));var jy;!function(t){function e(t){return t.x<<16|65535&t.y}function i(t,e){return t<<16|65535&e}var r=Math.clamp,n=function(t){function i(e,i){var r=t.call(this)||this;r._lx=0,r._ly=0,r._lw=1/0,r._lh=1/0,r._hScroll=!0,r._vScroll=!0,r._rect=new egret.Rectangle;var n=egret.sys.$TempStage;return e||(e=n.stageWidth),i||(i=n.stageHeight),r.setSize(e,i),r}return __extends(i,t),Object.defineProperty(i.prototype,"changed",{get:function(){var t=this._host;if(t){var i=e(t);if(i!=this._lastPos)return this._lastPos=i,!0}return this._changed},enumerable:!0,configurable:!0}),i.prototype.change=function(){this._changed=!1},i.prototype.invalidate=function(){this._changed=!0},i.prototype.lookat=function(t){return this._host=t,!!t},Object.defineProperty(i.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),i.prototype.setSize=function(t,e){var i=this._rect,r=this._changed;return t!=i.width&&(i.width=t,r=!0),e!=i.height&&(i.height=e,r=!0),r&&(this._changed=r,this.check()),this},i.prototype.setLimits=function(t,e,i,r){return this._lx=i||0,this._ly=r||0,this._lw=t||1/0,this._lh=e||1/0,this.check(),this},i.prototype.check=function(){var t=this,e=(t._lx,t._ly,t._lw),i=t._lh,r=t._rect,n=r.width,o=r.height,a=e>n;this._hScroll=a,a||(r.x=0),a=i>o,this._vScroll=a,a||(r.y=0)},i.prototype.moveTo=function(t,e){var i=this,n=i._hScroll,o=i._vScroll,a=i._rect,s=i._lx,h=i._ly,c=i._lw,u=i._lh,l=a.width,p=a.height,f=a.x,d=a.y,y=this._changed;return n&&(t-=.5*l,t=r(t,s,c-l),t!=f&&(a.x=t,y=!0)),o&&(e-=.5*p,e=r(e,h,u-p),e!=d&&(a.y=e,y=!0)),this._changed=y,this},Object.defineProperty(i.prototype,"rect",{get:function(){var t=this._host;return t&&this.moveTo(t.x,t.y),this._rect},enumerable:!0,configurable:!0}),i}(egret.HashObject);t.Camera=n,__reflect(n.prototype,"jy.Camera"),t.getPosHash=e,t.getPosHash2=i}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){this._icdDisArr=[],this._duration=0}return t.prototype.addICDDisplay=function(t){this._icdDisArr.pushOnce(t)},t.prototype.removeICDDisplay=function(t){t.remove(),this._icdDisArr.remove(t)},t.prototype.start=function(){this.state=1,this._duration=0,this.icd.isCooling=!0,this.updateICDDisplay(1)},t.prototype.stop=function(){this.state=0,this.icd.isCooling=!1,this.updateICDDisplay(0)},t.prototype.updateICDDisplay=function(t){var e=this;
this._icdDisArr.forEach(function(i){i&&(1==t?i.add(e.icd.cd):i.remove())})},t.prototype.doData=function(t){this._duration+=t;var e=this.icd.cd-this._duration;0>=e&&this.stop()},t.prototype.doRender=function(t){if(1==this.state){this._duration+=t;var e=this.icd.cd-this._duration;0>=e?this.stop():this._icdDisArr.forEach(function(e){e.doRender(t)})}},t.prototype.dispose=function(){this.state=0,this.icd.isCooling=!1,this._icdDisArr.forEach(function(t){t.dispose()}),this._icdDisArr.length=0},t}();t.Cooldown=e,__reflect(e.prototype,"jy.Cooldown")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._cdObj={},this._cdArr=[],this._disObj={}}return e.prototype.addDisplay=function(t,e){var i=this._cdObj[t];i&&(i.addICDDisplay(e),this._disObj[t]=e)},e.prototype.removeDisplay=function(t){var e=this._cdObj[t];if(e){var i=this._disObj[t];i&&e.removeICDDisplay(i),delete this._disObj[t]}},e.prototype.doData=function(t){if(this._cdArr.length>0)for(var e=this._cdArr,i=e.length,r=void 0,n=i-1;n>=0;n--)r=e[n],r&&(r.doData(t),0==r.state&&this._cdArr.splice(n,1))},e.prototype.doRender=function(t){if(this._cdArr.length>0)for(var e=this._cdArr,i=e.length,r=void 0,n=i-1;n>=0;n--)r=e[n],r&&r.doRender(t)},e.prototype.add=function(e,i){if(e&&e.cd){var r=new t.Cooldown;r.icd=e;var n=e.id;this._cdObj[n]=r,i&&this.addDisplay(n,i),this._cdArr.push(r)}},e.prototype.start=function(t){var e=this._cdObj[t];e&&e.start()},e.prototype.remove=function(t){if(t){var e=this._cdObj[t];e&&(e.stop(),this._cdArr.remove(e)),this.removeDisplay(t)}},e.prototype.removeByCDTime=function(t){if(t){var e=this._cdObj,i=void 0;for(var r in e)i=e[r],i&&i.icd&&i.icd.cd==t&&this.remove(+r)}},e.prototype.dispose=function(t){if(t){var e=this._cdObj[t];e&&(e.dispose(),this._cdArr.remove(e)),delete this._cdObj[t]}},e.prototype.disposeAll=function(){var t=this._cdObj;for(var e in t){var i=t[e];i&&i.dispose()}this._cdArr.length=0,this._cdObj={},this._disObj={}},e}();t.CooldownManager=e,__reflect(e.prototype,"jy.CooldownManager")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(t,e,i){this._sl=t,this._hl=this._sl>>1,this._ox=e,this._oy=i}return t.prototype.bind=function(t){this._mask=new egret.Shape,this._g=this._mask.graphics,t&&t.addChild(this._mask)},t.prototype.unbind=function(){this._mask.parent&&this._mask.parent.removeChild(this._mask)},t.prototype.setRadian=function(e){if(this._mask.stage){var i=this._g;i.clear(),i.beginFill(t.COLOR,t.ALPHA);var r=this._hl,n=this._sl,o=this._oy,a=this._ox,s=this._x,h=this._y;e<t._45?(h=o,s=r+Math.tan(e)*r,i.moveTo(r,o),i.lineTo(r,r),i.lineTo(s,h),i.lineTo(n,o),i.lineTo(n,n),i.lineTo(a,n),i.lineTo(a,o),i.lineTo(r,o)):e>=t._45&&e<t._135?(s=n,h=r-r/Math.tan(e),i.moveTo(r,o),i.lineTo(r,r),i.lineTo(s,h),i.lineTo(n,n),i.lineTo(a,n),i.lineTo(a,o),i.lineTo(r,o)):e>=t._135&&e<t._225?(h=n,s=e>t._lt180&&e<t._gt180?r:r-r*Math.tan(e),i.moveTo(r,o),i.lineTo(r,r),i.lineTo(s,h),i.lineTo(a,n),i.lineTo(a,o),i.lineTo(r,o)):e>=t._225&&e<t._315?(s=a,h=r+r/Math.tan(e),i.moveTo(r,o),i.lineTo(r,r),i.lineTo(s,h),i.lineTo(a,o),i.lineTo(r,o)):e>=t._315&&(h=o,s=r+Math.tan(e)*r,i.moveTo(r,o),i.lineTo(r,r),i.lineTo(s,h),i.lineTo(r,o)),i.endFill()}},t.prototype.doRender=function(t){this._duration=~~this._duration+t;var e=this._deltaRadian*this._duration;this.setRadian(e)},t.prototype.add=function(e){e&&(this._deltaRadian=2*Math.PI/e),this._duration=0;var i=this._g;i.clear(),i.beginFill(t.COLOR,t.ALPHA),i.drawRect(this._ox,this._oy,this._sl,this._sl),i.endFill()},t.prototype.remove=function(){this._duration=0,this._deltaRadian=0,this._g&&this._g.clear()},t.prototype.dispose=function(){this.remove(),this.unbind()},t._45=.25*Math.PI,t._135=.75*Math.PI,t._225=1.25*Math.PI,t._315=1.75*Math.PI,t._gt180=180.1*Math.PI/180,t._lt180=179.9*Math.PI/180,t.COLOR=0,t.ALPHA=.6,t}();t.CooldownMask=e,__reflect(e.prototype,"jy.CooldownMask",["jy.ICooldownDisplay"])}(jy||(jy={}));var jy;!function(t){t.MapPB={110:{1:["columns",2,5],2:["rows",2,5],3:["gridWidth",2,5],4:["gridHeight",2,5],5:["pathdata",1,12],6:["alphadata",1,12]},111:{1:["uri",2,9],2:["layer",2,5],3:["x",2,17],4:["y",2,17],5:["scaleX",2,17],6:["scaleY",2,17],7:["duration",1,5],8:["speedX",1,17],9:["speedY",1,17],10:["seed",1,5],11:["rotation",1,17]},112:{1:["id",2,5],2:["extType",2,5],3:["type",2,5],4:["width",2,5],5:["height",2,5],6:["data",2,12],7:["effs",3,11,111],8:["lines",3,11,113],9:["ovals",3,11,114],10:["pWidth",1,5],11:["pHeight",1,5],12:["noPic",1,12]},113:{1:["id",2,5],2:["points",3,11,115],3:["flag",1,8],4:["type",1,5]},114:{1:["id",2,5],2:["a",1,5],3:["b",1,5],4:["center",2,11,115]},115:{1:["x",2,5],2:["y",2,5]},116:{1:["points",3,11,115],2:["data",1,5]},117:{1:["points",3,11,115],2:["trians",3,11,119],3:["polys",3,11,118],4:["masks",3,11,116]},118:{1:["idxs",3,5]},119:{1:["a",2,5],2:["b",2,5],3:["c",2,5]}}}(jy||(jy={}));var jy;!function(t){var e=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],i=t.Temp.EmptyObject,r=function(){function t(){this.minCacTime=5}return t.prototype.bindMap=function(t){this._map=t,this._maxLength=t.gridHeight*t.gridWidth},t.prototype.getPath=function(t,r,n,o,a,s){function h(){for(var t=Date.now(),i=function(){if(w.stop)return j.off("enterFrame",h,null),a.callAndRecycle(c(d),!1),{value:!0};var i=v.shift(),r=i.x,s=i.y,y=i.g,_=i.key;return g[_]?"continue":(g[_]=!0,r==n&&s==o?(j.off("enterFrame",h,null),a.callAndRecycle(c(d),!0),{value:!0}):(e.forEach(function(t){var e=t[0]+r,a=t[1]+s;if(!(0>e||0>a||e>=p||a>=f)){var h=l.getWalk(e,a);if(0!=h&&!g[a*p+e]){var c=e-r+a-s;c=0>c?-c:c;var d=n-e;d=0>d?-d:d;var v=o-a;v=0>v?-v:v;var _=0;(e!=r||a!=s)&&(_=1==c?10+y:14+y,_+=h),u(e,a,_,10*(d+v),i)}}}),m++,m>C?"break":Date.now()-t>b?{value:void 0}:void 0))};v.length;){var r=i();if("object"==typeof r)return r.value;if("break"===r)break}return a.callAndRecycle(c(d),!1),!0}function c(t){j.off("enterFrame",h,null);for(var e=[],i=t.step;i>0;i--)e[i-1]=t,t=t.prev;return e}function u(t,e,i,r,n){var o=e*p+t,a=y[o],s=i+r;a||(y[o]=a={key:o,x:t,y:e,g:i,h:r,f:s,prev:n,step:n?n.step+1:0}),_>r&&(_=r,d=a);var h=v.length;if(h){var c=h>>1,u=h;for(h--;u>1;)u=u+(1&u)>>1,s<=v[c].f?(c-=u,0>c&&(c=0)):(c+=u,c>h&&(c=h));s>v[c].f&&c++;for(var l=h+1;l>c;l--)v[l]=v[l-1];v[l]=a}else v[0]=a}var l=this._map;if(!l)return void a.callAndRecycle(null,!0);if(t==n&&r==o)return void a.callAndRecycle(null,!0);var p=l.columns,f=l.rows;if(t>p||r>f)return void a.callAndRecycle(null,!1);var d,y=[],v=[],g=[],_=1/0,m=0,b=this.minCacTime,w={stop:!1};u(t,r,0,10*(Math.abs(n-t)+Math.abs(o-r)));var j=egret.sys.$TempStage,x=s||i,S=x.sync,T=x.max,C=T||this._maxLength;if(S){var D=void 0;do D=h();while(!D)}else j.on("enterFrame",h,null);return w},t}();t.Astar=r,__reflect(r.prototype,"jy.Astar",["jy.PathFinder"])}(jy||(jy={}));var jy;!function(t){}(jy||(jy={}));var jy;!function(t){function e(t,e,i){return t.setTo((e.x+i.x)/2,(e.y+i.y)/2),t}function i(t,e,i,r){var n=r.pA,o=r.pB,a=r.pC,s=r.links;if(n.equals(t)){if(o.equals(e))return s[0]=i,!0;if(a.equals(e))return s[2]=i,!0}else if(o.equals(t)){if(n.equals(e))return s[0]=i,!0;if(a.equals(e))return s[1]=i,!0}else if(a.equals(t)){if(n.equals(e))return s[2]=i,!0;if(o.equals(e))return s[1]=i,!0}}var r=egret.Point,n=function(e){function i(i,n,o){var a=e.call(this)||this;return a.sides=[new t.Line,new t.Line,new t.Line],a.x=0,a.y=0,a._calced=!1,a.pA=i||new r,a.pB=n||new r,a.pC=o||new r,a.points=[i,n,o],a}return __extends(i,e),i.prototype.setPoints=function(t,e,i){var r=this,n=r.pA,o=r.pB,a=r.pC;return n.copyFrom(t),o.copyFrom(e),a.copyFrom(i),this._calced=!1,this},i.prototype.calculateData=function(){if(!this._calced){var t=this,e=t.pA,i=t.pB,r=t.pC;this.x=(e.x+i.x+r.x)/3,this.y=(e.y+i.y+r.y)/3;var n=this.sides;n[0].setPoints(e,i),n[1].setPoints(i,r),n[2].setPoints(r,e),this._calced=!0}},i.prototype.contain=function(t){return this.calculateData(),this.sides.every(function(e){return 1!=e.classifyPoint(t,1e-6)})},i}(t.Polygon);t.Triangle=n,__reflect(n.prototype,"jy.Triangle");var o=r.distance,a=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.f=0,e.h=0,e.isOpen=!1,e.parent=null,e.sessionId=0,e.links=[-1,-1,-1],e.wallMidPt=[new r,new r,new r],e.wallDist=[0,0,0],e.sideLength=[0,0,0],e.wall=-1,e}return __extends(n,t),n.prototype.init=function(){this.calculateData();var t=this,i=t.wallMidPt,n=t.wallDist,a=t.pA,s=t.pB,h=t.pC,c=t.sideLength,u=t.sides,l=e(i[0],a,s),p=e(i[1],s,h),f=e(i[2],h,a);u.forEach(function(t,e){c[e]=r.distance(t.pA,t.pB)}),n[0]=o(l,p),n[1]=o(f,p),n[2]=o(l,f)},n.prototype.checkAndLink=function(t){var e=this,r=e.pA,n=e.pB,o=e.pC,a=e.links,s=e.idx,h=t.idx;-1==a[0]&&i(r,n,s,t)?a[0]=h:-1==a[1]&&i(n,o,s,t)?a[1]=h:-1==a[2]&&i(o,r,s,t)&&(a[2]=h)},n.prototype.setWall=function(t){var e=-1,i=this.links;return t==i[0]?e=0:t==i[1]?e=1:t==i[2]&&(e=2),-1!=e&&(this.wall=e),e},n}(n);t.Cell=a,__reflect(a.prototype,"jy.Cell")}(jy||(jy={}));var jy;!function(t){function e(t,e,i){l.setTo(t,e);for(var r=i.polys,n=i.cells,o=0;o<n.length;o++){var a=n[o];if(a.contain(l))return a}var s=r[0];if(!s.contain(l))return s;for(var o=1;o<r.length;o++){var a=r[o];if(a.contain(l))return a}}function i(t,e,i,r,n){for(var o,a=i.sides,s=1/0,h=0;h<a.length;h++){var c=a[h],u=c.pA,l=c.pB,p=u.x,f=l.x-p,d=u.y,y=l.y-d,v=t-p,g=e-d,_=f*f+y*y,m=f*v+y*g;_>0&&(m/=_),0>m?m=0:m>1&&(m=1),f=p+m*f-t,y=d+m*y-e;var b=f*f+y*y;s>b&&(s=b,o=h,n&&(0==m?n.copyFrom(u):1==m?n.copyFrom(l):n.setTo(f+t,y+e)))}var w=r[i.links[o]];return w}function r(t,e,i,r){var n=t-i;n=0>n?-n:n;var o=e-r;return o=0>o?-o:o,n+o}function n(t){for(var e=t.length,i=0;e>i;i++)for(var r=t[i],n=i+1;e>n;n++){var o=t[n];r.checkAndLink(o)}}function o(t,e){function i(t,e){for(var i=t.sides,r=t.links,n=0;n<i.length;n++)for(var o=i[n],a=e.sides,s=0;s<a.length;s++){var h=a[s];if(o.equals(h)){r[n]=e.idx;break}}}for(var r=t.length,n=e.length,o=0;r>o;o++){var a=t[o];a.links=[];for(var s=0;n>s;s++){var h=e[s];i(a,h)}}}function a(t,e){return e.f-t.f}function s(t,e){var i=t.wall,r=t.sides,n=t.sideLength,o=t.wallMidPt,a=r[i],s=n[i],h=new c,u=new c;if(2*e>=s){var l=o[i];h.copyFrom(l),u.copyFrom(l)}else{var p=a.pA,f=a.pB,d=f.x-p.x,y=f.y-p.y,v=e/s;d*=v,y*=v,h.setTo(p.x+d,p.y+y),u.setTo(f.x-d,f.y-y)}return{pA:h,pB:u}}function h(t,e,i){var r=t.cell,n=t.pos,o=s(r,i),a=o.pA,h=o.pB,c=v,u=g;c.setPoints(n,a),u.setPoints(n,h);var l=r;r=r.parent;do{var p=void 0,f=void 0,d=r.parent;if(d){var y=s(r,i);p=y.pA,f=y.pB}else p=e,f=e;if(!a.equals(p)){if(2==u.classifyPoint(p))return t.cell=l,t.pos=h,!0;1!=c.classifyPoint(p)&&(a=p,l=r,c.setPB(a))}if(!h.equals(f)){if(1==c.classifyPoint(f))return t.cell=l,t.pos=a,!0;2!=u.classifyPoint(f)&&(h=f,l=r,u.setPB(h))}r=d}while(r)}var c=egret.Point,u=Math.abs,l=new c,p=0,f=t.Temp.EmptyObject,d=function(){function s(){this.openList=new t.Heap(0,a)}return s.prototype.bindMap=function(t){if(this.map=t,!t.linked){var e=t.cells,i=t.polys;n(e),o(i,e),t.linked=!0}this.openList.clear(t.cells.length)},s.prototype.getPath=function(n,o,a,s,d,v){var g=this.map;if(!g)return void d.callAndRecycle(null,!0);if(n==a&&o==s)return void d.callAndRecycle(null,!0);var _=g.cells,m=new c(a,s);if(!_)return void d.callAndRecycle([m],!0);v=v||f;var b=v.start,w=v.end,j=v.width,x=void 0===j?0:j;if(b||(b=e(n,o,g)),!b)return void d.callAndRecycle(null,!0);if(w||(w=e(a,s,g)),!w)return void d.callAndRecycle(null,!0);if(b==w){var S=null;return b instanceof t.Cell&&(S=[m]),void d.callAndRecycle(S,!0)}var T=new c(n,o);p++;var C,D;if(w instanceof t.Cell)C=w;else{if(C=i(a,s,w,_,l),!C)return void d.callAndRecycle(null,!0);m.copyFrom(l)}if(b instanceof t.Cell)D=b;else if(D=i(n,o,b,_),!D)return void d.callAndRecycle(null,!0);if(D==C)return void d.callAndRecycle([m],!0);C.f=0,C.h=0,C.isOpen=!1,C.parent=null,C.sessionId=p;var k=this.openList;k.clear(),k.put(C);for(var R;k.size>0;){var B=k.pop();if(B==D){R=B;break}for(var P=B.links,M=0;3>M;M++){var O=P[M];if(!(0>O)){var I=_[O];if(I){var A=B.f+I.wallDist[u(M-B.wall)]||0;I.sessionId!=p?(I.sessionId=p,I.parent=B,I.isOpen=!0,I.h=r(n,o,I.x,I.y),I.f=A,k.put(I),I.setWall(B.idx)):I.isOpen&&A<I.f&&(I.f=B.f,I.parent=B,I.setWall(B.idx))}}}}var L;if(R){for(L=[],y.cell=R,y.pos=T;h(y,m,x);)L.push(y.pos);L.push(m)}d.callAndRecycle(L,!0)},s}();t.NavMeshFinder=d,__reflect(d.prototype,"jy.NavMeshFinder",["jy.PathFinder"]);var y={cell:null,pos:null},v=new t.Line,g=new t.Line}(jy||(jy={}));var jy;!function(t){new egret.Rectangle}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,i,r,n){void 0===n&&(n=150),this._eR=e;var o=e/Math.PI2*n;return 0>t&&(t=-t),this._swing=t,this._dRad=e/o,this._dSwing=-t/o,this._total=o,this.setTargetPos(i,r),this},e.prototype.tick=function(t,e){var i=t*this._dRad,r=this._swing+t*this._dSwing;e.x=Math.round(this._cx+r*Math.cos(i)),e.y=Math.round(this._cy+r*Math.sin(i))},e}(t.BaseShake);t.CircleShake=e,__reflect(e.prototype,"jy.CircleShake")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init1=function(t,e,i,r,n,o,a,s,h){void 0===a&&(a=30),void 0===s&&(s=3),void 0===h&&(h=90);var c=i-t,u=r-e,l=Math.sqrt(c*c+u*u);this.init(c/l,u/l,n,o,a,s,h)},e.prototype.init2=function(t,e,i,r,n,o){void 0===r&&(r=30),void 0===n&&(n=3),void 0===o&&(o=90),this.init(Math.cos(t),Math.sin(t),e,i,r,n,o)},e.prototype.init=function(t,e,i,r,n,o,a){void 0===n&&(n=30),void 0===o&&(o=3),void 0===a&&(a=90),30>~~a&&(a=30),1>~~o&&(o=1);var s=a*o;return this._dSwing=-n/s,this._dRad=Math.PI/a,this._count=o,this.setTargetPos(i,r),this._cos=t,this._sin=e,this._total=s,this},e.prototype.tick=function(t,e){var i=this._dSwing*t*Math.sin(t*this._dRad);e.x=Math.round(this._cx+this._cos*i),e.y=Math.round(this._cy+this._sin*i)},e}(t.BaseShake);t.DirectionShake=e,__reflect(e.prototype,"jy.DirectionShake")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,i,r,n,o){return void 0===i&&(i=30),void 0===o&&(o=150),this._sR=t,this._eR=e,this._swing=i,this._dRad=(e-t)/o,this.setTargetPos(r,n),this},e.prototype.tick=function(t,e){var i=t*this._dRad,r=this._swing+Math.sin(t*Math.PI);e.x=Math.round(this._cx+r*Math.cos(i)),e.y=Math.round(this._cy+r*Math.sin(i))},e}(t.BaseShake);t.RotateShake=e,__reflect(e.prototype,"jy.RotateShake")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.shakable=!0,this._pt={x:0,y:0},this._tmp=new egret.Rectangle}return e.prototype.setLimits=function(t,e,i,r){return void 0===t&&(t=1/0),void 0===e&&(e=1/0),void 0===i&&(i=0),void 0===r&&(r=0),this._limits=new egret.Rectangle(i,r,t,e),this},e.prototype.start=function(e){if(this.shakable){var i=this._cur;i&&i.end(),this._cur=e;var r=t.GameEngine.instance,n=r.getLayer(1e3);i!=e&&e.setShakeTarget(n),e.setTargetPos().start(),this._st=t.Global.now,egret.startTick(this.tick,this)}return e},e.prototype.tick=function(){var e=this._cur,i=t.Global.now-this._st;if(i<e.total){var r=this._pt,n=this._cur;n.tick(i,r);var o=n.target,a=this._limits,s=r.x,h=r.y,c=s,u=h;if(a){var l=t.GameEngine.instance.viewRect;if(0>s){var p=a.x,f=l.x;c=f+s>p?s:p}else{var d=a.width-l.width;c=d>s?s:d}if(0>h){var y=a.y,v=l.y;u=v+h>y?s:y}else{var g=a.height-l.height;u=g>h?h:g}}o.x=c,o.y=u}else e.end();return!0},e}();t.ScreenShakeManager=e,__reflect(e.prototype,"jy.ScreenShakeManager")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getAction=function(e){return e in this.actions?this.actions[e]:t.UnitAction.defaultAction},i}(t.UnitAction);t.MUnitAction=e,__reflect(e.prototype,"jy.MUnitAction")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.checkResList=function(e,i){for(var r,n=this.$children,o=0,a=n.length,s=0,h=e;s<h.length;s++){var c=h[s],u=i[c];u&&(a>o?r=n[o++]:(r=t.recyclable(t.ResourceBitmap),this.addChild(r)),r.res=u)}for(var l=a-1;l>=o;l--)r=this.$doRemoveChild(l),r.recycle()},i.prototype.renderFrame=function(t,e,i,r){var n;t?(n=t.d,-1==n&&(n=i),r.f=t.f,r.a=t.a):n=i;var o=1;return n>4&&(o=-1,n=8-n),r.d=n,this.scaleX=o,this.draw(r,e)},i.prototype.draw=function(t,e){for(var i=!0,r=0,n=this.$children;r<n.length;r++){var o=n[r];i=o.draw(t,e)&&i}return i},i.prototype.clear=function(){this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this.x=0,this.y=0;for(var t=this.$children,e=0,i=t;e<i.length;e++){var r=i[e];r.recycle()}},i.prototype.onRecycle=function(){t.removeDisplay(this),this.clear()},i}(egret.DisplayObjectContainer);t.UModel=e,__reflect(e.prototype,"jy.UModel")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._mountType=0,t._z=0,t._rotation=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"playSpeed",{get:function(){return this._render.playSpeed},set:function(t){this._render.playSpeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resDict",{get:function(){return this._resDict},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pst",{set:function(t){var e=this.getPstInfo(t);e!=this._pstInfo&&(this._pstInfo=e,this.pstInfoChange())},enumerable:!0,configurable:!0}),i.prototype.init=function(t,e){return this._resDict={},this.initDisplayList(e),this.pst=t,this.initDefaultAction(),this.startUnitAction(),this.onSpawn(),this},i.prototype.onSpawn=function(){1!=this.state&&(this.state=0),this.dispatch(-1998)},i.prototype.resetRenderTime=function(t){this._render.reset(t)},i.prototype.initDisplayList=function(e){var i=new t.UnitRender(this),r=e.modelRef||t.UModel,n=new r,o=new t.DSprite;this._render=i,i.model=n,this._model=n,this.body=o,o.addChild(n),this._depth=e.getDepth(),e.addToEngine&&this.addedToEngine()},Object.defineProperty(i.prototype,"faceTo",{get:function(){return this._render.faceTo},set:function(t){this.$setFaceTo(t)},enumerable:!0,configurable:!0}),i.prototype.$setFaceTo=function(t){this._render.faceTo=t>>0},i.prototype.doCustomAction=function(t,e){void 0===e&&(e=-1);var i=this._render,r=t.key;this._action!=r&&(this._action=r,i.actionInfo=t,e=0),e>-1&&(i.f=e)},i.prototype.doAction=function(t,e,i){void 0===i&&(i=-1);var r=this._render;return e=~~e,this._action!=e&&(this._action=e,r.actionInfo=this._pstInfo.frames[e],r.reset(t),i=0),i>-1&&(r.f=i),r.actionInfo},i.prototype.getCurAction=function(){return this._render.actionInfo},i.prototype.setRes=function(t,e,i){var r,n=this._resDict[t];if(e){var o=void 0;o=i?this.getPstInfo(i):this._pstInfo,o&&(r=o.getUnitResource(e))}return r!=n&&(this._resDict[t]=r,this.invalidateResList()),r},i.prototype.invalidateResList=function(){this._resListChange=!0},i.prototype.refreshResList=function(){this._resListChange&&(this.checkResList(this._partList),this._resListChange=!1)},i.prototype.checkResList=function(t,e){this._model.checkResList(t||this._partList,e||this._resDict)},i.prototype.$render=function(){var e=t.Global.now;this.refreshResList();var i=this._currentAction;i&&(i.doData(this,e),i.doRender(this,e)),this._render.render(e)},i.prototype.doData=function(t){var e=this._currentAction;e&&e.doData(this,t),this._render.doData(t)},i.prototype.doRender=function(t){this.refreshResList();var e=this._currentAction;e&&e.doRender(this,t),this._render.doRender(t)},i.prototype.onRecycle=function(){var e=this,i=e._model,r=e.$render,n=e.onStage,o=e.body,a=e._resDict;t.removeDisplay(o),i.off("enterFrame",r,this),i.off("addedToStage",n,this),i.off("removedFromStage",n,this),i.clear(),this.rotation=0,this.z=0;for(var s in a)delete a[s];var h=this._currentAction;h&&(h.recycle(),this._currentAction=void 0);var c=this._nextAction;c&&(c.recycle(),this._nextAction=void 0),this._action=void 0,this._render&&this._render.reset(0),this.lastFrame=void 0,this.dispatch(-1999)},i.prototype.initDefaultAction=function(){this.aStandBy=new t.UnitAction},i.prototype.startUnitAction=function(t,e,i){1==this.state&&this._startUA(t,e,i)},i.prototype._startUA=function(e,i,r){var n=this._nextAction;n!=e&&(n&&n.recycle(),this._nextAction=e,n=e),n||(n=this.aStandBy),i=i||t.Global.now;var o=this._currentAction,a=!1;return o?o!=n?o.isEnd?(o.recycle(),a=!0):(r||o.canStop)&&(o.terminate(),o.recycle(),a=!0):this._nextAction=void 0:a=!0,a&&(o=void 0,n&&(n.start(this,i)?o=n:n.recycle(),this._nextAction=void 0)),o||(o=this.aStandBy),this._currentAction=o,o.playAction(this,this._mountType,i),a},i.prototype.stopUnitAction=function(t){this._startUA(null,t,!0)},i.prototype.setMountType=function(t){t!=this._mountType&&(this._mountType=t)},i.prototype.playComplete=function(t){var e,i=this._currentAction;i?(i.playComplete(this,t),i.isEnd?(e=!0,this.onActionEnd()):i.playAction(this,this._mountType,t)):e=!0,e&&this.startUnitAction(this._nextAction,t)},i.prototype.onRenderFrame=function(t){var e=this._currentAction;if(e){if(!e.isEnd)return;this.onActionEnd()}this.startUnitAction(this._nextAction,t)},i.prototype.onActionEnd=function(){},i.prototype.fire=function(t,e){var i=this._currentAction;i&&i.dispatchEvent(this,t,e)},i.prototype.addedToEngine=function(e){void 0===e&&(e=!0),t.GameEngine.instance.getLayer(1760).addChild(this.body),e&&this.play(),this.state=1,this.dispatch(-1997)},i.prototype.addToContainer=function(t,e){void 0===e&&(e=!0),t.addChild(this.body),e&&this.play(),this.state=1,this.dispatch(-1997)},i.prototype.play=function(){var t=this,e=t._model,i=t.onStage,r=t.$render;e.on("addedToStage",i,this),e.on("removedFromStage",i,this),e.stage&&e.on("enterFrame",r,this)},i.prototype.onStage=function(t){var e=this,i=e._model,r=e.$render,n="enterFrame";"addedToStage"==t.type?i.on(n,r,this):i.off(n,r,this)},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),i.prototype.$setX=function(t){t=t||0,this._x!=t&&(this._x=t,this.checkPosition())},Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),i.prototype.$setY=function(e){e=e||0,this._y!=e&&(this._y=e,this.checkPosition(),t.GameEngine.invalidateSort())},Object.defineProperty(i.prototype,"z",{get:function(){return this._z},set:function(t){this.$setZ(t)},enumerable:!0,configurable:!0}),i.prototype.$setZ=function(t){t=t||0,this._z!=t&&(this._z=t,this.checkPosition())},i.prototype.checkPosition=function(){var t=this.body;t&&(t.depth=this._depth+this._y||0,t.y=this._y+this._z||0,t.x=this._x||0)},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){if(this._rotation!=t){this._rotation=t;var e=this._model;e.scaleX>=0?e.rotation=t:e.rotation=-t}},enumerable:!0,configurable:!0}),i.prototype.getTexture=function(t,e){if(e=e||this._render){var i=this._resDict[t];if(i)return i.getTexture(e)}},i}(egret.EventDispatcher);t.Unit=e,__reflect(e.prototype,"jy.Unit")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._domains={},this._domainCounts={},this._domains[0]=this._domainAll={},this._domainCounts[0]=0}return e.prototype.registerUnit=function(){for(var t=arguments,e=t[0],i=e.guid,r=this,n=r._domains,o=r._domainCounts,a=r._domainAll,s=1;s<t.length;s++){var h=t[s],c=n[h],u=~~o[h];c||(c={},n[h]=c),c[i]||(o[h]=u+1),c[i]=e}if(!a[i]){var u=~~o[0];o[0]=u+1}a[i]=e},e.prototype.removeUnit=function(t){var e=this._domainAll[t];if(e){var i=this,r=i._domainCounts,n=i._domains;for(var o in n){var a=n[o],s=a[t];s&&(r[o]--,delete a[t])}}return e},e.prototype.get=function(t){return this._domains[t]},e.prototype.getCount=function(t){return this._domainCounts[t]||0},e.prototype.getUnit=function(t){return this._domainAll[t]},e.prototype.clear=function(){for(var e={},i=arguments,r=0;r<i.length;r++){var n=i[r];n&&(e[n]=!0)}var o=t.Temp.SharedArray1,a=0;for(var n in this._domainAll){var s=n;s==+s&&(s=+s),e&&e[n]||(o[a++]=n)}for(o.length=a;--a>=0;)this.removeUnit(o[a]);o.length=0},e.prototype.clearDomain=function(){for(var e=this,i=e._domains,r=(e._domainCounts,t.Temp.SharedArray1),n=0,o=arguments,a=0;a<o.length;a++){var s=o[a],h=i[s];if(h)for(var c in h)r[n++]=c}for(r.length=n;--n>=0;)this.removeUnit(r[n]);r.length=0},e}();t.UnitController=e,__reflect(e.prototype,"jy.UnitController")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r.faceTo=0,r.nextRenderTime=0,r.renderedTime=0,r.unit=i,r.reset(t.Global.now),r}return __extends(i,e),i.prototype.reset=function(t){this.renderedTime=t,this.nextRenderTime=t,this.idx=0},i.prototype.doData=function(t){var e=this.actionInfo;e&&this.onData(e,t)},i.prototype.render=function(t){var e=this.actionInfo;e&&(this.onData(e,t),this.doRender(t))},i.prototype.onData=function(t,i){e.prototype.onData.call(this,t,i),this.unit.lastFrame=this.willRenderFrame},i.prototype.clearRes=function(){for(var t=0,e=this.model.$children;t<e.length;t++){var i=e[t];i.texture=void 0}},i.prototype.renderFrame=function(t,e){var i=this.model.renderFrame(t,e,this.faceTo,this);this.unit.onRenderFrame(e),i&&(this.willRenderFrame=void 0)},i.prototype.dispatchEvent=function(t,e){this.unit.fire(t,e)},i.prototype.doComplete=function(t){this.unit.playComplete(t)},i.prototype.dispose=function(){this.unit=void 0},i}(t.BaseRender);t.UnitRender=e,__reflect(e.prototype,"jy.UnitRender")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){this.hasUILayer=!0,this.hasBuffLayer=!0,this.hasHaloLayer=!0,this.addToEngine=!0,this.depthA=0,this.depthB=.19}return t.prototype.getDepth=function(){return this.depthA+Math.random()*this.depthB},t}();t.UnitSetting=e,__reflect(e.prototype,"jy.UnitSetting"),t.defaultUnitSetting=new e}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return e.prototype.init=function(t){return void 0===t&&(t=4),1>t&&(t=1),this._max=t,this._count=0,this._head=void 0,this._tail=void 0,this},e.prototype.record=function(e,i){if(e){var r=void 0;this._count<this._max?(r=t.recyclable(t.PSeries),this._head=r):(r=this._head,this._head=r.next,this._head.prev=void 0,r.next=void 0),r.record(e,i);var n={};r.resDict=n,e.resDict.copyto(n);var o=this._tail;return o&&(o.next=r,r.prev=o),this._tail=r,r}},e.prototype.getByIndex=function(t,e){var i,r=0;if(e)for(i=this._tail;i&&r++<t;)i=i.prev;else for(i=this._head;i&&r++<t;)i=i.next;return r==t?i:void 0},e.prototype.getSeries=function(t,e){t=t||[];var i,r=0,n=this._max;if(e)for(i=this._tail;i&&r++<n;)t.push(i),i=i.prev;else for(i=this._head;i&&r++<n;)t.push(i),i=i.next},e.prototype.onRecycle=function(){for(var t=this._head,e=this._max,i=0;t&&i++<e;)t.recycle();this._head=void 0,this._tail=void 0},e}();t.PSRecorder=e,__reflect(e.prototype,"jy.PSRecorder")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){}return t.prototype.record=function(t,e){this.t=e,this.x=t.x,this.y=t.y,this.z=t.z,this.faceTo=t.faceTo,this.frame=t.lastFrame},t}();t.PSeries=e,__reflect(e.prototype,"jy.PSeries")}(jy||(jy={}));var jy;!function(t){function e(t){if(!(2>t||1&t)){var e=i[t];if(!e){for(var r=t>>1,n=r+1,o=[],a=r-1;a>=0;a--)o.push(Math.tan(Math.PI/t*n+Math.PI/r*a));for(var s=new Array(t),a=0;r>a;a++)s[a]=r+a,s[r+a]=a;for(var h=new Array(t),c=new Array(t),u=new Array(t),l=new Array(t),p=180,f=360/t,d=Math.PI,y=Math.PI2/t,v=Math.sin,g=Math.cos,a=0;t>a;a++){h[a]=p-a*f;var _=d-a*y;c[a]=_,u[a]=v(_),l[a]=g(_)}e={face0Deg:p,face0Rad:d,total:t,getFace:function(e,i,n,a){var s=(a-i)/(n-e),h=r;if(n>=e){for(var c=0;r>c;c++)if(s>o[c]){h=c;break}}else{for(var c=r;c>=1;c--)if(s<=o[c]){h=r+c+1;break}h==t&&(h=0)}return h},getOpps:function(t){return s[t]},getDeg:function(t){return h[t]},getRad:function(t){return c[t]},getRadSin:function(t){return u[t]},getRadCos:function(t){return l[t]}}}return e}}var i={};t.getFaceUtil=e}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.isReady=!1}return e.prototype.readyNow=function(){if(!this.isReady){this.isReady=!0;var t=this._cbs;if(t){var e=t.concat();t.length=0;for(var i=0;i<e.length;i++){var r=e[i];r.execute()}}}},e.prototype.addReadyExecute=function(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(this.isReady)return e.apply(i,r);var o=this._cbs;o||(this._cbs=o=[]),t.CallbackInfo.addToList.apply(t.CallbackInfo,[o,e,i].concat(r))},e}();t.AsyncHelper=e,__reflect(e.prototype,"jy.AsyncHelper")}(jy||(jy={}));var jy;!function(t){var e=function(){function t(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];this._host=t,this._callback=e,this._args=i,this._unreadyDepender=[]}return t.prototype.addDepend=function(t){t.isReady?this.readyHandler(t):(this._unreadyDepender.push(t),t.addReadyExecute(this.readyHandler,this,t))},t.prototype.readyHandler=function(t){this._unreadyDepender.remove(t),this.check()},t.prototype.check=function(){this._uncheck||(this._uncheck=!0,egret.callLater(this._check,this))},t.prototype._check=function(){this._uncheck=!1;for(var t=!0,e=0,i=this._unreadyDepender;e<i.length;e++){var r=i[e];r.isReady||(r.startSync(),t=!1)}t&&this._callback&&(this._unreadyDepender.length=0,this._callback.apply(this._host,this._args))},t}();t.DependerHelper=e,__reflect(e.prototype,"jy.DependerHelper")}(jy||(jy={}));var jy;!function(t){function e(t){return t&&(i in t||"function"!=typeof t[i])&&r in t&&"function"==typeof t[r]&&0==t[r].length?!0:!1}var i="addReadyExecute",r="startSync";t.isIAsync=e}(jy||(jy={}));var jy;!function(t){function e(){return t.facade.getProxy.apply(t.facade,arguments)}function i(){return t.facade.executeProxy.apply(t.facade,arguments)}function r(){return t.facade.getMediator.apply(t.facade,arguments)}function n(){return t.facade.executeMediator.apply(t.facade,arguments)}function o(e,i){t.facade.dispatch(e,i)}function a(e,i,r,n){void 0===r&&(r=!0),t.facade.toggle(e,i,r,n)}function s(e,i,r,n){t.facade.on(e,i,r,!1,n)}function h(e,i,r,n){t.facade.once(e,i,r,!1,n)}function c(e,i,r){t.facade.off(e,i,r,!1)}function u(e){return t.facade.hasListen(e)}var l=function(e){function i(){var t=e.call(this)||this;return t._mediators={},t._scripts={},t._proxys={},t._indecting=[],t}return __extends(i,e),i.getNameOfInline=function(t,e){e=e||egret.getQualifiedClassName(t);var i;return i="NAME"in t?t.NAME:e.substr(e.lastIndexOf(".")+1)},i.prototype.bindModuleManager=function(t){t.init(),this._mm=t},Object.defineProperty(i.prototype,"mm",{get:function(){return this._mm},enumerable:!0,configurable:!0}),i.prototype._removeHost=function(t,e){var i,r=e[t];return r&&(delete e[t],i=r.host,i&&i.onRemove()),i},i.prototype.removeMediator=function(t){return this._removeHost(t,this._mediators)},i.prototype.removeProxy=function(t){var e=this._proxys[t];if(!e.host._$isDep)return this._removeHost(t,this._proxys)},i.prototype.registerInlineProxy=function(e,i,r){if(e){var n=this._proxys;if(this.regConfig(e,i,n),!r){var o=n[i],a=new e;o.host=a,t.facade.inject(a),a.onRegister()}}},i.prototype.registerInlineMediator=function(t,e){t&&this.regConfig(t,e,this._mediators)},i.prototype.regConfig=function(t,e,i,r,n){var o;o={},o.scriptid=n,"string"==typeof t?o.className=t:o.ref=t,o.name=e,o.url=r,i[e]=o},i.prototype.getOrCreateScript=function(e){var i=e.scriptid,r=this._scripts[i];return r||(r=new t.ModuleScript,r.id=i,r.url=e.url,this._scripts[i]=r),r},i.prototype.getProxy=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var o=this._proxys[t];if(o){var a={};return a.dele=o,a.callback=e,a.thisObj=i,a.args=r,this._solveScriptCallback(a)}},i.prototype.getProxySync=function(t){var e=this._proxys[t];return e?e.host:void 0},i.prototype.getMediator=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var o=this._mediators[t];if(o){var a={};return a.dele=o,a.callback=e,a.thisObj=i,a.args=r,this._solveScriptCallback(a)}},i.prototype.getMediatorSync=function(t){var e=this._mediators[t];return e?e.host:void 0},i.prototype._solveScriptCallback=function(e){var i=e.dele;
if(i.scriptid){var r=this.getOrCreateScript(i);if(2!=r.state)return r.callbacks.push(t.CallbackInfo.get(this._getHost,this,e)),void r.load()}return this._getHost(e)},i.prototype._getHost=function(e){var i=e.dele,r=i.host;if(!r){var n=i.ref;n||(i.ref=n=egret.getDefinitionByName(i.className)),i.host=r=new n,t.facade.inject(r),r.onRegister()}var o=e.callback;return r.isReady?o&&o.call.apply(o,[e.thisObj,r].concat(e.args)):(o&&r.addReadyExecute.apply(r,[o,e.thisObj,r].concat(e.args)),r.startSync()),r},i.prototype.toggle=function(t,e,i,r){void 0===i&&(i=!0),this._mm&&this._mm.toggle(t,e,i,r)},i.prototype.executeMediator=function(t,e,i,r){for(var n=[],o=4;o<arguments.length;o++)n[o-4]=arguments[o];if(this._mm&&this._mm.isModuleOpened(t,e)){var a=r?this._executeAndShowMediator:this._executeMediator;return this.getMediator.apply(this,[t,a,this,i].concat(n))}},i.prototype.$executeMediator=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this.getMediator(t,this._executeMediator,this,i)},i.prototype._executeMediator=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];"function"==typeof t[e]&&t[e].apply(t,i)},i.prototype._executeAndShowMediator=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];this.toggle(t.name,1,!1),this._executeMediator.apply(this,[t,e].concat(i))},i.prototype.executeProxy=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this.getProxy.apply(this,[t,this._executeProxy,this,e].concat(i))},i.prototype._executeProxy=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];"function"==typeof t[e]&&t[e].apply(t,i)},i.prototype.inject=function(t){var e=this._indecting;if(!~e.indexOf(t)){e.push(t),this.doInject(t);var i=e.indexOf(t);e.splice(i,1)}},i.prototype.doInject=function(t){},i.Script="modules/{0}.js",i}(egret.EventDispatcher);t.Facade=l,__reflect(l.prototype,"jy.Facade"),t.facade=new l,t.proxyCall=e,t.proxyExec=i,t.mediatorCall=r,t.mediatorExec=n,t.dispatch=o,t.toggle=a,t.on=s,t.once=h,t.off=c,t.hasListen=u}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.init&&i.init(),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this.$view},set:function(e){var i=this.$view;i!=e&&(this.removeSkinListener(i),this.$view=e,this.addSkinListener(e),e.moduleID=this._name,t.isIAsync(e)?e.addReadyExecute(this.viewComplete,this):this.viewComplete())},enumerable:!0,configurable:!0}),i.prototype.startSync=function(){if(t.isIAsync(this.$view)){var e=this.$view;e.isReady?this.viewComplete():(e.addReadyExecute(this.viewComplete,this),e.startSync())}},i.prototype.viewComplete=function(){var e=!0,i=this.$view;t.isIAsync(i)&&(e=i.isReady),this.viewReady=e,this.viewCheck(e)&&(this._dependerHelper?this._dependerHelper.check():this.dependerReadyCheck())},i.prototype.viewCheck=function(t){return t},i.prototype.dependerReadyCheck=function(){this.viewReady&&(this._ready||(this._ready=!0,this.afterAllReady(),this.$view.stage&&this.stageChange(!0),this._asyncHelper&&this._asyncHelper.readyNow()))},i.prototype.hide=function(){t.toggle(this._name,-1)},i}(t.ViewController);t.Mediator=e,__reflect(e.prototype,"jy.Mediator")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.state=0,this.callbacks=[]}return e.prototype.load=function(){if(0==this.state){var e=this.url||t.Facade.Script.substitute(this.id);loadScript(e,this.onScriptLoaded,this),this.state=1}},e.prototype.onScriptLoaded=function(t){this.state=t?-1:2;var e=this.callbacks.concat();this.callbacks.length=0;for(var i=0,r=e;i<r.length;i++){var n=r[i];n.execute()}},e}();t.ModuleScript=e,__reflect(e.prototype,"jy.ModuleScript")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.onRegister=function(){this._ns=t.NetService.get()},i.prototype._startSync=function(){this.selfReady()},i.prototype.reg=function(){function t(t,i,r){e.register(t,i),e.regReceiveMSGRef(t,r)}for(var e=this._ns,i=arguments,r=0;r<i.length;r+=3){var n=i[r],o=i[r+1],a=i[r+2];if(a=a.bind(this),Array.isArray(n))for(var s=0;s<n.length;s++)t(n[s],a,o);else t(n,a,o)}},i.prototype.regMsg=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=this._ns,n=0,o=e;n<o.length;n++){var a=o[n];r.regReceiveMSGRef(a,t)}},i.prototype.regHandler=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=this._ns,n=0,o=e;n<o.length;n++){var a=o[n];r.register(a,t)}},i.prototype.removeHandler=function(t,e){this._ns.remove(t,e)},i.prototype.send=function(t,e,i,r){void 0===r&&(r=200),this._ns.send(t,e,i,r)},i}(t.Proxy);t.Service=e,__reflect(e.prototype,"jy.Service")}(jy||(jy={}));var jy;!function(t){function e(e,i,r){var n=e;return void 0===n.awakeBy&&(n.awakeBy=i||function(e){if("function"!=typeof n.awakeCheck||n.awakeCheck()){var i=this._view;i instanceof t.Panel&&i.show()}}),void 0===n.sleepBy&&(n.sleepBy=r||function(e){var i=this._view;i instanceof t.Panel&&i.hide()}),n}t.transformToStateMediator=e}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this.showState=0,this.serverOpen=!0}return e.prototype.init=function(e){e=e||this,t.DataUtils.parseDatas(this,e,0,3,"showlimit","showlimits"),t.DataUtils.parseDatas(this,e,0,3,"limit","limits")},e}();t.BaseMCfg=e,__reflect(e.prototype,"jy.BaseMCfg")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._needCheck=!1,this._needCheckShow=!1}return e.prototype.init=function(){this._bindedIOById=[],this._hByType=[],this._checkers=[],this._allById={},this._unshowns=[],this._unopens=[],this._hById={},this._ioBind=new Map,t.on(-993,this.check,this)},e.prototype.setCfgs=function(t){this._allById=t,this.doCheckLimits()},e.prototype.registerHandler=function(t,e){this._hByType[t]=e},e.prototype.registerHandlerById=function(e,i){var r=this._allById[e];r?this._hById[e]=i:t.ThrowError("ModuleManager 注册模块处理函数时，没有找到对应的模块配置，模块id:"+e)},Object.defineProperty(e.prototype,"checkers",{set:function(t){this._checkers=t,this.doCheckLimits()},enumerable:!0,configurable:!0}),e.prototype.doCheckLimits=function(){this._needCheck=!0,egret.callLater(this.checkLimits,this)},e.prototype.checkLimits=function(){if(this._needCheck){this._needCheck=!1;var e=this,i=e._checkers,r=e._allById,n=e._unopens,o=e._unshowns,a=e._bindedIOById;if(n.length=0,o.length=0,i){var s=void 0;for(var h in r){var c=r[h],u=c.showtype;s=i[u];var l=c.limittype;if(s=i[l],u==l&&s&&s.adjustLimitDatas(c.showlimits,c.limits),!this.isModuleShow(c)){var p=c.id;o.push(p);var f=a[p];if(f)for(var d=0;d<f.length;d++)f[d].visible=!1}this.isModuleOpened(c)||n.push(h)}t.dispatch(-998)}}},e.prototype.isModuleShow=function(t){var e=this.getCfg(t),i=e&&2!=e.close;if(i&&this._checkers){var r=this._checkers[e.showtype];r&&(i=r.check(e.showlimits,!1))}return i},e.prototype.isModuleOpened=function(t,e){this.getCfg(t);return!0},e.prototype.bindButton=function(e,i,r){if(void 0===r&&(r="touchTap"),this._ioBind.has(i))return void t.ThrowError("ModuleManager 注册按钮时候，重复注册了按钮");var n=this._allById[e];if(!n)return void t.ThrowError("ModuleManager 注册按钮时候，没有找到对应的模块配置，模块id:"+e);var o=this._bindedIOById[e];if(o||(this._bindedIOById[e]=o=[]),o.push(i),this._ioBind.set(i,e),i.on(r,this.ioHandler,this),this.createToolTip){var a=this.createToolTip(n);a&&t.ToolTipManager.register(i,a)}var s=this._unshowns;this.isModuleShow(e)?s.remove(e):(i.visible=!1,s.pushOnce(e))},e.prototype.ioHandler=function(t){this.toggle(this._ioBind.get(t.currentTarget))},e.prototype.check=function(){this._needCheckShow=!0,egret.callLater(this._check,this)},e.prototype._check=function(){if(this._needCheckShow){this._needCheckShow=!1;for(var e=!1,i=this,r=i._allById,n=i._unshowns,o=i._unopens,a=0,s=0;s<n.length;s++){var h=n[s],c=r[h];if(this.isModuleShow(c)){var u=c.onShow;if(u){c.onShow=void 0;for(var l=0;l<u.length;l++){var p=u[l];p.execute()}}var f=this._bindedIOById[h];if(f)for(var d=0,y=f;d<y.length;d++){var v=y[d];v.visible=!0}e=!0}else n[a++]=h}n.length=a,a=0;for(var s=0;s<o.length;s++){var h=o[s],c=r[h];if(this.isModuleOpened(c)){var g=c.onOpen;if(g){c.onOpen=void 0;for(var l=0;l<g.length;l++){var p=g[l];p.execute()}}}else o[a++]=h}o.length=a,e&&t.dispatch(-994,n.length)}},e.prototype.resetLimits=function(){for(var t=this,e=t._allById,i=t._unshowns,r=t._unopens,n=0;n<i.length;n++){var o=i[n],a=e[o],s=a.onShow;if(s){a.onShow=void 0;for(var h=0;h<s.length;h++){var c=s[h];c.recycle()}}}for(var n=0;n<r.length;n++){var o=r[n],a=e[o],u=a.onOpen;if(u){a.onOpen=void 0;for(var h=0;h<u.length;h++){var c=u[h];c.recycle()}}}this.checkLimits()},e.prototype.toggle=function(e,i,r,n){void 0===r&&(r=!0);var o=this._allById[e];if(o){t.dispatch(-997,e);var a;switch(i=~~i){case 0:switch(o.showState){case 0:case 3:a=!0}break;case 1:a=!0}if(!a||this.isModuleOpened(o,r)){var s=this._hById[e];return s||(s=this._hByType[o.type]),a?s.show(o,n):s.hide(o,n),!0}}},e.prototype.getCfg=function(t){return"object"==typeof t?t:this._allById[t]},e.prototype.serverChangeModuleState=function(e,i){var r=this._allById[e];r&&i!=r.serverOpen&&(r.serverOpen=i,t.dispatch(i?-995:-996,e))},e.prototype.regModuleOpen=function(t,e){var i=this._allById[t];if(i)if(this.isModuleOpened(i))e.execute();else{var r=i.onOpen;r||(i.onOpen=r=[]),r.pushOnce(e)}},e.prototype.regModuleShow=function(t,e){var i=this._allById[t];if(i)if(this.isModuleShow(i))e.execute();else{var r=i.onShow;r||(i.onShow=r=[]),r.pushOnce(e)}},e}();t.ModuleManager=e,__reflect(e.prototype,"jy.ModuleManager")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._engine=t.GameEngine.instance,this._bmp=new egret.Bitmap,this._stage=egret.sys.$TempStage,this._con=new egret.Sprite,this._tex=new egret.RenderTexture,this._dic={}}return e.prototype.regModuleLayers=function(t){for(var e=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=this,o=n._dic,a=(n._engine,i.map(function(t){return e._engine.getLayer(t)}));a.doSort("id"),o[t]=a},e.prototype.checkShowBlur=function(t){var e=this._dic,i=e[t];this._current=t,i&&i.length&&(this._stage.on("resize",this.drawBlur,this),this.drawBlur())},e.prototype.checkHideBlur=function(t){this._current=t;var e=this._dic,i=e[t];i&&i.length&&this.hideBlur()},e.prototype.drawBlur=function(e){e&&t.dispatch(-1998);var i=this._tex,r=this._bmp,n=this._stage,o=this._dic[this._current];if(o){for(var a=this._con,s=o.length,h=0;s>h;h++){var c=o[h];a.addChild(c)}i.drawToTexture(a),a.removeChildren(),r.texture=i,r.refreshBMD(),r.filters=t.FilterUtils.blur,n.addChildAt(r,0)}},e.prototype.hideBlur=function(){this._stage.off("resize",this.drawBlur,this),t.removeDisplay(this._bmp),this._tex.$renderBuffer.resize(0,0);var e=this._dic[this._current];if(e)for(var i=e.length,r=this._engine,n=0;i>n;n++){var o=e[n];r.awakeLayer(o.id)}},e}();t.BlurScreen=e,__reflect(e.prototype,"jy.BlurScreen")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._readyState=0,t.init(),t}return __extends(i,e),Object.defineProperty(i.prototype,"isReady",{get:function(){return 2==this._readyState},enumerable:!0,configurable:!0}),i.prototype.init=function(){},i.prototype.bind=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];this.suiLib=t,this.suiClass=e,this._otherDepends=i},i.prototype.startSync=function(){this._readyState<=0&&(this._otherDepends?this._depends=this._otherDepends.concat():this._depends=[],this._depends.push(this.suiLib),this._readyState=1,this.loadNext())},i.prototype.loadNext=function(){if(this._depends.length){var e=this._depends.pop(),i=t.singleton(t.SuiResManager);i.loadData(e,this)}else this.skinDataComplete()},i.prototype.suiDataComplete=function(e){this.preloadImage?e.loadBmd(t.CallbackInfo.get(this.loadNext,this)):this.loadNext()},i.prototype.suiDataFailed=function(t){this._readyState=-1,this.readyNow(!0)},i.prototype.readyNow=function(t){var e=this._asyncHelper;e&&(e.readyNow(),t&&(e.isReady=!1))},i.prototype.bindComponent=function(){t.singleton(t.SuiResManager).createComponents(this.suiLib,this.suiClass,this)},i.prototype.skinDataComplete=function(){this.bindComponent();var t=this.bg;!t&&this.numChildren&&(t=this.getChildAt(0)),t&&(t.touchEnabled=!0),this._readyState=2,this.readyNow()},i.prototype.modalToStage=function(){this._isModal&&this.addModal()},Object.defineProperty(i.prototype,"isModal",{get:function(){return this._isModal},set:function(t){this._isModal!=t&&(this._isModal=t,t?(this.setModalTouchClose(!0),this.stage?this.addModal():this.once("addedToStage",this.modalToStage,this)):(this.removeModal(),this.off("addedToStage",this.modalToStage,this)))},enumerable:!0,configurable:!0}),i.prototype.setModalTouchClose=function(t){if(this._mTouchClose!=t){this._mTouchClose=t;var e=this.getModal();t?e.on("touchTap",this.hide,this):e.off("touchTap",this.hide,this)}},i.prototype.getModal=function(){var e=this.modal;if(!e){this.modal=e=new egret.Bitmap;var r=this.modalAlpha;void 0==r&&(r=i.modalAlpha),void 0==r&&(r=.8),e.texture=t.ColorUtil.getTexture(0,r),e.touchEnabled=!0}return e},i.prototype.addModal=function(t,e){var i=this.getModal(),r=this.suiRawRect,n=egret.sys.$TempStage;n.on("resize",this.onModalResize,this),t=t||n.stageWidth,e=e||n.stageHeight;var o=this,a=o.scaleX,s=o.scaleY,h=r.x-(t-r.width>>1),c=r.y-(e-r.height>>1);i.x=h/a,i.y=c/s,i.width=t/a,i.height=e/s,this.addChildAt(i,0),this.x=-h,this.y=-c,this._mTouchClose&&i.on("touchTap",this.hide,this)},i.prototype.onModalResize=function(){this.addModal()},i.prototype.removeModal=function(){this.modal&&(this.modal.off("touchTap",this.hide,this),t.removeDisplay(this.modal)),egret.sys.$TempStage.off("resize",this.onModalResize,this)},i.prototype.hide=function(){t.toggle(this.moduleID,-1)},Object.defineProperty(i.prototype,"isShow",{get:function(){return void 0!=this.stage&&1==this.visible},enumerable:!0,configurable:!0}),i.prototype.show=function(){t.toggle(this.moduleID,1)},i.modalAlpha=.8,i}(egret.Sprite);t.Panel=e,__reflect(e.prototype,"jy.Panel",["jy.SuiDataCallback","jy.IAsyncPanel","jy.IAsync","jy.IModulePanel","egret.DisplayObject"]),t.expand(e,t.FHost,"addReadyExecute"),t.addEnable(e)}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(i,r){var n=e.call(this)||this;return n.suiClass=r,n.suiLib=i,t.singleton(t.SuiResManager).createComponents(i,r,n),n}return __extends(i,e),i}(egret.Sprite);t.View=e,__reflect(e.prototype,"jy.View"),t.addEnable(e)}(jy||(jy={}));var jy;!function(t){var e={x:0,y:0},i=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.frontCon=new egret.Sprite,t.backCon=new egret.Sprite,t.frontMask=new egret.Shape,t.backMask=new egret.Shape,t.backPoints=[],t.frontPoints=[],t}return __extends(r,i),r.prototype.init=function(t,e,i,r){function n(t){if(t instanceof egret.DisplayObject){var e=new egret.RenderTexture;return e.drawToTexture(t),e}return t}void 0===i&&(i=5);var o=n(t),a=e&&e!=t?n(e):o,s=new egret.Bitmap,h=new egret.Bitmap;s.texture=o,h.texture=a,this.init2(s,h,i,r)},r.prototype.init2=function(e,i,r,n){void 0===r&&(r=5);var o=this,a=o.frontCon,s=o.backCon,h=o.frontMask,c=o.backMask;e.x=e.y=i.x=i.y=0,this.frontDis=e,this.backDis=i,this.sCorner=r,this.touchEnabled=!0,a.addChild(e),t.removeDisplay(h),e.mask=null,s.addChild(i),i.mask=c,i.scaleX=-1,c.scaleX=-1,t.removeDisplay(c),this.addChild(a),n||(n={width:e.width,height:e.height});var u=n.width,l=n.height;this.bl={x:0,y:l},this.tr={x:u,y:0},this.br={x:u,y:l},this.size=n,this.on("touchBegin",this.touchBegin,this)},r.prototype.touchBegin=function(t){var e=this.size,i=e.width,r=e.height,n=this.getLocal(t),o=n.x,a=n.y,s=r>>1>a,h=i>>1>o,c=s?h?1:2:h?4:8;if(this.farea=0,this.barea=0,c==(c&this.sCorner)){this.cCorner=c,this.oX=h?0:i,this.oY=s?0:r;var u=this.stage;u.on("touchMove",this.touchMove,this),u.on("touchEnd",this.touchEnd,this),u.on("touchReleaseOutside",this.touchEnd,this),this.draw(o,a)}},r.prototype.touchMove=function(t){var e=this.getLocal(t),i=e.x,r=e.y;this.draw(i,r)},r.prototype.getLocal=function(e){var i=e.stageX,r=e.stageY,n=t.Temp.EgretPoint;return this.globalToLocal(i,r,n),n},r.prototype.touchEnd=function(t){var e=this.farea;this.dispatchEventWith(-1060,!1,0==e?1:this.barea/e),this.reset(),this.clearEvents()},r.prototype.clearEvents=function(){var t=egret.sys.$TempStage;t.off("touchMove",this.touchMove,this),t.off("touchEnd",this.touchEnd,this),t.off("touchReleaseOutside",this.touchEnd,this)},r.prototype.reset=function(){var e=this,i=e.frontDis,r=e.backCon,n=e.frontMask;i.mask=null,t.removeDisplay(n),t.removeDisplay(r)},r.prototype.draw=function(t,i){function r(t,e,i){var r=e.graphics;r.clear();var n=t[0];r.beginFill(0),r.moveTo(n.x,n.y);for(var o=0,a=n,s=1;i>s;s++){var h=t[s];r.lineTo(h.x,h.y),o+=(h.x-a.x)*(h.y+a.y),a=h}return o+=(n.x-a.x)*(n.y+a.y),r.lineTo(n.x,n.y),r.endFill(),.5*o}var n=this,o=n.oX,a=n.oY,s=n.size,h=s.width,c=s.height,u=t-o,l=i-a;if(0==u||0==l)return void this.reset();var p,f=this,d=f.cCorner,y=f.backMask,v=f.frontCon,g=(f.backDis,f.frontDis),_=f.backCon,m=f.frontMask,b=f.backPoints,w=f.frontPoints,j=o+.5*u,x=a+.5*l,S=l/u,T=x+j/S,C=T-h/S,D=j+x*S,k=D-c*S,R=this,B=R.bl,P=R.br,M=R.tr,O=0,I=0;switch(d){case 1:D.between(0,h)?(p={x:D,y:0},b[O++]=p):(p={x:h,y:C},b[O++]=p,b[O++]=M),w[I++]=p,b[O++]=e,T.between(0,c)?(p={x:0,y:T},b[O++]=p,w[I++]=p,w[I++]=B):(b[O++]=B,p={x:k,y:c},b[O++]=p,w[I++]=p),w[I++]=P,w[I++]=M;break;case 4:T.between(0,c)?(p={x:0,y:T},b[O++]=p):(p={x:D,y:0},b[O++]=p,b[O++]=e),w[I++]=p,b[O++]=B,k.between(0,h)?(p={x:k,y:c},b[O++]=p,w[I++]=p,w[I++]=P):(b[O++]=P,p={x:h,y:C},b[O++]=p,w[I++]=p),w[I++]=M,w[I++]=e;break;case 8:k.between(0,h)?(p={x:k,y:c},b[O++]=p):(p={x:0,y:T},b[O++]=p,b[O++]=B),w[I++]=p,b[O++]=P,C.between(0,h)?(p={x:h,y:C},b[O++]=p,w[I++]=p,w[I++]=M):(b[O++]=M,p={x:D,y:0},b[O++]=p,w[I++]=p),w[I++]=e,w[I++]=B;break;case 2:C.between(0,c)?(p={x:h,y:C},b[O++]=p):(p={x:k,y:c},b[O++]=p,b[O++]=P),w[I++]=p,b[O++]=M,D.between(0,h)?(p={x:D,y:0},b[O++]=p,w[I++]=p,w[I++]=e):(b[O++]=e,p={x:0,y:T},b[O++]=p,w[I++]=p),w[I++]=B,w[I++]=P}this.farea=r(w,m,I),this.barea=r(b,y,O),g.mask=m,v.addChild(m),_.addChild(y),_.anchorOffsetX=-D,_.x=D,_.rotation=(Math.PI-2*Math.atan2(u,l))*Math.RAD_TO_DEG,this.addChild(_)},r}(egret.Sprite);t.Flip=i,__reflect(i.prototype,"jy.Flip")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.on("addedToStage",t.addedToStage,t),t.on("removedFromStage",t.removedFromStage,t),t}return __extends(i,e),i.prototype.addedToStage=function(){if(this.uri){var e=t.TextureResource.get(this.uri,this);e&&(e.qid=this.qid,this.texture=this.placehoder,e.bind(this),e.load())}},i.prototype.removedFromStage=function(){if(this.uri){var e=t.ResManager.getResource(this.uri);e&&e.loose(this),this.texture=void 0}},Object.defineProperty(i.prototype,"source",{set:function(t){this.uri!=t&&(this.uri&&this.removedFromStage(),this.uri=t,t?this.stage&&this.addedToStage():this.texture=void 0)},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this.removedFromStage(),this.off("addedToStage",this.addedToStage,this),this.off("removedFromStage",this.removedFromStage,this)},i}(egret.Bitmap);t.Image=e,__reflect(e.prototype,"jy.Image",["jy.TextureResourceOption"]),t.addEnable(e)}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._defaultWidth=5,t._defalutHeight=5,t._ready=!0,t._oldWidth=-1,t._oldHeight=-1,t.inited=!1,t._visible=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"index",{get:function(){return this._idx},set:function(t){this._idx=t;var e=this._skin;e&&(e.$_rndIdx=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataChange",{get:function(){return this._noCheckSame||this._dataChange},set:function(t){this._dataChange=t},enumerable:!0,configurable:!0}),i.prototype._bind=function(){var e=this._skin;e?(this.inited=!0,this.stageChange(!!e.stage)):this.skinlib&&this.skinClass&&(this.skin=t.singleton(t.SuiResManager).createDisplayObject(this.skinlib,this.skinClass)),this.checkInject(),this.bindComponent()},i.prototype.bindComponent=function(){},i.prototype.onTouchTap=function(){this.dispatch(-1001),this.dispatchEventWith("touchTap")},i.prototype.$setData=function(t){this._data=t,this.inited||this._bind()},Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(t){(this._noCheckSame||t!=this._data)&&this.$setData(t)},enumerable:!0,configurable:!0}),i.prototype.setContainer=function(t){var e=this._container;this._container=t;var i=this._skin;return i&&(t?t.addChild(i):e&&e.contains(i)&&e.removeChild(i)),this},Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){t!=this._skin&&this.$setSkin(t)},enumerable:!0,configurable:!0}),i.prototype.$setSkin=function(t){var e=this._skin;e&&(e.$_rndIdx=void 0,this.removeSkinListener(e)),this._skin=t,t.$_rndIdx=this._idx,this.$setVisible(t.visible),t.touchEnabled=!0,this.addSkinListener(this._skin);var i=this._container;i&&i.addChild(t),this._bind()},i.prototype.handleView=function(){this._sizeChecked||(this._sizeChecked=!0,this.checkViewSize())},i.prototype.checkViewSize=function(t){this._sizeChecked=!1;var e=this._skin,i=e.width,r=e.height;t||(this._oldHeight!=r||this._oldWidth!=i)&&(t=!0),this._oldHeight=r,this._oldWidth=i,t&&this.dispatch(-1999)},Object.defineProperty(i.prototype,"view",{get:function(){return this._skin},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&this.$setVisible(t)},enumerable:!0,configurable:!0}),i.prototype.$setVisible=function(t){this._visible=t;var e=this._skin;e&&(e.visible=t)},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&this.$setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.setPos=function(t,e){var i=this._skin;return i&&("object"==typeof t?(i.x=t.x,i.y=t.y):(void 0!=t&&(i.x=t),void 0!=e&&(i.y=e))),this},i.prototype.$setSelected=function(t){this._selected=t,this.dispatch(-1e3)},i.prototype.dispatch=function(t,i){var r=this._skin;return r&&r.dispatch(t,i),e.prototype.dispatch.call(this,t,i)},i.prototype.dispose=function(){this.removeSkinListener(this._skin),this.removeAllListeners()},i.prototype.removeSkinListener=function(e){e&&(e.off("touchTap",this.onTouchTap,this),t.ViewController.prototype.removeSkinListener.call(this,e))},i.prototype.addSkinListener=function(e){e&&(e.on("touchTap",this.onTouchTap,this),t.ViewController.prototype.addSkinListener.call(this,e))},i.prototype.bindTouch=function(t,e,i,r){this.skin.touchEnabled=!0,this.on("touchTap",t,e,r,i)},i.prototype.looseTouch=function(t,e,i){this.off("touchTap",t,e,i)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this._ready},enumerable:!0,configurable:!0}),i.prototype.startSync=function(){},i}(egret.EventDispatcher);t.ListItemRenderer=e,__reflect(e.prototype,"jy.ListItemRenderer",["jy.ListItemRender","jy.SelectableComponents"]),t.expand(e,t.ViewController,"addReadyExecute","addDepend","onStage","interest","checkInject","checkInterest","awakeTimer","sleepTimer","bindTimer","looseTimer","stageChange")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.currentPage=1,t.autoScrollSpeed=1,t.minPageScrollSpeed=.05,t._totalpageCount=1,t}return __extends(i,e),i.prototype.settotalpageInfo=function(t,e){1>t&&(t=1),0>e&&(e=0),this._pageSize=e,this._totalpageCount=t},Object.defineProperty(i.prototype,"totalpageCount",{get:function(){return this._totalpageCount},enumerable:!0,configurable:!0}),i.prototype.bindObj=function(t,i,r){e.prototype.bindObj.call(this,t,i,null)},i.prototype.onDragStart=function(t){0==this._scrollType?this._firstTouchPos=t.stageY:this._firstTouchPos=t.stageX,e.prototype.onDragStart.call(this,t)},i.prototype.onDragEnd=function(e){var i=this._content,r=i.stage||egret.sys.$TempStage;r.off("touchMove",this.onDragMove,this),i.off("touchEnd",this.onDragEnd,this);var n,o=t.Global.now;n=0==this._scrollType?e.stageY:e.stageX;var a=n-this._firstTouchPos;if(!(a>=0&&1==this.currentPage||0>a&&this.currentPage==this._totalpageCount)){var s;s=0==this._scrollType?this._content.scrollRect.y:this._content.scrollRect.x;var h=Math.round(s/this._pageSize)+1;1>h&&(h=1),h>this._totalpageCount&&(h=this._totalpageCount);var c=h>this.currentPage?-1:1;this._scrollToPage=h,this._lastFrameTime=t.Global.now,o-this._lastMoveTime<150?this._deriction==c?this._moveSpeed=this.autoScrollSpeed:this._moveSpeed>this.minPageScrollSpeed?(this._scrollToPage=this.currentPage,this._moveSpeed=this.autoScrollSpeed):this._moveSpeed=this.autoScrollSpeed:this._moveSpeed=this.autoScrollSpeed,i.stage&&r.on("enterFrame",this.autoScrollToNextPage,this)}},i.prototype.autoScrollToNextPage=function(e){var i,r=this._content,n=r.scrollRect,o=this._pageSize*(this._scrollToPage-1);i=0==this._scrollType?n.y:n.x;var a=t.Global.now,s=a-this._lastFrameTime,h=this._moveSpeed*s*this.globalspeed,c=o-i,u=c>0?-1:1;return Math.abs(c)<h||Math.abs(c)<2?(r.stage.off("enterFrame",this.autoScrollToNextPage,this),this.doScrollContent(c*u),n=r.scrollRect,i=0==this._scrollType?n.y:n.x,void(this.currentPage=Math.round(i/this._pageSize)+1)):(this.doScrollContent(h*u),this._lastFrameTime=a,void(this._moveSpeed*=this.blockSpeed))},i}(t.Scroller);t.PageScroller=e,__reflect(e.prototype,"jy.PageScroller")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._viewCount=0,e}return __extends(e,t),e.prototype.displayList=function(t){this._selectedIndex=-1;for(var e=t&&t.length||0,i=Math.max(this._dataLen,this._viewCount);i>e;){var r=this.getItemAt(i-1);r&&(r.data=void 0,r.handleView&&r.handleView()),i--}return this._data=t,this._dataLen=e,this.doRender(0,e-1),this},e.prototype.updateByIdx=function(t,e){var i=this.getItemAt(t);return i&&(this._data[t]=e,i.data=e,i.handleView&&i.handleView()),this},e.prototype.addItem=function(t,e){var i=this._list,r=i.indexOf(t);return-1==r&&(r=i.length,i[r]=t,t.on(-1001,this.onTouchItem,this)),t.index=void 0==e?r:e,this._viewCount=i.length,this},e.prototype._get=function(t){var e=this._list,i=e[t];return i?(i.index=t,i):void 0},e.prototype.clear=function(){this._dataLen=0,this._data=void 0;for(var t=0,e=this._list;t<e.length;t++){var i=e[t];i.data=void 0}return this._selectedIndex=-1,this._selectedItem=void 0,this},e.prototype.dispose=function(){for(var t=0,e=this._list;t<e.length;t++){var i=e[t];i.off("touchTap",this.onTouchItem,this)}this.clear()},e}(t.AbsPageList);t.MPageList=e,__reflect(e.prototype,"jy.MPageList")}(jy||(jy={}));var jy;!function(t){var e=function(e){function r(i,r){var n=e.call(this)||this;return n._sizeChanged=!1,n.scroller=null,n._waitForSetIndex=!1,n.renderChange=!1,i instanceof t.ClassFactory||(i=new t.ClassFactory(i)),n._factory=i,n.init(r),n}return __extends(r,e),Object.defineProperty(r.prototype,"w",{get:function(){return this._w},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"h",{get:function(){return this._h},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"container",{get:function(){return this._con},set:function(t){if(t){var e=this._con;e!=t&&(e&&(delete e.$_page,delete e.scrollRect),this._con=t,t.$_page=this,Object.defineProperty(t,"scrollRect",i))}},enumerable:!0,configurable:!0}),r.prototype.init=function(e){e=e||t.Temp.EmptyObject;var i=e.hgap,r=e.vgap,n=e.type,o=e.itemWidth,a=e.itemHeight,s=e.columnCount,h=e.staticSize,c=e.noScroller,u=e.con;this.staticSize=h,n=~~n,s=~~s,1>s&&(s=1==n?1/0:1),this._columncount=s,this._hgap=~~i,this._vgap=~~r,this.itemWidth=o,this.itemHeight=a,this.scrollType=n,u=u||new egret.Sprite;var l=new egret.Bitmap;l.texture=t.ColorUtil.getTexture(0,0),this.bg=l,u.addChild(l),this.container=u;var p=this;if(Object.defineProperties(u,t.makeDefDescriptors({measuredHeight:{get:function(){return p._h}},measuredWidth:{get:function(){return p._w}}})),!c){var f=this.scroller=new t.Scroller;f.scrollType=this.scrollType,f.bindObj2(u,u.suiRawRect)}},r.prototype.displayList=function(t){this._selectedIndex=-1,this._data!=t&&(this.rawDataChanged=!0);var e=t?t.length:0;if(this._data){var i=this._list,r=i.length;if(r>e){for(var n=e;n<i.length;n++){var o=i[n];this._removeRender(o)}i.length=e}}if(this._data=t,this._lastRect=void 0,!e)return this.clear(),this._dataLen=0,this.rawDataChanged=!1,this;this._dataLen=e,this.initItems();var a=this.scroller;return a&&a.scrollToHead(),this.rawDataChanged=!1,this},r.prototype.layout=function(e){if(!this.scroller){var i=this._con,r=i.suiRawRect;if(r){0==e&&(e=5);var n=t.Temp.SharedPoint1;t.Layout.getLayoutPos(this._w,this._h,r.width,r.height,e,n),i.x=r.x+n.x,i.y=r.y+n.y}}return this},r.prototype.initItems=function(){var t=this._data.length;this.doRender(0,t-1),this._sizeChanged=!0,this.reCalc(),this.checkViewRect()},r.prototype.onChange=function(){this.itemWidth&&this.itemHeight||(this._sizeChanged=!0,this.reCalc())},r.prototype._get=function(t){var e=this._list,i=e[t];return i||(i=this._factory.get(),e[t]=i,i.on(-1999,this.onSizeChange,this),i.on(-1001,this.onTouchItem,this)),i.index=t,i},r.prototype.onSizeChange=function(){this._sizeChanged||(this._sizeChanged=!0,this.once("enterFrame",this.reCalc,this))},r.prototype.getSize=function(t){var e=t;if(this.staticSize){var i=t.suiRawRect;i&&(e=i)}return e},r.prototype.reCalc=function(){if(this._sizeChanged){this._sizeChanged=!1;for(var t=this._list,e=t.length,i=e-1,r=this,n=r.itemWidth,o=r.itemHeight,a=r._columncount,s=r._hgap,h=r._vgap,c=(r.staticSize,e/a),u=0,l=0,p=0,f=0,d=0,y=0;c>=y;y++){for(var v=0,g=0;a>g&&!(d>i);g++){var _=t[d++],m=_.view,b=0;if(m){var w=void 0;n?b=n:(w=this.getSize(m),b=w.width);var j=void 0;o?j=o:(w||(w=this.getSize(m)),j=w.height),m.x=l,m.y=u;var x=m.x+b;x>p&&(p=x),j>v&&(v=j)}l+=s+b}var S=u+v;if(S>f&&(f=S),d>i)break;l=0,u+=h+(o||v)}if(p!=this._w||f!=this._h){this._w=p,this._h=f;var T=this.bg;T.width=p,T.height=f,this.dispatch(-1999)}}},r.prototype.$setSelectedIndex=function(t){if(!this._data)return void(this._waitForSetIndex=!0);var e,i=this._list,r=i.length-1;t>r&&(t=r),e=this._list[t],this.changeRender(e,t);var n=e.view;n&&n.stage?(this._waitForSetIndex=!1,this.moveScroll(e)):this._waitForSetIndex=!0,this._waitForSetIndex&&this.moveScroll(e)},r.prototype.moveScroll=function(e){var i=this._con,r=i.scrollRect;if(r){var n=e.view;if(n){var o,a,s;if(0==this.scrollType){o=r.y;var h=this.itemHeight;h||(h=this.getSize(n).height),a=n.y+h,s=this._h}else{o=r.x;var h=this.itemWidth;h||(h=this.getSize(n).width),a=n.x+h,s=this._w}a>s&&(a=s),r&&(a-=0==this.scrollType?r.height:r.width,0>a&&(a=0));var c=this.scroller;if(c&&c.stopTouchTween(),t.Global.removeTweens(this),this.useTweenIndex){this.useTweenIndex=!1;var u=1==this.scrollType?{tweenX:a}:{tweenY:a},l=t.Global.getTween(this).to(u,500,t.Ease.quadOut);c&&(c.showBar(),l.call(c.hideBar,c))}else c&&c.doMoveScrollBar(o-a),0==this.scrollType?r.y=a:r.x=a,i.scrollRect=r}}},Object.defineProperty(r.prototype,"tweenX",{get:function(){var t=this._con.scrollRect;return t?t.x:0},set:function(t){var e=this._con,i=e.scrollRect||new egret.Rectangle(0/0);if(t!=i.x){var r=t-i.x;i.x=t;var n=this.scroller;n&&n.doMoveScrollBar(r),e.scrollRect=i}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tweenY",{get:function(){var t=this._con.scrollRect;return t?t.y:0},set:function(t){var e=this._con,i=e.scrollRect||new egret.Rectangle(0,0/0);if(t!=i.y){var r=t-i.y;i.y=t;var n=this.scroller;n&&n.doMoveScrollBar(r),e.scrollRect=i}},enumerable:!0,configurable:!0}),r.prototype.tweenToIndex=function(t){this.useTweenIndex=!0,this.selectedIndex=t},r.prototype.selectItemByData=function(t,e,i){void 0===i&&(i=!1);for(var r=this._data,n=r&&r.length||0,o=0;n>o;o++)if(t in r[o]&&r[o][t]==e){i?this.tweenToIndex(o):this.selectedIndex=o;break}return this},r.prototype.updateByIdx=function(t,e){var i=this.getItemAt(t);
return i&&(this._data[t]=e,this.doRender(t)),this},r.prototype.removeAt=function(t){t>>>=0;var e=this._list;if(t<e.length){var i=e[t];e.splice(t,1),this._data.splice(t,1),this._removeRender(i)}},r.prototype.removeItem=function(t){var e=this._list.indexOf(t);-1!=e&&this.removeAt(e)},r.prototype._removeRender=function(e){e.data=void 0,t.removeDisplay(e.view),e.off(-1999,this.onSizeChange,this),e.off(-1001,this.onTouchItem,this),e.dispose(),this.renderChange||(this.renderChange=!0,this.once("enterFrame",this.refreshByRemoveItem,this))},r.prototype.refreshByRemoveItem=function(){this.renderChange&&(this.renderChange=!1,this._sizeChanged=!0,this.reCalc(),this.checkViewRect())},r.prototype.dispose=function(){this.clear()},r.prototype.clear=function(){this._con.graphics.clear(),this._selectedIndex=-1,this._data=void 0;for(var t=this._list,e=0;e<t.length;e++)this._removeRender(t[e]);return t.length=0,this._selectedItem=void 0,this._waitForSetIndex=!1,this._w=0,this._h=0,this},Object.defineProperty(r.prototype,"showStart",{get:function(){return this._showStart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showEnd",{get:function(){return this._showEnd},enumerable:!0,configurable:!0}),r.prototype.checkViewRect=function(){function e(e,i){var o=n[e],a=o.view;if(a){var s=void 0;if(S){s=x,s.x=a.x,s.y=a.y;var h=a.suiRawRect;s.width=i.itemWidth||h.width,s.height=i.itemHeight||h.height}else s=a;if(t.intersects(s,r))_||(_=o,b=e),j.push(a);else if(_&&(m=o,w=e,S))return!0}}var i=this._con,r=i.scrollRect,n=this._list,o=n.length,a=o-1;if(!r){for(var s=0;o>s;s++){var h=n[s],c=h.view;c&&i.addChild(c)}return this._showStart=0,void(this._showEnd=o-1)}var u,l,p=this._lastRect;if(p){var f="x",d="width";0==this.scrollType&&(f="y",d="height");var y=r[f]-p[f];if(0==y&&r[d]==p[d]&&!this.rawDataChanged)return;for(var v=this._showStart,g=this._showEnd,s=v;g>=s;s++){var h=n[s];h&&t.removeDisplay(h.view)}y>0?(u=v,l=!0):(u=g,l=!1),p[f]=r[f],p[d]=r[d]}else{if(!o)return;p=r.clone(),this._lastRect=p,u=0,l=!0}var _,m,b,w,j=t.Temp.SharedArray3,x=t.Temp.SharedRect1,S=this.staticSize;if(j.length=0,l){b=0,w=a;for(var s=u;o>s&&!e(s,this);s++);for(var s=0,T=j.length;T>s;s++){var c=j[s];i.addChild(c)}this._showStart=b,this._showEnd=w}else{b=a,w=0;for(var s=u;s>=0&&!e(s,this);s--);for(var s=j.length-1;s>=0;s--){var c=j[s];i.addChild(c)}this._showStart=w,this._showEnd=b}j.length=0},r}(t.AbsPageList);t.PageList=e,__reflect(e.prototype,"jy.PageList");var i={set:function(t){egret.DisplayObject.prototype.$setScrollRect.call(this,t),this.$_page.checkViewRect()},get:function(){return this.$scrollRect},configurable:!0}}(jy||(jy={}));var jy;!function(t){var e=function(){function e(t){this._txs={},this.name=t}return e.prototype.getTexture=function(t){return this._txs[t]},e.prototype.parseData=function(e,i){this._suiData=i;for(var r=this._txs,n=0,o=e.length;o>n;n++){var a=e[n],s=a[0];r[s]=i.getTexture(a[1])}t.refreshTexs(i,this)},e}();t.ArtWord=e,__reflect(e.prototype,"jy.ArtWord")}(jy||(jy={}));var jy;!function(t){function e(t,e,i,r,n,o){if(!t.hasListen(e))return!0;var a=l.create(u,e,!0,!0);a.$initTo(i.stageX,i.stageY,i.touchPointID),a.touchDown=i.touchDown,a.deltaX=r,a.deltaY=n,a.deltaTime=o;var s=t.dispatchEvent(a);return l.release(a),a.deltaX=void 0,a.deltaY=void 0,a.deltaTime=void 0,s}function i(t){this.lt=Date.now(),this.lx=t.stageX,this.ly=t.stageY,this.dragId=t.touchPointID,c.on("touchMove",r,this),c.on("touchEnd",n,this)}function r(t){if(!t.touchDown)return n.call(this,t);var i=t.stageX,r=t.stageY,o=i-this.lx,a=r-this.ly,s=Date.now(),h=s-this.lt,c=this,u=c.dragId,l=c.host,p=f[u];if(p)this.isCon&&(l.touchChildren=!1),e(l,-1089,t,o,a,h);else{if(h>this.minDragTime)p=!0;else{var d=o*o+a*a;d>this.minSqDist&&(p=!0)}p&&e(l,-1090,t,o,a,h),f[u]=p}p&&(this.lx=i,this.ly=r,this.lt=s)}function n(t){var i=this.dragId;if(null!=i&&f[i]){t.preventDefault(),t.stopImmediatePropagation();var r=this.host;this.isCon&&(r.touchChildren=!0),e(r,-1088,t)}f[i]=!1,s(this)}function o(t,e,r,n){void 0===e&&(e=!0),void 0===r&&(r=300),void 0===n&&(n=400),c=c||egret.sys.$TempStage;var o=e&&t instanceof egret.DisplayObjectContainer;t.touchEnabled=!0;var a={host:t,isCon:o,minDragTime:r,minSqDist:n};return t.on("touchBegin",i,a),t[p]=a,a}function a(t){var e=t[p];e&&(f[e.pointId]=!1,s(e))}function s(t){t.dragId=null,c.off("touchMove",r,t),c.off("touchEnd",n,t)}function h(t){var e=t[p];e&&(s(e),e.host.off("touchBegin",i,e),e.isCon&&(t.touchChildren=!0),delete t[p])}var c,u=egret.TouchEvent,l=egret.Event,p="$__$Drag",f={};t.bindDrag=o,t.stopDrag=a,t.looseDrag=h}(jy||(jy={}));var jy;!function(t){var e=function(){function e(t,e){this.textures=[],this.bmdState=0,this.using=0,this.lastUseTime=0,this.loading=[],this.uri=t,this.url=e}return Object.defineProperty(e.prototype,"isStatic",{get:function(){return this.using>0},enumerable:!0,configurable:!0}),e.prototype.loadBmd=function(){this.bmdState<=0&&(t.Res.load(this.uri,this.url,t.CallbackInfo.get(this.checkBitmap,this)),this.bmdState=1)},e.prototype.checkBitmap=function(e){var i=e.uri,r=e.data;if(this.uri==i){if(!r)return void t.dispatch(-1070,this.uri);var n=r.bitmapData,o=this.textures;this.bmd=n;for(var a=0,s=o;a<s.length;a++){var h=s[a];h.$bitmapData=n}var c=this.loading;if(c){for(var u=0,l=c;u<l.length;u++){var p=l[u];p.refreshBMD()}c.length=0}this.bmdState=2}},e.prototype.dispose=function(){var e=this.bmd;this.bmdState=0,e&&(e.$dispose(),this.bmd=void 0,t.Res.remove(this.uri))},e}();t.SuiBmd=e,__reflect(e.prototype,"jy.SuiBmd",["jy.IResource"])}(jy||(jy={}));var jy;!function(t){var e=function(){function e(e){this.state=0,this.lib={},this.key=e,this.url=t.ConfigUtils.getSkinFile(e,"s.json"),this.uri=t.getSuiDataUri(e)}return e.prototype.createBmpLoader=function(e,i){var r="d"+(e?".png":".jpg"),n=this.skinUri||"skin/"+t.ConfigUtils.getSkinPath(this.key,r),o=t.ResManager.get(n,this.noRes,this,n,r,i);e?this.pngbmd=o:this.jpgbmd=o},e.prototype.noRes=function(e,i,r){var n=t.ConfigUtils.getSkinFile(this.key,i)+t.Global.webp,o=new t.SuiBmd(e,n);return o.textures=r,o},e.prototype.checkRefreshBmp=function(t,e){var i=e?this.jpgbmd:this.pngbmd;return i?(i.using++,2==i.bmdState?(t.refreshBMD&&t.refreshBMD(),!0):(i.loading.pushOnce(t),i.loadBmd(),!1)):void 0},e.prototype.getTexture=function(t){var e=t,i=this.pngbmd;0>t&&(e=-1-t,i=this.jpgbmd);var r=i.textures;return r?r[e]:void 0},e.prototype.loadBmd=function(e){var r=t.recyclable(i),n=0;this.jpgbmd&&!this.checkRefreshBmp(r,!0)&&n++,this.pngbmd&&!this.checkRefreshBmp(r)&&n++,n?(r.count=n,r.callback=e):(r.recycle(),e&&e.execute(!0))},e}();t.SuiData=e,__reflect(e.prototype,"jy.SuiData");var i=function(){function t(){}return t.prototype.refreshBMD=function(){var t=this.count;if(--t)this.count=t;else{var e=this.callback;e&&(this.callback=void 0,e.execute(!0))}},t}();__reflect(i.prototype,"CallbackBin")}(jy||(jy={}));var jy;!function(t){function e(t){return"$SuiData$_"+t}var i=egret.Texture;t.getSuiDataUri=e;var r=function(){function r(){this._suiDatas={},this._urlKey={},this.initInlineCreators()}return r.prototype.initInlineCreators=function(){var e;this._creators=(e={},e[3]=t.ButtonCreator,e[6]=t.ArtTextCreator,e[5]=t.ScaleBitmapCreator,e[7]=t.NumericStepperCreator,e[8]=t.SliderCreator,e[9]=t.ScrollBarCreator,e[10]=t.ProgressBarCreator,e[11]=t.ScaleBitmapCreator,e[12]=t.ShareBitmapCreator,e[13]=t.SlotCreator,e[19]=t.MovieClipCreator,e[20]=t.MCButtonCreator,e[21]=t.MCProgressCreator,e),this.sharedTFCreator=new t.TextFieldCreator},r.prototype.getData=function(t){return this._suiDatas[t]},r.prototype.loadData=function(e,i,r){var n=this._suiDatas[e];n||(n=this.createSuiData(e));var o=n.state;if(-1==o)i&&i.suiDataFailed(n);else if(2==o)i&&i.suiDataComplete(n);else{var a=n.callbacks;a||(n.callbacks=a=[]),i&&a.pushOnce(i),0==o&&(n.state=1,t.Res.load(n.uri,n.url,t.CallbackInfo.get(this.checkData,this),r))}},r.prototype.checkData=function(t){var e=t.uri,i=t.data,r=this._urlKey[e];if(i)this._initSuiData(i,r);else{r.state=0;var n=r.callbacks;if(n){for(var o=0;o<n.length;o++){var a=n[o];a.suiDataFailed(r)}delete r.callbacks}}},r.prototype.setInlineData=function(t,i,r){var n=e(t),o=this._urlKey[n];o||(o=this.createSuiData(t)),o.skinUri=r,this._initSuiData(i,o)},r.prototype.createSuiData=function(e){var i=new t.SuiData(e);return this._suiDatas[e]=i,this._urlKey[i.uri]=i,i},r.prototype._initSuiData=function(t,e){var i=t[0];i&&this.parseTextureData(i,e,!0);var r=t[2];r&&this.parseTextureData(r,e),this.parseComponentData(t[1],e);var n,o=t[4];if(o){var a=t[3];n={};for(var s=0;s<a.length;s++){var h=a[s],c=o[h[0]];n[c]=h.slice(1)}e.panelNames=o}else n=t[3];n&&(e.panelsData=n),e.state=2;var u=e.callbacks;if(u){for(var s=0;s<u.length;s++){var l=u[s];l.suiDataComplete(e)}delete e.callbacks}},r.prototype.parseComponentData=function(e,i){i.sourceComponentData=e;for(var r in e){var n=e[r],o=n[0],a=n[1],s=n[2],h=o.length;if(15==r)for(var c=i.fonts,u=0;h>u;u++){var l=o[u],p=a[u],f=new t.ArtWord(l);f.parseData(p,i),c||(i.fonts=c={}),c[l]=f}else{var d=this._creators[r];if(d)for(var y=i.lib,u=0;h>u;u++){var v=o[u],p=a[u],g=new d;g.parseData(null,i),p&&(g.parseSelfData(p),g.parseSize(s[u])),y[v]=g}}}},r.prototype.parseTextureData=function(e,r,n){if(e){var o=[],a=r.bmplibs;a||(r.bmplibs=a={}),r.createBmpLoader(n,o);for(var s=0,h=e.length;h>s;s++){var c=e[s],u=new i,l=c[0],p=c[1],f=c[2],d=c[3];u.$initData(f,d,l,p,0,0,l,p,l,p),o[s]=u;var y=new t.BitmapCreator(r),v=n?s:-1-s;y.parseSelfData(v),a[v]=y}}},r.prototype.createDisplayObject=function(t,e,i){var r=this._suiDatas[t];if(r){var n=r.lib[e];if(n){n.setBaseData(i);var o=n.get();return o.suiClass=e,o.suiLib=t,o}}},r.prototype.createElement=function(t,e){var i="string"==typeof t?this._suiDatas[t]:t;if(i){var r=this._creators[+e[0]];if(r){var n=new r;n.parseData(e,i);var o=n.get();return o.suiLib=i.key,o}}},r.prototype.createBitmap=function(t,e,i){var r=this._suiDatas[t];if(r){var n=r.bmplibs,o=n[e];if(o)return o.setBaseData(i),o.get()}},r.prototype.getArtWord=function(t,e){var i=this._suiDatas[t];if(i){var r=i.fonts;if(r)return r[e]}},r.prototype.getArtWordTexture=function(t,e,i){var r=this.getArtWord(t,e);return r?r.getTexture(i):void 0},r.prototype.createBitmapByData=function(t,e){return this.createBitmap(t,e[2],e[1])},r.prototype.createTextField=function(t,e,i){var r=this.sharedTFCreator;return r.parseSelfData(e),r.setBaseData(i),r.get()},r.prototype.createTextFieldByData=function(t,e){return this.createTextField(t,e[2],e[1])},r.initBaseData=function(e,i){var r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],h=i[5],c=i[6],u=i[7];if(r&&(e.name=r),e.suiRawRect=new egret.Rectangle(n,o,a,s),Array.isArray(h)){var l=h[0],p=h[1],f=h[2],d=h[3],y=e.matrix;y.setTo(l,p,f,d,n,o),e.$setMatrix(y,!0)}else e.width=a,e.height=s,e.x=n,e.y=o,h&&(e.rotation=h);void 0!=c&&(e.alpha=c),u&&(e.filters=[t.FilterUtils.adjustColorFilter(u[0],u[1],u[2],u[3])])},r.prototype.createComponents=function(t,e,i){var r=this._suiDatas[t];if(r){var n=r.panelsData;if(n){var o=n[e];if(o){var a=o[0],s=o[1];i.suiRawRect=new egret.Rectangle(a[0],a[1],a[2],a[3]),i.suiClass=e,i.suiLib=t,this._createComponents(r,i,s)}}}},r.prototype._createComponents=function(t,e,i){if(i)for(var r=0;r<i.length;r++)this.createComponent(i[r],t,e)},r.prototype.createComponent=function(t,e,i){var n,o=t[1],a=t[0];14==a?n=new egret.Rectangle(o[1],o[2],o[3],o[4]):(2==a?(n=new egret.Sprite,r.initBaseData(n,o),this._createComponents(e,n,t[2])):n=this.getElement(e,t),n&&i.addChild(n));var s=o[0];return s&&(i[s]=n),n},r.prototype.getElement=function(e,i){var n=i[0],o=i[1],a=i[2],s=i[3];switch(n){case 1:var h=new t.TextFieldCreator;return h.setBaseData(o),h.parseSelfData(a),h.get();case 0:var c=new t.BitmapCreator(e);return c.parseData(i,e),c.get();case 16:var u=new egret.Sprite;return r.initBaseData(u,o),u;case 17:var l=new t.Image;return r.initBaseData(l,o),l;default:void 0==s&&(s=0);var p=void 0;switch(s){case 0:p=e.key;break;case 1:p="lib";break;default:p=s}if(18==n){var f=e.panelNames[~~a],d=new t.View(p,f);return r.initBaseData(d,o),d}if("string"==typeof a&&20==n){var d=this.createDisplayObject(p,a,o);return new t.MCButton(d)}var y=e.sourceComponentData;if(y){var v=y[n];if(v){var g=v[0];if(g){var _=a,m=g[_];if(m)return this.createDisplayObject(p,m,o)}}}return this.createElement(p,i)}},r.prototype.getSize=function(t,e,i){var r=this._suiDatas[t];if(r){var n=r.panelsData;if(n){var o=n[e];if(o){var a=o[0];return i=i||new egret.Rectangle,i.setTo(a[0],a[1],a[2],a[3]),i}}}},r}();t.SuiResManager=r,__reflect(r.prototype,"jy.SuiResManager")}(jy||(jy={}));var jy;!function(t){function e(t,e){var i=t.pngbmd;"refreshBMD"in e||(e.refreshBMD=function(){var t=this._txs,e=i.bmd;for(var r in t)t[r]._bitmapData=e}),t.checkRefreshBmp(e)}t.refreshTexs=e}(jy||(jy={}));var jy;!function(t){var e,i=(e={},e[4]=function(t){t.y=0},e[8]=function(t,e){t.y=e-t.height>>1},e[12]=function(t,e){t.y=e-t.height},e),r=function(e){function r(){var t=e.call(this)||this;return t._align=4,t.artwidth=0,t._maxHeight=0,t}return __extends(r,e),r.prototype.refreshBMD=function(){for(var t=0,e=this.$children;t<e.length;t++){var i=e[t];i.refreshBMD()}},r.prototype.setVerticalAlign=function(t){this._align!=t&&(this._align=t)},r.prototype.$setValue=function(t){if(this._value!=t){void 0==t&&(t=""),this._value=t;for(var e,i,r=t+"",n=r.length,o=this.textures,a=this.$children,s=this.numChildren,h=0,c=this.hgap||0,u=0,l=0;n>l;l++){e=r.charAt(l),s>l?i=a[l]:(i=new egret.Bitmap,this.addChild(i));var p=o[e];p&&(p.textureHeight>u&&(u=p.textureHeight),i.x=h,i.texture=null,i.texture=p,h+=p.textureWidth+c)}for(this.artwidth=h-c,l=s-1;l>=n;l--)this.$doRemoveChild(l);this._maxHeight=u,this.checkAlign()}},Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){this.$setValue(t)},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return this.artwidth},r.prototype.checkAlign=function(){for(var t=this.$children,e=this._maxHeight,r=i[this._align],n=0;n<t.length;n++){var o=t[n];r(o,e)}},r.prototype.dispose=function(){e.prototype.dispose.call(this),t.removeDisplay(this)},r}(t.Component);t.ArtText=r,__reflect(r.prototype,"jy.ArtText");var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.parseSelfData=function(e){for(var i=this,n=e[0],o=n.length,a=this._suiData,s={},h=0;o>h;h++){var c=a.getTexture(e[h+1]),u=n.charAt(h);s[u]=c}this._txs=s,t.refreshTexs(a,this),this._createT=function(){var t=new r;return i.bindEvent(t),t.textures=s,t}},i.prototype.bindEvent=function(t){t.on("addedToStage",this.onAddedToStage,this),t.on("removedFromStage",this.onRemoveFromStage,this)},i.prototype.onAddedToStage=function(t){var e=this._suiData;if(e){var i=t.currentTarget;e.checkRefreshBmp(i)}},i.prototype.onRemoveFromStage=function(){var e=this._suiData;if(e){var i=e.pngbmd;i.using--,i.lastUseTime=t.Global.now}},i}(t.BaseCreator);t.ArtTextCreator=n,__reflect(n.prototype,"jy.ArtTextCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return e&&i.setSkin(e),i}return __extends(e,t),e.prototype.setSkin=function(t){this.txtLabel=t.tf,this.mc=t,this.addChild(t),this.refresh()},e.prototype.refresh=function(){var t=this.mc;t&&t.stop(this.$getBtnFrame())},e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this.mc;e&&e.dispose()},e}(t.Button);t.MCButton=e,__reflect(e.prototype,"jy.MCButton"),e.prototype.addChild=t.Component.prototype.addChild;var i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.parseSelfData=function(i){var r=this._suiData,n=t.MovieClipCreator.prototype.$getFramesData(i);this._createT=function(){return new e(new t.MovieClip(i,n,r))}},r}(t.BaseCreator);t.MCButtonCreator=i,__reflect(i.prototype,"jy.MCButtonCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(i,r,n){var o=e.call(this)||this;o.loop=!0,o.timePerFrame=100,o.suiData=n;var a,s=i[0];if(s){var h=t.singleton(t.SuiResManager);a=[];for(var c=0;c<s.length;c++){var u=h.createComponent(s[c],n,o);u instanceof egret.DisplayObject&&(a[c]=u)}}else a=t.Temp.EmptyArray;return o.compData=a,o.framesData=r,o.totalFrame=r.length,o.stop(0),o}return __extends(i,e),i.prototype.stop=function(t){var e=this.validateFrame(this.getFrame(t));this.playing=!1,this.render(e),this.currentFrame=e,this.off("enterFrame",this.doRender,this)},i.prototype.play=function(e){this.currentFrame=this.getFrame(e),this.playing=!0,this._nt=t.Global.now+this.timePerFrame,this.on("enterFrame",this.doRender,this)},i.prototype.doRender=function(){var e=t.Global.now,i=this._nt;if(e>i){var r=this.currentFrame,n=this.timePerFrame,o=(e-i)/n|0;r=this.validateFrame(r+1+o),this.render(r),this.currentFrame=r,this._nt=i+(o+1)*n}},i.prototype.validateFrame=function(t){var e=this.totalFrame;return t>=e&&(this.loop?t%=e:t=e-1),t},i.prototype.getFrame=function(t){return void 0==t?this.currentFrame:t},i.prototype.render=function(e){var i=this.framesData[e];if(i&&i.key!=this.currentFrame){var r=this.compData,n=t.singleton(t.SuiResManager),o=(n.sharedTFCreator,this.suiData);this.removeChildren();for(var a=0,s=i.data;a<s.length;a++){var h=s[a],c=void 0,u=void 0,l=void 0,p=void 0;Array.isArray(h)?(c=h[0],u=h[1],p=h[2]):c=h,-1==c?l=n.createComponent(u,o,this):(l=r[c],l instanceof egret.DisplayObject&&(this.addChild(l),u&&t.SuiResManager.initBaseData(l,u),l instanceof egret.TextField&&(p||(p=l.rawTextData),n.sharedTFCreator.initTextData(l,p))))}}},i}(t.Component);t.MovieClip=e,__reflect(e.prototype,"jy.MovieClip");var i=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.parseSelfData=function(t){var i=this._suiData,r=this.$getFramesData(t);this._createT=function(){return new e(t,r,i)}},i.prototype.$getFramesData=function(t){for(var e=[],i=0,r=0,n=t[1];r<n.length;r++)for(var o=n[r],a=o[0],s=o[1],h=i,c=0;a>c;c++)e[i++]={key:h,data:s};return e},i}(t.BaseCreator);t.MovieClipCreator=i,__reflect(i.prototype,"jy.MovieClipCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._minValue=1,t}return __extends(i,e),i.prototype.bindChildren=function(){var t=this,e=t.txtbg,i=t.subBtn,r=t.addBtn,n=t.txt;this.addChild(e),this.addChild(i),this.addChild(r),i.enabled=!0,r.enabled=!0,i.bindTouch(this.subValue,this),r.bindTouch(this.addValue,this),this.addChild(n),this.minBtn&&(this.addChild(this.minBtn),this.minBtn.enabled=!0,this.minBtn.bindTouch(this.setMinValue,this)),this.maxBtn?(this.addChild(this.maxBtn),this.maxBtn.enabled=!0,this.maxBtn.bindTouch(this.setMaxValue,this),this._width=this.maxBtn.width+this.maxBtn.x):this._width=this.addBtn.width+this.addBtn.x},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){if(this._width!=t){var e=t-this._width;this.txt.width+=e,this.txtbg.width+=e,this.addBtn.x+=e,this.maxBtn&&(this.maxBtn.x+=e),this._width=t}},enumerable:!0,configurable:!0}),i.prototype.setMinValue=function(t){this._minValue&&(this.value=this._minValue)},i.prototype.addValue=function(t){this.value<this._maxValue&&(this.value+=1)},i.prototype.subValue=function(t){this.value>this._minValue&&(this.value-=1)},i.prototype.setMaxValue=function(t){this._maxValue&&(this.value=this._maxValue)},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.txt.text=t+"",this.dispatch(-1040))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this._minValue},set:function(e){e?this._minValue=e:t.ThrowError("最小值需大于0")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxValue",{get:function(){return this._maxValue},set:function(e){e?this._maxValue=e:t.ThrowError("最大值需大于0")},enumerable:!0,configurable:!0}),i}(t.Component);t.NumericStepper=e,__reflect(e.prototype,"jy.NumericStepper");var i=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.prototype.parseSelfData=function(e){this.uiData=e;var i=new t.TextFieldCreator;this.txtCreator=i;var r=e[0],n=e[1];i.setBaseData(r[1]),i.parseSelfData(r[2]);var o=new t.ScaleBitmapCreator;this.scale9Creator=o;var a=this._suiData,s=a.sourceComponentData;o.bindSuiData(a),o.parseSelfData(s[5][1][n[2]]),o.setBaseData(n[1]);var h=[];this.btnCreator=h;for(var c=s[3][1],u=2;u<e.length;u++){var l=e[u];if(l){var p=new t.ButtonCreator;p.bindSuiData(a),p.parseSelfData(c[l[2]]),p.setBaseData(l[1]),h.push(p)}}this._createT=this.createNumericStepper,this.suiManager=t.singleton(t.SuiResManager)},r.prototype.createNumericStepper=function(){var t=new e;t.txt=this.txtCreator.get(),t.txtbg=this.scale9Creator.get();var i=this.btnCreator,r=i.length;return r>=3?(t.minBtn=i[0].get(),t.subBtn=i[1].get(),t.addBtn=i[2].get(),t.maxBtn=i[3].get()):(t.subBtn=i[0].get(),t.addBtn=i[1].get()),t.bindChildren(),t},r}(t.BaseCreator);t.NumericStepperCreator=i,__reflect(i.prototype,"jy.NumericStepperCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var i=t.call(this)||this;return i._labelFun=e.defaultLabelFunction,i._value=0,i._maxValue=1,i._delta=0,i}return __extends(e,t),Object.defineProperty(e.prototype,"labelFun",{get:function(){return this._labelFun},set:function(t){this._labelFun!=t&&(this._labelFun=t,this.refresh())},enumerable:!0,configurable:!0}),e.prototype.setWidth=function(t){var e=this,i=e.bg,r=e.bar;e.tf;i&&(i.width=t),r.width=t-this._delta},Object.defineProperty(e.prototype,"skin",{set:function(t){if(this._skin!=t){this._skin=t;var e=t.bg,i=t.bar,r=t.tf;this.bar=i,this._barWidth=i.width,e&&(this.bg=e,this._delta=e.width-i.width),this.tf=r}},enumerable:!0,configurable:!0}),e.prototype.progress=function(t,e){0>t&&(t=0),0>e&&(e=1e-5),t>e&&(t=e),this._value=t,this._maxValue=e,this.refresh()},e.prototype.updateLabel=function(){var t=this.tf,e=this._labelFun;t&&e&&(t.text=e(this._value,this._maxValue))},e.prototype.getPercent=function(){return this._value/this._maxValue},e.prototype.updateBar=function(){var t=this.bar,e=this.getPercent()*this._barWidth;if(this.useMask){var i=t.scrollRect;i||(i=new egret.Rectangle(0,0,0,t.height)),i.width=e,t.scrollRect=i}else t.width=e},e.prototype.refresh=function(){this.updateLabel(),this.updateBar()},e.defaultLabelFunction=function(t,e){return t+" / "+e},e}(t.Component);t.ProgressBar=e,__reflect(e.prototype,"jy.ProgressBar");var i=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.parseSelfData=function(t){var i=this;this._createT=function(){for(var r,n,o,a,s=new e,h=t.length,c=0;h>c;c++)if(r=t[c]){var u=i.createElement(r);0==c?n=u:1==c?o=u:2==c&&(a=u)}return a&&s.addChild(a),o&&s.addChild(o),n&&s.addChild(n),s.skin={bg:a,bar:o,tf:n},s}},i}(t.BaseCreator);t.ProgressBarCreator=i,__reflect(i.prototype,"jy.ProgressBarCreator");var r=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.parseSelfData=function(i){var r=this._suiData,n=t.MovieClipCreator.prototype.$getFramesData(i);this._createT=function(){var o=new t.MovieClip(i,n,r),a=new e;return a.addChild(o),a.skin=o,a}},r}(t.BaseCreator);t.MCProgressCreator=r,__reflect(r.prototype,"jy.MCProgressCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parseSelfData=function(t){var e=this,i=t[0],r=i[2];0>r&&(this.isjpg=!0);var n=t[1],o=0!=t[0],a=i[1],s=a[3],h=a[4];if(n)var c=new egret.Rectangle(n[0],n[1],n[2],n[3]);this._createT=function(){var t=e._suiData,i=new egret.Bitmap;return i.scale9Grid=c,o&&(i.texture=t.getTexture(r),i.width=s,i.height=h,e.bindEvent(i)),i}},e}(t.BitmapCreator);t.ScaleBitmapCreator=e,__reflect(e.prototype,"jy.ScaleBitmapCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._scrollType=0,e._supportSize=15,e.initBaseContainer(),e}return __extends(e,t),e.prototype.initBaseContainer=function(){var t=new egret.Sprite,e=new egret.Sprite;this.addChild(e),this.addChild(t),e.visible=!1,this.bar=t,this.bg=e},Object.defineProperty(e.prototype,"scrollType",{get:function(){return this._scrollType},set:function(t){this._scrollType=t,this.checkBarSize(),this.checkBgSize(),this.$setSupportSize(this._supportSize)},enumerable:!0,configurable:!0}),e.prototype.setBg=function(t,e){this._bgBmp=t,t.y=0,e>0?this._bgSize=e:this.checkBgSize(),this.bg.addChild(t),this.$setSupportSize(this._supportSize)},e.prototype.setBar=function(t,e){this._barBmp=t,t.y=0,e>0?this._barSize=e:this.checkBarSize(),this.bar.addChild(t),this.$setSupportSize(this._supportSize)},Object.defineProperty(e.prototype,"bgSize",{get:function(){return this._bgSize},set:function(t){this._bgSize!=t&&this.$setBgSize(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barSize",{get:function(){return this._barSize},set:function(t){this._barSize!=t&&this.$setBarSize(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportSize",{get:function(){return this._supportSize},set:function(t){this._supportSize!=t&&this.$setSupportSize(t)},enumerable:!0,configurable:!0}),e.prototype.$setSupportSize=function(t){this._supportSize=t;var e=this,i=e._bgBmp,r=e._barBmp;0==this._scrollType?(i&&(i.width=t),r&&(r.width=t)):(i&&(i.height=t),r&&(r.height=t))},e.prototype.$setBarSize=function(t){this._barSize=t;var e=this._barBmp;e&&(0==this._scrollType?e.height=t:e.width=t)},e.prototype.$setBgSize=function(t){this._bgSize=t;var e=this._bgBmp;e&&(0==this._scrollType?e.height=t:e.width=t)},e.prototype.checkBgSize=function(){var t=this._bgBmp;t&&(0==this._scrollType?this._bgSize=t.height:this._bgSize=t.width)},e.prototype.checkBarSize=function(){var t=this._bgBmp;t&&(0==this._scrollType?this._barSize=t.height:this._barSize=t.width)},e}(t.Component);t.ScrollBar=e,__reflect(e.prototype,"jy.ScrollBar");var i=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.prototype.parseSelfData=function(e){this.uiData=e,this.suiManager=t.singleton(t.SuiResManager),this._createT=this.createScrollBar},r.prototype.createScrollBar=function(){var t,i,r,n,o=new e,a=this.uiData,s=this._suiData.sourceComponentData;t=a[0],i=t[2],r=s[5],n=r[0][i];var h=this.suiManager.createDisplayObject(this._suiData.key,n,t[1]);return o.setBar(h),t=a[1],i=t[2],r=s[5],n=r[0][i],h=this.suiManager.createDisplayObject(this._suiData.key,n,t[1]),o.setBg(h),o},r}(t.BaseCreator);t.ScrollBarCreator=i,__reflect(i.prototype,"jy.ScrollBarCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parseSelfData=function(e){t.prototype.parseSelfData.call(this,e[0][2])},e}(t.BitmapCreator);t.ShareBitmapCreator=e,__reflect(e.prototype,"jy.ShareBitmapCreator")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.initBaseContainer(),e.touchChildren=e.touchEnabled=!0,e.thumb.touchEnabled=!0,e.bgline.touchEnabled=!0,e.addListener(),e}return __extends(e,t),e.prototype.addListener=function(){this.thumb.on("touchBegin",this.onThumbBegin,this),this.on("addedToStage",this.onAddToStage,this)},e.prototype.onAddToStage=function(t){this._barEnabled&&this.stage.on("touchEnd",this.bgOut,this)},Object.defineProperty(e.prototype,"barEnabled",{set:function(t){this._barEnabled=t,t?(this.bgline.on("touchBegin",this.bgClick,this),this.stage&&this.stage.on("touchEnd",this.bgOut,this)):(this.bgline.off("touchBegin",this.bgClick,this),this.stage&&this.bgline.off("touchEnd",this.bgOut,this))},enumerable:!0,configurable:!0}),e.prototype.bgClick=function(t){this._lastThumbX=this.thumb.localToGlobal().x;var e=t.stageX;this.tipTxt.visible=!0,this.calculatevalue(e),this.tipTxt.text=this.value.toString()},e.prototype.bgOut=function(t){this.tipTxt.visible=!1},e.prototype.onThumbBegin=function(t){this._lastThumbX=this.thumb.localToGlobal().x,this.stage.on("touchMove",this.mouseMove,this),this.thumb.on("touchEnd",this.onThumbEnd,this),this.thumb.on("touchReleaseOutside",this.onThumbEnd,this),this.tipTxt.visible=!0},e.prototype.onThumbEnd=function(t){this.stage.off("touchMove",this.mouseMove,this),this.thumb.off("touchEnd",this.onThumbEnd,this),this.thumb.off("touchReleaseOutside",this.onThumbEnd,this)},e.prototype.mouseMove=function(t){var e=t.stageX;this.calculatevalue(e),this.tipTxt.text=this.value.toString()},e.prototype.calculatevalue=function(t){var e,i,r=t-this._lastThumbX;Math.abs(r)>=this._perStepPixel&&(e=r/this._perStepPixel,e=Math.round(e),i=this.value+e*this._step,i<=this._minValue&&(i=this._minValue),i>=this._maxVlaue&&(i=this._maxVlaue),this.value=i,this._lastThumbX=this.thumb.localToGlobal().x,this.tipTxt.x=this.thumb.x+this._halfThumbWidth-40)},e.prototype.initBaseContainer=function(){this.thumb=new egret.Sprite,this.bgline=new egret.Sprite,this.addChild(this.bgline),this.addChild(this.thumb),this.tipTxt=new egret.TextField,this.tipTxt.y=-12,this.tipTxt.textAlign="center",this.tipTxt.width=80,this.tipTxt.size=12,this.tipTxt.bold=!1,this.addChild(this.tipTxt)},e.prototype.setBg=function(t){this._bgBmp=t,this.bgline.addChild(t),this._width=t.width},e.prototype.setThumb=function(t){this.thumb.x=t.x,this.thumb.y=t.y,t.x=t.y=0,this.thumb.addChild(t),this._halfThumbWidth=.5*t.width},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.dispatch(-1040),this.thumb.x=(t-this._minValue)/this._step*this._perStepPixel-this._halfThumbWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._bgBmp&&(this._bgBmp.width=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._bgBmp&&(this._bgBmp.height=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxVlaue",{set:function(t){this._maxVlaue=t,this.checkStepPixel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{set:function(t){this._minValue=t,this.checkStepPixel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{set:function(t){this._step=t,this.checkStepPixel()},enumerable:!0,configurable:!0}),e.prototype.checkStepPixel=function(){this._perStepPixel=this.bgline.width/((this._maxVlaue-this._minValue)/this._step)},e}(t.Component);t.Slider=e,__reflect(e.prototype,"jy.Slider");var i=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.prototype.parseSelfData=function(e){this.uiData=e,this.txtCreator=new t.TextFieldCreator,this.scale9Creator=new t.ScaleBitmapCreator,this.bitmapCreator=new t.BitmapCreator(this._suiData),this.suiManager=t.singleton(t.SuiResManager),this._createT=this.createSlider},r.prototype.createSlider=function(){for(var t,i,r,n,o,a=new e,s=this.uiData,h=s.length,c=this._suiData.sourceComponentData,u=0;h>u;u++)if(t=s[u],i=t[0],r=t[2],0==i){this.bitmapCreator.parseSelfData(r);var l=this.bitmapCreator.get();a.setThumb(l)}else if(5==i){n=c[i],o=n[0][r];var p=this.suiManager.createDisplayObject(this._suiData.key,o,t[1]);a.setBg(p)}return a},r}(t.BaseCreator);t.SliderCreator=i,__reflect(i.prototype,"jy.SliderCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._count=1,i._countShow=1,i.icon=new t.Image,i}return __extends(i,e),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(t){this.$setData(t)},enumerable:!0,configurable:!0}),i.prototype.$setData=function(t){this._data=t},Object.defineProperty(i.prototype,"rect",{get:function(){return this._rect},set:function(t){if(t){this._rect=t;var e=this.icon;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"countTxt",{get:function(){return this._countTxt
},set:function(e){var i=this._countTxt;i!=e&&(t.removeDisplay(i),this._countTxt=e,this.refreshCount(),this.invalidateDisplay())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconSource",{set:function(t){this._uri!=t&&(this._uri=t,this.icon.source=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{set:function(t){this._count!=t&&(this._count=t,this.refreshCount())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"countShow",{get:function(){return this._countShow},set:function(t){this._countShow!=t&&(this._countShow=t,this.refreshCount())},enumerable:!0,configurable:!0}),i.prototype.refreshCount=function(){this.stage&&this._countTxt&&(this._countTxt.text=this.getCount())},i.prototype.getCount=function(){var t="",e=this._count;switch(this.countShow){case 1:e>1&&(t=e+"");break;case 2:t=i.getCountString(e)}return t},i.prototype.invalidateDisplay=function(){this._changed=!0,this.stage&&t.Global.callLater(this.refreshDisplay,0,this)},i.prototype.refreshDisplay=function(){return this._changed?(this._changed=!1,this.bg&&this.addChild(this.bg),this.addChild(this.icon),this._countTxt&&this.addChild(this._countTxt),!0):!1},i.prototype.onAwake=function(){this.refreshDisplay(),this.refreshCount()},i.prototype.dispose=function(){this.icon.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.suiRawRect.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.suiRawRect.height},enumerable:!0,configurable:!0}),i.getCountString=function(e){return 1>=e?"":1e4>e?e+"":t.LangUtil.getMsg("$_wan",Math.floor(e/1e4))},i}(t.Component);t.Slot=e,__reflect(e.prototype,"jy.Slot");var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.parseSelfData=function(t){var i=this,r=t[0],n=r?new egret.Rectangle(r[0],r[1],r[2],r[3]):void 0;this._createT=function(){var r=new e;r.rect=n;var o=t[1];if(o){var a=i.createElement(o);r.countTxt=a}if(o=t[2]){var a=i.createElement(o);o.length>1?r.bg=a:r.bg=a}return r.invalidateDisplay(),r}},i}(t.BaseCreator);t.SlotCreator=i,__reflect(i.prototype,"jy.SlotCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.parseSelfData=function(t){var e=this;this._createT=function(){var i=new egret.TextField;return i.rawTextData=t,e.initTextData(i,t),i}},i.prototype.initTextData=function(e,r){var n=["dynamic","dynamic","input"][+r[0]],o=r[1]||i.DefaultFonts,a=["left","center","right","justify"][+r[2]],s=t.ColorUtil.getColorValue(r[3]),h=r[4]||12,c=+r[5],u=!!r[6],l=!!r[7],p=0,f=0,d=r[8];Array.isArray(d)&&(f=d[0],"string"==typeof f&&(f=t.ColorUtil.getColorValue(f)),p=d[1]),e.type=n,e.fontFamily=o,e.textAlign=a,e.textColor=s,e.size=h,e.lineSpacing=c,e.bold=u,e.italic=l,e.stroke=p,e.strokeColor=f},i.DefaultFonts="",i}(t.BaseCreator);t.TextFieldCreator=e,__reflect(e.prototype,"jy.TextFieldCreator")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t,i,r){void 0===r&&(r=6);var n=e.call(this,t,i)||this;return n._layout=r,n}return __extends(i,e),i.prototype.onResize=function(){var e=this._host,i=e.stage||egret.sys.$TempStage,r=this._basis,n=i.stageWidth,o=i.stageHeight,a=r.width,s=r.height,h=n,c=o,u=n,l=o,p=1;if(n>a||o>s){var f=t.getFixedLayout(n,o,a,s,!0);c=f.dh,h=f.dw,u=f.lw,l=f.lh,p=f.scale}else h=a,c=s;this._lw=u,this._lh=l,e.scaleY=e.scaleX=p;var d=t.Temp.SharedPoint1;t.Layout.getLayoutPos(h,c,n,o,this._layout,d),e.x=d.x,e.y=d.y,this.layoutAll()},i}(t.LayoutContainer);t.BGContainer=e,__reflect(e.prototype,"jy.BGContainer")}(jy||(jy={}));var jy;!function(t){function e(t,e,i,r,n,o,a,s){void 0===a&&(a=0),void 0===s&&(s=0);var h=n.x,c=n.y,u=h+a,l=c+s;return t+u+a>i&&(u=i-t-a,h>u&&(u=h-t-a),0>u&&(u=a)),e+c+s>r&&(l=r-e-s,0>l&&(l=s)),o.x=Math.round(u),o.y=Math.round(l),o}function i(t,e,i,r,n,o,a,s,h,c){void 0===a&&(a=0),void 0===s&&(s=0),o=o||{};var u=12&n,l=3&n,p=0,f=0;switch(u){case 4:h&&(p=-e);break;case 8:p=r-e>>1;break;case 12:p=h?r:r-e}switch(l){case 1:c&&(f=-t);break;case 2:f=i-t>>1;break;case 3:f=c?i:i-t}return o.x=Math.round(f+a),o.y=Math.round(p+s),o}function r(t,e){var i;if(i=t instanceof egret.DisplayObject?t:t.display){var r,o,a;e&&e instanceof egret.DisplayObjectContainer&&(a=e),a||(a=i.parent),a||(a=egret.sys.$TempStage),a instanceof egret.Stage?(r=a.stageWidth,o=a.stageHeight):(r=a.width,o=a.height);var s=t.$layoutSize;return s||(i.getTransformedBounds(a,n),s=n),[s.width,s.height,i,r,o,a]}}var n=new egret.Rectangle;t.Layout={layout:function(t,e,n,o,a,s,h){var c=r(t,h);if(c){var u=c[0],l=c[1],p=c[2],f=c[3],d=c[4];i(u,l,f,d,e,p,n,o,a,s)}},layoutPercent:function(t,e,i,n,o,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0);var s=r(t,n);if(s){var h=s[0],c=s[1],u=s[2],l=s[3],p=s[4];return u.x=Math.round((l-h)*i+o),u.y=Math.round((p-c)*e+a),u}},getLayoutPos:i,tipLayout:function(t,i,n,o,a){var s=r(t,a);if(s){var h=s[0],c=s[1],u=s[2],l=s[3],p=s[4];e(h,c,l,p,i,u,n,o)}},getTipLayoutPos:e,offsets:{top:0,left:0,right:0,bottom:0}}}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.onResize=function(){var e=this._host,i=e.stage||egret.sys.$TempStage,r=this._basis,n=i.stageWidth,o=i.stageHeight,a=r.width,s=r.height,h=n,c=o,u=1;if(a>n||s>o){var l=t.getFixedLayout(n,o,a,s);h=l.lw,c=l.lh,u=l.scale}this._lw=h,this._lh=c,e.x=0,e.y=0,e.scaleY=e.scaleX=u,this.layoutAll()},i.prototype.add=function(e,i,r,n){var o=e.suiRawRect,a=t.Layout.getLayoutPos(o.width,o.height,r.width,r.height,i),s=o.x-r.x,h=o.y-r.y,c=s-a.x,u=h-a.y;this.addLayout(e,i,o,c,u,!1,!1,n)},i.prototype.binLayout=function(t){if(0==t.type){var i=t.dis,r=this._host,n=r.scaleX;i.x=t.hoffset*n,i.y=t.voffset*n;var o=r.stage||egret.sys.$TempStage;i.width=o.stageWidth/n,i.height=o.stageHeight/n}else e.prototype.binLayout.call(this,t)},i}(t.LayoutContainer);t.MainUIContainer=e,__reflect(e.prototype,"jy.MainUIContainer")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){this._list=[]}return e.prototype.init=function(t){this._stage=t||egret.sys.$TempStage,this._stage.on("resize",this.onResize,this)},e.prototype.add=function(t,e,i,r,n){var o=this._list;t.$_resize={layout:e,hoffset:i,voffset:r,container:n},o.pushOnce(t),t.stage?this.resize(t):t.once("addedToStage",this.onAdded,this)},e.prototype.remove=function(t){this._list.remove(t),t.off("addedToStage",this.onAdded,this),t.$_resize&&(t.$_resize=void 0)},e.prototype.onAdded=function(t){var e=t.target,i=this._list.indexOf(e);0>i||this.resize(e)},e.prototype.resize=function(e){var i=e.$_resize,r=i.container||egret.sys.$TempStage;t.Layout.layout(e,i.layout,i.hoffset,i.voffset,!1,!1,r)},e.prototype.onResize=function(){for(var t=this._list,e=t.length,i=0;e>i;i++)this.resize(t[i])},e.prototype.dispose=function(){this._stage.off("addedToStage",this.onAdded,this),this._list.length=0},e}();t.ResizeManager=e,__reflect(e.prototype,"jy.ResizeManager")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(i,r){void 0===i&&(i="lib"),void 0===r&&(r="ui.btn.MenuBtn");var n=e.call(this)||this,o=t.singleton(t.SuiResManager).createDisplayObject(i,r);return n.skin=o,n.btn=o,n}return __extends(i,e),i.prototype.$setData=function(t){e.prototype.$setData.call(this,t),this.btn.label=t.label},i}(t.MenuBaseRender);t.ButtonMenuRender=e,__reflect(e.prototype,"jy.ButtonMenuRender")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(i,r){var n=e.call(this)||this;return n.style=i,n.uiManager=t.singleton(t.SuiResManager),n.maxRenderCount=r,n.bindComponent(),n}return __extends(i,e),i.bind=function(t,e,r){var n=i.dic;n||(i.dic=n=new Map),n.has(t)||n.set(t,e),e.menuinitFunc=r,t.on(-1e3,i.onShowOrHideMenu,this)},i.unBind=function(e){var r=i.dic;if(r){if(r.has(e)){var n=r.get(e);n.menuinitFunc=void 0,t.removeDisplay(n),r["delete"](e)}e.off(-1e3,i.onShowOrHideMenu,this)}},i.onShowOrHideMenu=function(e){var r=e.target,n=r.selected,o=i.dic.get(r),a=r.view;if(n){if(a instanceof egret.DisplayObjectContainer){a.addChild(o);var s=o.menuinitFunc;s&&s.call(r,r,o)}this.currentShow=r}else t.removeDisplay(o),this.currentShow=void 0;r.dispatch(-1999)},i.prototype.bindComponent=function(){var t=this.uiManager,e=this.style.uikey,i=this.style.possize,r=this.style.renderClass,n=this.style.scalebg,o=t.createDisplayObject(e,n);this.addChild(o),o.width=i.width,o.height=i.height,this.renders=[];for(var a=0;a<this.maxRenderCount;a++){var s=new r;this.renders[a]=s,this.addChild(s.view)}},i.prototype.displayMenuDatas=function(e){for(var i=e.length,r=this.renders.length,n=this.style,o=[],a=0;i>a;a++){var s=this.renders[a];s.data=e[a],this.addChild(s.view),o[a]=s}if(r>i)for(var a=i;r>a;a++)t.removeDisplay(this.renders[a].view);var h,c=n.possize,u=o[0].getSize();if(n.align){h=(c.height-2*c.y-i*u.height)/(i-1);for(var a=0;i>a;a++){var s=o[a];u=s.getSize();var l=s.view;l.x=~~c.x,l.y=~~(c.y+(h+u.height)*a)}}else{h=(c.width-2*c.x-i*u.width)/(i-1);for(var a=0;i>a;a++){var s=o[a];u=s.getSize();var l=s.view;l.x=~~(c.x+(h+u.width)*a),l.y=~~c.y}}},i}(egret.Sprite);t.Menu=e,__reflect(e.prototype,"jy.Menu")}(jy||(jy={}));var jy;!function(t){var e=function(){function e(t){this._parent=t}return e.prototype.show=function(e,i,r,n){void 0===i&&(i=16777215),void 0===r&&(r=1e3),void 0===n&&(n=1e3);var o=new egret.TextField;o.textAlign="center",/<[^>]+>/.test(e)?o.setHtmlText(e):o.text=e,o.alpha=1,t.Layout.layout(o,10),o.textColor=i,this._parent.addChild(o);var a=t.Global.getTween(o);a.to({y:o.y-100},r).to({alpha:0},n).call(this.txtComplete,this,[a,o])},e.prototype.txtComplete=function(e){var i=e[0],r=e[1];i&&(i.paused=!0,i.onRecycle()),r&&t.removeDisplay(r)},e}();t.ErrorTips=e,__reflect(e.prototype,"jy.ErrorTips")}(jy||(jy={}));var jy;!function(t){var e=function(e){function i(t,i,r,n){void 0===t&&(t=480),void 0===i&&(i=800),void 0===r&&(r=5);var o=e.call(this)||this;return o._autoSize=n,o._corner=r,o.init(t,i,r),o}return __extends(i,e),i.prototype.init=function(t,e,i){var r;this.tf=r=new egret.TextField;var n=2*i;r.width=t-n,r.height=e-n,r.size=12,r.x=i,r.y=i,this.addChild(r),this.drawRect(0,0,t,e)},i.prototype.setTipData=function(t){var e=this.tf;if(t!=e.text&&(e.text=t,this._autoSize)){var i=2*this._corner,r=e.textWidth+2*i,n=e.textHeight+2*i;this.drawRect(0,0,r,n)}},i.prototype.drawRect=function(t,e,i,r){var n=this.graphics;n.clear(),n.lineStyle(1,13421772),n.beginFill(0,.7),n.drawRoundRect(t,e,i,r,this._corner),n.endFill()},i.prototype.show=function(t,e,i){void 0!=e&&void 0!=i&&(t.addChild(this),this.x=e,this.y=i)},i.prototype.hide=function(){t.removeDisplay(this)},i}(egret.Sprite);t.SimToolTip=e,__reflect(e.prototype,"jy.SimToolTip",["jy.IToolTip"])}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return e.prototype.register=function(e,i,r,n){this.data=i,this.con=n,this.tooltip!=r&&(this.tooltip=r),this.target!=e&&(this.clearDisListener(this.target),t.Global.clearCallLater(this.showTip,this),e.on("touchBegin",this.checkTouch,this))},e.prototype.clearDisListener=function(t){t.off("touchBegin",this.checkTouch,this),t.off("touchEnd",this.touchEnd,this)},e.prototype.onRecycle=function(){this.target&&(this.clearDisListener(this.target),this.target=void 0),t.Global.clearCallLater(this.showTip,this),this.data=void 0,this.tooltip=void 0},e.prototype.checkTouch=function(e){this.target.on("touchEnd",this.touchEnd,this),t.Global.callLater(this.showTip,t.ToolTipManager.touchTime,this)},e.prototype.showTip=function(){this.target.off("touchEnd",this.touchEnd,this),this.tooltip.show(this.con)},e.prototype.touchEnd=function(e){this.target.off("touchEnd",this.touchEnd,this),t.Global.clearCallLater(this.showTip,this)},e}();t.ToolTipData=e,__reflect(e.prototype,"jy.ToolTipData",["jy.IRecyclable"])}(jy||(jy={}));var jy;!function(t){var e=function(){function e(){}return e.register=function(i,r,n,o){if(!n&&(n=e.defaultTip,!n))return!1;var a=e._map,s=a.get(i);return s||(s=t.recyclable(t.ToolTipData),a.set(i,s)),o||(o=t.GameEngine.instance.getLayer(9e3)),s.register(i,r,n,o),!0},e.show=function(t,i,r){var n=e._map.get(t);i&&(n.data=i);var o=n.tooltip;o||(o=e.defaultTip),o&&(o.setTipData(n.data),r||(r=n.con),o.show(r),this._currentSkin=o)},e.refresh=function(t,i){var r=e._map.get(t);r.data=i;var n=r.tooltip;n||(n=e.defaultTip),n&&n.setTipData(r.data)},e.remove=function(t){var i=e._map.get(t);i.recycle()},e.touchTime=500,e._map=new Map,e}();t.ToolTipManager=e,__reflect(e.prototype,"jy.ToolTipManager")}(jy||(jy={}));var jy;!function(t){var e,i=Object.freeze({"int":{x:1,y:1}});!function(e){function r(t){t&&t.on("touchBegin",s)}function n(t){t&&(t.off("touchBegin",s),a(t))}function o(e){var i=e.$_tdi;if(i){var r=i.tween,n=i.raw;if(r&&t.Global.removeTween(r),n){var o=n.x,a=n.y,s=n.scaleX,h=n.scaleY;e.x=o,e.y=a,e.scaleX=s,e.scaleY=h}e.$_tdi=void 0}}function a(t){t.off("touchEnd",h),t.off("touchCancel",h),t.off("touchReleaseOutside",h),t.off("removedFromStage",h)}function s(e){var r=e.target;r.on("touchEnd",h),r.on("touchCancel",h),r.on("touchReleaseOutside",h),r.on("removedFromStage",h);var n=r.$_tdi;if(n){var o=n.tween;o&&t.Global.removeTween(o)}else{r.$_tdi=n={};var a=r.x,s=r.y,c=r.scaleX,u=r.scaleY;n.raw={x:a,y:s,scaleX:c,scaleY:u}}var l=n.raw;n.tween=t.Global.getTween(r,i).to({x:l.x-.0625*r.width,y:l.y-.0625*r.height,scaleX:1.125*l.scaleX,scaleY:1.125*l.scaleY},100,t.Ease.quadOut)}function h(e){var r=e.target;a(r);var n=r.$_tdi;if(n){var o=n.tween;o&&t.Global.removeTween(o),n.tween=t.Global.getTween(r,i).to(n.raw,100,t.Ease.quadOut).call(c,null,r)}}function c(t){t.$_tdi=void 0}e.bind=r,e.loose=n,e.reset=o}(e=t.TouchDown||(t.TouchDown={}))}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._selected=[],i.maxSelected=e,i}return __extends(e,t),e.prototype.removeItem=function(t){return t?(this._list.remove(t),this._selected.remove(t),t.off("touchTap",this.touchHandler,this),t):void 0},e.prototype.$setSelectedItem=function(t){if(t){var e,i=this._selected,r=-1;if(t.selected)t.selected=!1,i.remove(t),r=i.length-1,e=!0;else{var n=this.maxSelected||1/0;if(!(i.length<n))return this.dispatch(-1021);t.selected=!0,r=i.pushOnce(t),e=!0}return e?(this._selectedIndex=r,this._selectedItem=~r?void 0:i[r],this.dispatch(-1020)):void 0}},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),e.prototype.clear=function(){t.prototype.clear.call(this),this._selected.length=0},e}(t.Group);t.CheckBoxGroup=e,__reflect(e.prototype,"jy.CheckBoxGroup")}(jy||(jy={}));var jy;!function(t){t.GroupItemButton=function(){function t(t){var e=t.currentTarget,r=e[i];r.dispatchEvent(t)}var e="touchTap",i="$gib$btn",r="$gib$txt";return{bind:function(n,o){o[i]||(o[i]=n),o.touchEnabled=!0,o.on(e,t);var a=n[r];a&&a[i]==n&&(delete a[i],a.off(e,t)),n[r]=o},loose:function(n){var o=n[r];o&&(delete n[r],o[i]==n&&(delete o[i],o.off(e,t)))}}}()}(jy||(jy={}));var jy;!function(t){var e=function(){function t(){}return t.getValue=function(t,e,i){return t==e||0==i||1==i||"number"!=typeof t?1==i?e:t:t+(e-t)*i},t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){return function(i){if(0==i||1==i)return i;var r=e/Math.PI2*Math.asin(1/t);return-(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*Math.PI2/e))}},t.getElasticOut=function(t,e){return function(i){if(0==i||1==i)return i;var r=e/Math.PI2*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*Math.PI2/e)+1}},t.getElasticInOut=function(t,e){return function(i){var r=e/Math.PI2*Math.asin(1/t);return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*Math.PI2/e)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*Math.PI2/e)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();t.Ease=e,__reflect(e.prototype,"jy.Ease")}(jy||(jy={}));var jy;!function(t){var e=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.loop=!1,o.duration=0,o._prevPos=-1,o.position=null,o._prevPosition=0,o._stepPosition=0,o.passive=!1,o.initialize(e,i,r,n),o}return __extends(e,t),e.prototype.initialize=function(t,e,i,r){this.target=t;var n=this._manager;n&&n!=r&&n.removeTweens(t),e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.on(-1,e.onChange,e.onChangeObj),e.override&&r.removeTweens(t),this._int=e["int"]),this._manager=r,this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:r._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,r=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,r=!0)),i==this._prevPos)return r;var n=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this.target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var o=0,a=this._steps.length;a>o&&!(this._steps[o].t>i);o++);var s=this._steps[o-1];this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return r&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&n>i?(n!=this.duration&&this._runActions(n,this.duration),this._runActions(0,i,!0)):this._runActions(n,i)),this.dispatch(-1),r},e.prototype._runActions=function(t,e,i){void 0===i&&(i=!1);var r=t,n=e,o=-1,a=this._actions.length,s=1;for(t>e&&(r=e,n=t,o=a,a=s=-1);(o+=s)!=a;){var h=this._actions[o],c=h.t;(c==n||c>r&&n>c||i&&c==t)&&h.f.apply(h.o,h.p)}},e.prototype._updateTargetProps=function(t,i){var r,n,o,a,s,h;if(t||1!=i){if(this.passive=!!t.v,this.passive)return;t.e&&(i=t.e(i,0,1,1)),r=t.p0,n=t.p1}else this.passive=!1,r=n=this._curQueueProps;for(var c in this._initQueueProps){null==(a=r[c])&&(r[c]=a=this._initQueueProps[c]),null==(s=n[c])&&(n[c]=s=a),o=a==s||0==i||1==i||"number"!=typeof a?1==i?s:a:a+(s-a)*i;var u=!1;if(h=this._manager._plugins[c])for(var l=0,p=h.length;p>l;l++){var f=h[l].tween(this,c,o,r,n,i,!!t&&r==n,!t);f==e.IGNORE?u=!0:o=f}u||(this._int&&this._int[c]&&(o=Math.round(o)),this.target[c]=o)}},e.prototype._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e.prototype._appendQueueProps=function(t){var e,i,r,n,o;for(var a in t)if(void 0===this._initQueueProps[a]){if(i=this.target[a],e=this._manager._plugins[a])for(r=0,n=e.length;n>r;r++)i=e[r].init(this,a,i);this._initQueueProps[a]=this._curQueueProps[a]=void 0===i?null:i}else i=this._curQueueProps[a];for(var a in t){if(i=this._curQueueProps[a],e=this._manager._plugins[a])for(o=o||{},r=0,n=e.length;n>r;r++)e[r].step&&e[r].step(this,a,i,t[a],o);this._curQueueProps[a]=t[a]}return o&&this._appendQueueProps(o),this._curQueueProps},e.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e.prototype._set=function(t,e){for(var i in t)e[i]=t[i]},e.prototype.setPaused=function(t){return this.paused=t,this._manager._register(this,!t),this},e.prototype.wait=function(t,e){if(null==t||0>=t)return this;var i=this._curQueueProps.clone();return this._addStep({d:t,p0:i,p1:i,v:e})},e.prototype.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._curQueueProps.clone(),e:i,p1:this._appendQueueProps(t).clone()})},e.prototype.call=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this._addAction({f:t,p:i,o:e?e:this.target})},e.prototype.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e||this.target]})},e.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,!1)},e.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,!0)},e.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},e.prototype.onRecycle=function(){this._int=void 0},e.IGNORE={},e}(egret.EventDispatcher);t.Tween=e,__reflect(e.prototype,"jy.Tween")}(jy||(jy={}));var jy;!function(t){t.MotionGuidePlugin=function(){function t(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;var i=t._curQueueProps;void 0!==i.rotation?t.__rotGlobalS=t.__rotGlobalE=i.rotation:t.__rotGlobalS=t.__rotGlobalE=e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var r=t.__guideData,n=t.__rotGlobalE-t.__rotGlobalS||0,o=t.__rotPathE-t.__rotPathS||0,a=n-o||0;if("auto"==r.orient)a>180?a-=360:-180>a&&(a+=360);else if("cw"==r.orient){for(;0>a;)a+=360;0==a&&n>0&&180!=n&&(a+=360)}else if("ccw"==r.orient){for(a=n-(o>180?360-o:o);a>0;)a-=360;0==a&&0>n&&-180!=n&&(a-=360)}r.rotDelta=a,r.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}}function e(t,e,i){if(void 0==t._segments)throw"Missing critical pre-calculated information, please file a bug";void 0==i&&(i={x:0,y:0,rotation:0});for(var r=t._segments,n=t.path,o=t._length*e,a=r.length-2,s=0;o>r[s]&&a>s;)o-=r[s],s+=2;var h=r[s+1],c=0;for(a=h.length-1;o>h[c]&&a>c;)o-=h[c],c++;var u=c/++a+o/(a*h[c]);s=2*s+2;var l=1-u;return i.x=l*l*n[s-2]+2*l*u*n[s+0]+u*u*n[s+2],i.y=l*l*n[s-1]+2*l*u*n[s+1]+u*u*n[s+3],t.orient&&(i.rotation=57.2957795*Math.atan2((n[s+1]-n[s-1])*l+(n[s+3]-n[s+1])*u,(n[s+0]-n[s-2])*l+(n[s+2]-n[s+0])*u)),i}return{priority:0,install:function(t){t.installPlugin(this,["guide","x","y","rotation"])},init:function(t,e,i){var r=t.target;return void 0==r.x&&(r.x=0),void 0==r.y&&(r.y=0),void 0==r.rotation&&(r.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},step:function(i,r,n,o,a){if("rotation"==r&&(i.__rotGlobalS=n,i.__rotGlobalE=o,t(i,a)),"guide"!=r)return o;var s,h=o;h.hasOwnProperty("path")||(h.path=[]);var c=h.path;if(h.hasOwnProperty("end")||(h.end=1),h.hasOwnProperty("start")||(h.start=n&&n.hasOwnProperty("end")&&n.path===c?n.end:0),h.hasOwnProperty("_segments")&&h._length)return o;var u=c.length,l=10;if(!(u>=6&&(u-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";h._segments=[],h._length=0;for(var p=2;u>p;p+=4){for(var f,d,y=c[p-2],v=c[p-1],g=c[p+0],_=c[p+1],m=c[p+2],b=c[p+3],w=y,j=v,x=0,S=[],T=1;l>=T;T++){var C=T/l,D=1-C;f=D*D*y+2*D*C*g+C*C*m,d=D*D*v+2*D*C*_+C*C*b,x+=S[S.push(Math.sqrt((s=f-w)*s+(s=d-j)*s))-1],w=f,j=d}h._segments.push(x),h._segments.push(S),h._length+=x}s=h.orient,h.orient=!0;var k={};return e(h,h.start,k),i.__rotPathS=Number(k.rotation.toFixed(5)),e(h,h.end,k),i.__rotPathE=Number(k.rotation.toFixed(5)),h.orient=!1,e(h,h.end,a),h.orient=s,h.orient?(i.__guideData=h,t(i,a),o):o},tween:function(t,i,r,n,o,a,s,h){var c=o.guide;if(void 0==c||c===n.guide)return r;if(c.lastRatio!=a){var u=(c.end-c.start)*(s?c.end:a)+c.start;switch(e(c,u,t.target),c.orient){case"cw":case"ccw":case"auto":t.target.rotation+=c.rotOffS+c.rotDelta*a||0;break;case"fixed":default:t.target.rotation+=c.rotOffS||0}c.lastRatio=a}return"rotation"!=i||c.orient&&"false"!=c.orient?t.target[i]:r}}}()}(jy||(jy={}));